{"version":3,"sources":["../../../../src/ts_src/index.js"],"names":["MainCtrl","dataObject","Object","assign","stageWidth","ratio","screen","helper","blockMobileScroll","blockMobileContextualMenu","delayAfterClick","flashQuality","commonFlaLib","callback","onInitialised","_configure","ccid","id","type","stage","defaultTransition","screens","add","rid","bgMusicVolPC","onfinished","jx","dj","music","play","go","comps","initChildren","firstScreen","cc","Helper","$","css","document","ontouchmove","e","preventDefault","config","app","lockDelayAfterClick","flashOptimizer","quality","commonLib","db","findOne","data","_getFirstScreenAndPhase","screenShortcut","urlParams","split","firstPhase","length"],"mappings":"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","file":"index.js","sourcesContent":["import ModuleType from \"jx/core/presets/StageGameModule\";\nimport Screen00 from \"src/screens/Screen00\";\nexport default class MainCtrl extends ModuleType {\n    constructor(dataObject) {\n        super(Object.assign({\n            stageWidth: 1280,\n            ratio: 16 / 9,\n            screen: \"screen00\",\n            helper: false,\n            blockMobileScroll: false,\n            blockMobileContextualMenu: false,\n            delayAfterClick: false,\n            flashQuality: \"good\",\n            commonFlaLib: false\n        }, dataObject));\n    }\n    _onBeforeLoad(callback) {\n        callback();\n    }\n    /*******************************************************************************\n    * INIT\n    */\n    init(onInitialised) {\n        this._configure(this.dataObject);\n        this.ccid({ id: \"screens\", type: \"ScreensManager\", stage: this.stage, defaultTransition: \"FadeBlackInOut\" });\n        this.screens.add({ id: \"intro\", type: \"ScreenVideo\", rid: \"INTRO\", bgMusicVolPC: 0, stage: this.stage,\n            onfinished: evt => {\n                this.jx.dj.music.play({ id: \"MUSIC\" });\n                this.screens.go(\"screen00\");\n            }\n        });\n        this.screens.add({ id: \"screen00\", type: Screen00, stage: this.stage,\n            onfinished: evt => {\n            }\n        });\n        this.comps.initChildren(onInitialised);\n    }\n    /*******************************************************************************\n    * START\n    */\n    start() {\n        this.screens.go(this.firstScreen);\n        // this.jx.dj.music.play({id:\"MUSIC\"});\n    }\n    _configure({ helper = false, blockMobileScroll = false, blockMobileContextualMenu = false, delayAfterClick = false, flashQuality = \"good\", commonFlaLib = false, screen = \"intro\" }) {\n        if (helper)\n            this.jx.helper = this.cc({ type: Helper, stage: this.stage });\n        if (blockMobileContextualMenu)\n            $(\"body\").css(\"-webkit-touch-callout\", \"none\");\n        if (blockMobileScroll) {\n            document.ontouchmove = function (e) {\n                e.preventDefault();\n            };\n        }\n        if (delayAfterClick)\n            this.jx.config.app.lockDelayAfterClick = 250;\n        this.jx.config.flashOptimizer.quality = flashQuality;\n        this.stage.ratio = this.dataObject.ratio;\n        if (commonFlaLib)\n            this.commonLib = this.jx.db.findOne({ id: \"COMMON_LIB.SCREEN\" }).data;\n        this._getFirstScreenAndPhase({ firstScreen: screen });\n    }\n    /**\n     * get the first screen and phase\n     */\n    _getFirstScreenAndPhase({ firstScreen }) {\n        let screenShortcut = (this.jx.config.urlParams.screen || firstScreen).split(\".\"); // priority to screen passed as argument in url (&screen=\"screenID\");\n        this.firstScreen = screenShortcut[0];\n        this.firstPhase = screenShortcut.length > 1 ? screenShortcut[1] : null;\n    }\n}\n"]}