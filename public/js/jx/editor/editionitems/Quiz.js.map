{"version":3,"sources":["../../../../src/jx/editor/editionitems/Quiz.js"],"names":["Quiz","dataObject","controller","commonLib","jx","g2d","value","tools","intToString","itemData","shortcut","id","data","type","children","push","onclick","configure","description","numQuestions","numResponses","questionAudio","undefined","responseAudio","resultAudio","i","nq","j","nr","item","view","editor","popup","title","content","buttons","ok","label","close","onclose","console","log","evt","action"],"mappings":"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","file":"Quiz.js","sourcesContent":["import VisualComponent from \"jx/core/comps/VisualComponent\";\nimport Common from \"jx/editor/editionitems/Common\";\n/**\n * {\n * numQuestions,\n * numResponses,\n * questionAudio: false,\n * responseAudio: false,\n * resultAudio: false\n *  }\n */\nclass Quiz extends VisualComponent {\n    constructor(dataObject) {\n        super(dataObject);\n        this.controller = this.dataObject.controller;\n        this.commonLib = new Common({ jx: this.jx });\n        var g2d = (value) => {\n            return this.jx.tools.intToString(value, 2);\n        };\n        //-- create main container DataGroup\n        var itemData = { shortcut: true, id: `${this.data.id}`, type: 'DataGroup',\n            children: []\n        };\n        itemData.children.push({ id: `Configurer`, type: 'ButtonItem', onclick: () => this.configure(), description: '' });\n        //questions\n        let numQuestions = this.data.numQuestions || 10;\n        let numResponses = this.data.numResponses || 3;\n        let questionAudio = (this.data.questionAudio == undefined) ? false : this.data.questionAudio;\n        let responseAudio = (this.data.responseAudio == undefined) ? false : this.data.responseAudio;\n        let resultAudio = (this.data.resultAudio == undefined) ? false : this.data.resultAudio;\n        for (var i = 1; i <= numQuestions; i++) {\n            var nq = g2d(i);\n            itemData.children.push({ id: `QUESTION ${nq}`, type: 'Separator' });\n            itemData.children.push({ id: `Q${nq}_T`, type: 'Text', description: 'Question' });\n            if (questionAudio) {\n                itemData.children.push({ id: `Q${nq}`, type: 'Sound', description: 'Question',\n                    \"asset\": {\n                        \"src\": `sounds/quiz/Q${nq}.mp3`\n                    }\n                });\n            }\n            ;\n            if (resultAudio) {\n                itemData.children.push({ id: `Q${nq}_YES`, type: 'Sound', description: 'Resultat vrai',\n                    \"asset\": {\n                        \"src\": `sounds/quiz/Q${nq}_YES.mp3`\n                    }\n                });\n                itemData.children.push({ id: `Q${nq}_NO`, type: 'Sound', description: 'Resultat faux',\n                    \"asset\": {\n                        \"src\": `sounds/quiz/Q${nq}_NO.mp3`\n                    }\n                });\n            }\n            ;\n            itemData.children.push({ id: `Réponses de la question ${nq}`, type: 'Separator' });\n            for (var j = 1; j <= numResponses; j++) {\n                var nr = g2d(j);\n                itemData.children.push({ id: `Q${nq}_R${nr}_T`, type: 'Text', description: `Réponse ${nr}` });\n                if (responseAudio) {\n                    itemData.children.push({ id: `Q${nq}_R${nr}`, type: 'Sound', description: `Réponse ${nr}`,\n                        \"asset\": {\n                            \"src\": `sounds/quiz/Q${nq}_R${nr}.mp3`\n                        }\n                    });\n                }\n                ;\n            }\n            ;\n            //itemData.children.push({id: ``, type: 'Separator'});\n        }\n        ;\n        this.item = itemData;\n        this.view = this.item;\n    }\n    configure() {\n        this.jx.editor.popup({\n            title: \"Launch Script\",\n            content: \"<h1>Configuration</h1>\",\n            buttons: {\n                ok: { label: \"Lancer\" },\n                close: { label: \"Fermer\" }\n            },\n            onclose: evt => {\n                console.log(evt);\n                if (evt.action == \"ok\") {\n                    console.log('go');\n                }\n            }\n        });\n    }\n}\nexport default Quiz;\n"]}