{"version":3,"sources":["../../../../src/jx/editor/editionitems/DataModel.js"],"names":["ItemShorcutsNames","DataModel","dataObject","console","log","addEventDispatcher","prop","data","children","cl","jx","comp","type","gabaritTemplate","warn","_constructGabarit","value","setValue","array","i","length","cc","comps","_children","arg","getByPath","onchanged","dispatch","target","id","path","pathArr","split","shift","join"],"mappings":"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","file":"DataModel.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\nlet ItemShorcutsNames = {\n    \"Number\": \"NumberItem\",\n    \"class\": \"ClassFile\"\n};\nexport default class DataModel extends Component {\n    constructor(dataObject) {\n        super(dataObject);\n    }\n    _create() {\n        super._create();\n        console.log(\"_create\", this);\n        this.addEventDispatcher(\"onchanged\");\n        for (var prop in this.data) {\n            this[prop] = this.data[prop];\n        }\n        if (!this.children) {\n            var cl = this.jx.comp[\"editionitems.\" + (ItemShorcutsNames[this.type] || this.type)];\n            if (cl) {\n                //console.log( cl.gabaritTemplate , cl);\n                this.children = cl.gabaritTemplate;\n            }\n            else {\n                console.warn(this.type, this.jx.comp);\n            }\n        }\n        this._constructGabarit(this.children);\n        if (this.value) {\n            this.setValue(this.value);\n        }\n    }\n    _constructGabarit(array) {\n        console.log(\"_constructGabarit\", array, this);\n        if (array == null)\n            return;\n        for (var i = 0; i < array.length; i++) {\n            // if(array[i].type == \"Group\"){\n            // \tthis._constructGabarit(array[i].children);\n            // }\n            // else{\n            console.log(array[i].type);\n            this.cc({ type: \"editionitems.DataModel\", data: array[i] });\n            // }\n        }\n        ;\n        this.children = this.comps._children;\n    }\n    setValue(arg) {\n        this.value = arg;\n        if (this.children) {\n            for (var prop in this.value) {\n                if (this.comps.getByPath(prop)) {\n                    this.comps.getByPath(prop).setValue(this.value[prop]);\n                }\n                else {\n                    console.warn(prop, this);\n                }\n            }\n        }\n        this.onchanged.dispatch({ target: this });\n    }\n    changeValue(id, value) {\n        for (var i = 0; i < this.comps._children.length; i++) {\n            if (this.comps._children[i].id == id) {\n                this.comps._children[i].value = value;\n            }\n            ;\n        }\n        ;\n    }\n    /**\n     * Return component child with path, depends of its id.\n     * @example\n     * var comp = this.getChildByPath(\"child1ID.child2ID\");\n     * @param  {string} path\n     * @return {Component}\n     */\n    getByPath(path) {\n        console.log(path);\n        if (path == \"value\")\n            return this.value;\n        var pathArr = path.split(\".\");\n        for (var i = 0; i < this.comps._children.length; i++) {\n            if (this.comps._children[i].id == pathArr[0]) {\n                pathArr.shift();\n                if (pathArr.length == 0) {\n                    return this.comps._children[i];\n                }\n                else {\n                    return this.comps._children[i].getByPath(pathArr.join(\".\"));\n                }\n            }\n            ;\n        }\n        ;\n        return null;\n    }\n}\n"]}