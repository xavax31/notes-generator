{"version":3,"sources":["../../../../src/jx/editor/editionitems/QuizDataItem.js"],"names":["QuizDataItem","dataObject","data","exportType","_setQuizStylesOptions","_infos","title","theme","style","questionsNum","responsesNum","editionPage","controller","mainController","mainGabarit","project","info","gabarit","themesList","_findInGabarit","path","themes","themesListChildrenLength","children","length","themesListChildrenNChildrenLength","i","j","id","value","desc","push","defaultExtraDataQ","questionData","defaultExtraDataR","answerData","jx","editor","getOptionsList","quizDataThemesOptions","_themeOptions","hideBtnConfig","btnConfig","cc","type","confirmBeforeLaunch","onclick","configure","view","find","append","defaultOptions","standardAnswers","withTrueFalse","quizStylesOptions","stylesOptions","enabled","questionsOptions","responsesOptions","q1","q2","q9","q10","q11","extraDatas","shortcuts","milano_answersCategory","milano_answersIntroTarget","QManswersAxes","QMmagQ","pathArr","split","gabaritLength","shift","join","confirm","console","log","questionsArr","content","onclose","evt","action","questionsView","slice","removeChild","onchanged","dispatch","target","name","infosView","infosViewQuizID","infosViewName","infosViewThema","addChild","defaultConfigView","defaultThemeImage","infos","noQuestion","visible","question","addItem","parent","no","infoItem","JSON","parse","stringify","questionText","addText","questionImage","addImage","questionSound","addSound","responses","addDataGroup","sepLineStyle","response","addBoolean","responseText","responseImage","responseSound","showHeader","item","src","indexOf","typeItem","add","onChangeData","needReload","addInfos","findChildById","themeField","lastValue","changeTitle","nameField","themeValue","setTitle","changeTitleTab","gabaritView","refreshEditionView","showTab","mess","firstInit","popup","width","buttons","ok","label","_changeQuiz","$","on","modal","deleteQuiz","defaultStyle","_fillComboBox","formEl","options","selected","html","css","arrString","availableTypesList","optionsStyle","availableTypes","trim","forEach","index","array","filter","element","recreateQuiz","undefined","_createQuiz","clearAll","addQuestion","empty","opt","el","document","createElement","textContent","attr","deleteTab","lock"],"mappings":"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","file":"QuizDataItem.js","sourcesContent":["import DataGroup from \"jx/editor/editionitems/DataGroup\";\nexport default class QuizDataItem extends DataGroup {\n    constructor(dataObject) {\n        super(dataObject);\n        this.data.exportType = \"DataGroup\";\n        this._setQuizStylesOptions();\n        this._infos = {\n            title: this.data.title,\n            theme: null,\n            style: null,\n            questionsNum: null,\n            responsesNum: null\n        };\n        let editionPage = this.controller.mainController;\n        let mainGabarit = editionPage.project.info.gabarit;\n        let themesList = this._findInGabarit({ gabarit: mainGabarit, path: \"THEMES\" });\n        let themes = [];\n        if (themesList) {\n            let themesListChildrenLength = themesList.children.length;\n            let themesListChildrenNChildrenLength;\n            let theme, i, j;\n            for (i = 0; i < themesListChildrenLength; i++) {\n                theme = { id: themesList.children[i].id };\n                themesListChildrenNChildrenLength = themesList.children[i].children.length;\n                for (j = 0; j < themesListChildrenNChildrenLength; j++) {\n                    if (themesList.children[i].children[j].value) {\n                        theme[themesList.children[i].children[j].id] = themesList.children[i].children[j].value;\n                    }\n                }\n                theme.desc = theme.title;\n                themes.push(theme);\n            }\n            ;\n        }\n        else {\n            themes.push({\n                id: \"none\",\n                desc: \"aucun\"\n            });\n        }\n        this.defaultExtraDataQ = this.data.questionData || \"magQ\";\n        this.defaultExtraDataR = this.data.answerData || \"magR\";\n        this.jx.editor.getOptionsList().quizDataThemesOptions = themes;\n        this._themeOptions = themes;\n        if (!this.data.hideBtnConfig) {\n            this.btnConfig = this.cc({ type: \"editionitems.ButtonItem\", data: { id: \"btnConfig\", title: \"Configurer le quiz\", confirmBeforeLaunch: false, onclick: () => this.configure() } });\n            this.view.find(\"#sepID\").append(this.btnConfig.view);\n        }\n    }\n    _setQuizStylesOptions() {\n        let defaultOptions = {\n            standardAnswers: [\n                { id: 2 },\n                { id: 3 },\n                { id: 4 },\n                { id: 5 },\n                { id: 6 },\n                { id: 7 },\n                { id: 8 },\n            ],\n            withTrueFalse: [\n                { id: \"truefalse\", desc: \"2 choix: Vrai/Faux\" },\n                { id: 2 },\n                { id: 3 },\n                { id: 4 },\n                { id: 5 },\n                { id: 6 },\n                { id: 7 },\n                { id: 8 },\n            ]\n        };\n        this.quizStylesOptions = {\n            stylesOptions: [\n                { id: \"q1\", desc: \"question IMAGE + TEXTE, réponses TEXTE\" },\n                { id: \"q9\", desc: \"question TEXTE, réponses TEXTE\", enabled: true },\n                { id: \"q2\", desc: \"question TEXTE, réponses IMAGE\", enabled: true },\n                { id: \"q3\", desc: \"Memory - question TEXTE, réponses cartes IMAGE\", enabled: false },\n                { id: \"q4\", desc: \"Memory - question TEXTE, réponses cartes TEXTE\", enabled: false },\n                { id: \"q5\", desc: \"Tir - question TEXTE, réponses TEXTE\", enabled: false },\n                { id: \"q6\", desc: \"Tir - question TEXTE, réponses IMAGE\", enabled: false },\n                { id: \"q7\", desc: \"question AUDIO, réponses TEXTE\", enabled: false },\n                { id: \"q8\", desc: \"question IMAGE, réponses TEXTE\", enabled: false },\n                { id: \"q10\", desc: \"question TEXTE + SON, réponses TEXTE + SON\", enabled: true },\n                { id: \"q11\", desc: \"question TEXTE + SON, réponses IMAGE + SON\", enabled: true }\n            ],\n            questionsOptions: [\n                { id: 1 },\n                { id: 2 },\n                { id: 3 },\n                { id: 4 },\n                { id: 5 },\n                { id: 6 },\n                { id: 7 },\n                { id: 8 },\n                { id: 9 },\n                { id: 10 }\n            ],\n            responsesOptions: {\n                q1: defaultOptions.withTrueFalse,\n                q2: defaultOptions.standardAnswers,\n                q9: defaultOptions.standardAnswers,\n                q10: defaultOptions.standardAnswers,\n                q11: defaultOptions.standardAnswers\n            },\n            extraDatas: {\n                \"axe\": [{ \"id\": \"axe\", \"type\": \"ComboBox\", \"visible\": true, \"value\": \"A\", \"options\": \"QManswersAxes\" }],\n                \"milanoA\": [\n                    { \"id\": \"target\", \"type\": \"Number\", \"visible\": true, \"value\": 1, \"min\": 1, \"max\": 12, \"step\": 1 },\n                    { \"id\": \"category\", \"type\": \"ComboBox\", \"visible\": true, \"value\": \"all\", \"options\": \"milano_answersCategory\" }\n                ],\n                \"milanoAIntro\": [\n                    { \"id\": \"target\", \"type\": \"ComboBox\", \"visible\": true, \"value\": \"A\", \"options\": \"milano_answersIntroTarget\" }\n                ],\n                \"magQ\": [],\n                \"magR\": []\n            },\n            shortcuts: {}\n        };\n        this.jx.editor.getOptionsList().milano_answersCategory = [\n            \"all\", \"boy\", \"girl\"\n        ];\n        this.jx.editor.getOptionsList().milano_answersIntroTarget = [\n            \"A\", \"B\", \"C\", \"D\", \"E\"\n        ];\n        this.jx.editor.getOptionsList().QManswersAxes = [\n            \"A\", \"B\", \"Y\", \"Z\"\n        ];\n        this.jx.editor.getOptionsList().QMmagQ = [\n            \"A\", \"B\", \"C\", \"D\", \"E\"\n        ];\n    }\n    _findInGabarit({ gabarit, path }) {\n        if (!path)\n            return null;\n        var pathArr = path.split(\".\");\n        let gabaritLength = gabarit.length;\n        for (var i = 0; i < gabaritLength; i++) {\n            if (gabarit[i].id == pathArr[0]) {\n                if (pathArr.length === 1) {\n                    return gabarit[i];\n                }\n                else {\n                    pathArr.shift();\n                    return this._findInGabarit({ gabarit: gabarit[i].children, path: pathArr.join(\".\") });\n                }\n            }\n        }\n        ;\n    }\n    showInfo() { }\n    hideInfo() { }\n    clearAll({ confirm = true }) {\n        console.log(this.questionsArr);\n        if (confirm) {\n            this.jx.editor.confirm({ content: \"Supprimer toutes les questions ?\", onclose: evt => {\n                    if (evt.action == \"ok\") {\n                        let children = this.questionsView.children.slice();\n                        for (var i = 0; i < children.length; i++) {\n                            this.questionsView.removeChild(children[i]);\n                        }\n                        this.questionsView.data.children.length = 0;\n                        this.questionsView.onchanged.dispatch({ target: this.questionsView });\n                    }\n                } });\n        }\n        else {\n            let children = this.questionsView.children.slice();\n            for (var i = 0; i < children.length; i++) {\n                this.questionsView.removeChild(children[i]);\n            }\n            this.questionsView.data.children.length = 0;\n            this.questionsView.onchanged.dispatch({ target: this.questionsView });\n        }\n    }\n    get questionsNum() {\n        return this.questionsView.data.children.length;\n    }\n    addInfos() {\n        let data = [\n            {\n                \"id\": \"infos\",\n                \"type\": \"DataObject\",\n                \"description\": \"\",\n                \"visible\": true,\n                \"children\": [\n                    {\n                        \"id\": \"id\",\n                        \"title\": \"quizID\",\n                        \"type\": \"Text\",\n                        \"editable\": false,\n                        \"visible\": false,\n                        \"description\": \"\",\n                        \"value\": this.data.id\n                    },\n                    {\n                        \"id\": \"name\",\n                        \"title\": \"Nom\",\n                        \"type\": \"Text\",\n                        \"editable\": true,\n                        \"description\": \"\",\n                        \"value\": this.data.name\n                    },\n                    {\n                        \"id\": \"theme\",\n                        \"title\": \"Thème\",\n                        \"type\": \"ComboBox\",\n                        \"editable\": true,\n                        \"description\": \"\",\n                        \"value\": this.data.theme || this._themeOptions[0].id,\n                        \"options\": \"quizDataThemesOptions\"\n                    }\n                    // {\n                    //     \"id\": \"availableTypes\",\n                    //     \"type\": \"Text\",\n                    //     \"editable\": false,\n                    //     \"visible\": false,\n                    //     \"description\": \"\",\n                    //     \"value\": this.data.availableTypes\n                    // }\n                ]\n            },\n            {\n                \"id\": \"defaultConfig\",\n                \"type\": \"DataGroup\",\n                \"showHeader\": true,\n                \"title\": \"<span class='qz-questions'>Global</span>\",\n                \"sepLineStyle\": \"qz-sepLineQuestions\",\n                \"description\": \"\",\n                \"visible\": true,\n                \"children\": [\n                    {\n                        \"id\": \"defaultQuestionImage\",\n                        \"visible\": true,\n                        \"type\": \"Image\",\n                        \"asset\": {\n                            \"src\": this.id + \"/images/question-default.png\"\n                        }\n                    }\n                ]\n            },\n            {\n                \"id\": \"questions\",\n                \"type\": \"DataGroup\",\n                \"showHeader\": true,\n                \"title\": \"<span class='qz-questions'>Questions</span>\",\n                \"sepLineStyle\": \"qz-sepLineQuestions\",\n                \"description\": \"\",\n                \"visible\": true,\n                \"children\": []\n            }\n        ];\n        this.data.children = data;\n        this.infosView = this.cc({ type: \"editionitems.DataObject\", data: data[0] });\n        this.infosViewQuizID = this.infosView.cc({ type: \"editionitems.Text\", data: data[0].children[0] });\n        this.infosViewName = this.infosView.cc({ type: \"editionitems.Text\", data: data[0].children[1] });\n        this.infosViewThema = this.infosView.cc({ type: \"editionitems.ComboBox\", data: data[0].children[2] });\n        this.infosView.addChild(this.infosViewQuizID);\n        this.infosView.addChild(this.infosViewName);\n        this.infosView.addChild(this.infosViewThema);\n        this.defaultConfigView = this.cc({ type: \"editionitems.DataGroup\", data: data[1] });\n        this.defaultConfigView.defaultThemeImage = this.defaultConfigView.cc({ type: \"editionitems.ImageItem\", data: data[1].children[0], controller: this.controller });\n        this.defaultConfigView.addChild(this.defaultConfigView.defaultThemeImage);\n        // this.defaultConfigView.defaultThemeImage.visible = false;\n        this.questionsView = this.cc({ type: \"editionitems.DataGroup\", data: data[2] });\n        this.addChild(this.infosView);\n        this.addChild(this.defaultConfigView);\n        this.addChild(this.questionsView);\n        this.infosView.onchanged.dispatch({ target: this.infosView });\n        this.defaultConfigView.onchanged.dispatch({ target: this.defaultConfigView });\n        this.questionsView.onchanged.dispatch({ target: this.questionsView });\n        this.onchanged.dispatch({ target: this });\n    }\n    addQuestion(infos, style) {\n        console.log(this.data);\n        let noQuestion = this.questionsNum + 1;\n        let data = {\n            \"id\": \"Q\" + noQuestion,\n            \"title\": \"<span class='qz-question'>QUESTION \" + noQuestion + \" (Q\" + noQuestion + \")</span>\",\n            \"type\": \"DataGroup\",\n            \"description\": \"\",\n            \"visible\": true,\n            \"sepLineStyle\": \"qz-sepLineQuestion\",\n            \"children\": [\n                { \"id\": \"quizStyleID\", type: \"Text\", visible: false, value: style }\n            ]\n        };\n        //this.questionsView.data.children.push(data)\n        let question = this.addItem({ parent: this.questionsView, type: \"editionitems.DataGroup\", data });\n        // let question = this.questionsView.cc({type: \"editionitems.DataGroup\", data});\n        // question.onchanged.add(()=>{\n        //     this.questionsView.onchanged.dispatch({target: this.questionsView});\n        // });\n        question.no = noQuestion;\n        let infoItem = this.addItem({ parent: question,\n            data: { \"id\": \"data\", type: \"DataGroup\", visible: true, \"showHeader\": false, \"children\": [\n                // {\"id\": \"youpla\", type: \"Text\", visible: true, value: \"youps\"}\n                ] },\n            children: JSON.parse(JSON.stringify(this.quizStylesOptions.extraDatas[this.defaultExtraDataQ]))\n        });\n        //  let itemData = this.addItem({parent: infoItem, \n        //      data: {\"id\": \"axe\", type: \"Text\", visible: true, value: \"yoaxe\"}\n        //  });\n        // itemData = this.addItem({parent: infoItem, \n        //      data: {\"id\": \"mag\", type: \"Text\", visible: true, value: \"mago\"}\n        //  });\n        // this.questionsView.addChild(question);\n        if (infos.questionText)\n            this.addText(question);\n        if (infos.questionImage)\n            this.addImage(question, this.id + \"/images/Q\" + question.no + \".png\");\n        if (infos.questionSound)\n            this.addSound(question, this.id + \"/sounds/Q\" + question.no + \".mp3\");\n        let responses = this.addDataGroup({\n            parent: question,\n            id: \"responses\",\n            sepLineStyle: \"qz-sepLineResponse\",\n            title: \"<span class='qz-responses'>Réponses</span>\",\n            sepLineStyle: \"qz-sepLineResponses\"\n        });\n        if (infos.responsesNum == \"truefalse\") {\n            let response = this.addDataGroup({\n                parent: responses,\n                id: \"Q\" + question.no + \"_R1\",\n                title: \"<span class='qz-response'>Q\" + question.no + \"_R1</span>\",\n                sepLineStyle: \"qz-sepLineResponse\",\n                hideBtnConfig: true\n            });\n            response.no = 1;\n            let infoItem = this.addItem({ parent: response,\n                data: { \"id\": \"data\", type: \"DataGroup\", visible: true, \"showHeader\": false, \"children\": [] },\n                children: JSON.parse(JSON.stringify(this.quizStylesOptions.extraDatas[this.defaultExtraDataR]))\n            });\n            this.addBoolean(response);\n        }\n        else {\n            for (var i = 0; i < infos.responsesNum; i++) {\n                let response = this.addDataGroup({\n                    parent: responses,\n                    id: \"Q\" + question.no + \"_R\" + (i + 1),\n                    title: \"<span class='qz-response'>Q\" + question.no + \"_R\" + (i + 1) + \"</span>\",\n                    sepLineStyle: \"qz-sepLineResponse\",\n                    hideBtnConfig: true\n                });\n                response.no = i + 1;\n                let infoItem = this.addItem({ parent: response,\n                    data: { \"id\": \"data\", type: \"DataGroup\", visible: true, \"showHeader\": false, \"children\": [] },\n                    children: JSON.parse(JSON.stringify(this.quizStylesOptions.extraDatas[this.defaultExtraDataR]))\n                });\n                if (infos.responseText)\n                    this.addText(response);\n                if (infos.responseImage)\n                    this.addImage(response, this.id + \"/images/Q\" + question.no + \"_R\" + response.no + \".png\");\n                if (infos.responseSound)\n                    this.addSound(response, this.id + \"/sounds/Q\" + question.no + \"_R\" + response.no + \".mp3\");\n            }\n            ;\n        }\n        this.questionsView.onchanged.dispatch({ target: this.questionsView });\n    }\n    addDataObject(parent, id, showHeader = true) {\n        let data = {\n            \"id\": id,\n            \"type\": \"DataObject\",\n            \"showHeader\": showHeader,\n            \"description\": \"\",\n            \"visible\": true,\n            \"children\": []\n        };\n        parent.data.children.push(data);\n        let item = parent.cc({ type: \"editionitems.DataGroup\", data });\n        parent.view.append(item.view);\n        return item;\n    }\n    addDataGroup({ parent, id, title = \"\", sepLineStyle = \"groupSepLine\", showHeader = true, hideBtnConfig = false, children }) {\n        let data = {\n            \"id\": id,\n            \"title\": title,\n            \"type\": \"DataGroup\",\n            \"showHeader\": showHeader,\n            \"description\": \"\",\n            \"sepLineStyle\": sepLineStyle,\n            \"hideBtnConfig\": hideBtnConfig,\n            \"visible\": true,\n            \"children\": []\n        };\n        return this.addItem({ parent, data, children });\n        // if (extraData) {\n        //     data.children.push({\"id\": \"extraData\", type: \"Text\", visible: \"dev\", value: \"{}\"})\n        // }\n        // parent.data.children.push(data)\n        // let item = parent.cc({type: \"editionitems.DataGroup\", data});\n        // parent.view.append(item.view);\n        //return item;\n    }\n    addText(parent) {\n        let data = {\n            \"id\": \"text\",\n            \"type\": \"Text\",\n            \"editable\": true,\n            \"description\": \"\",\n            \"value\": \"\",\n            \"visible\": true\n        };\n        return this.addItem({ parent, data });\n        // let text = this.cc({type: \"editionitems.Text\", autoRefresh: true, data});\n        // text.onchanged.add(()=>{\n        //     this.onchanged.dispatch({target: this});\n        //     //this.onchanged.dispatch({target: this});\n        // })\n        // question.data.children.push(data);\n        // question.view.append(text.view);\n    }\n    addBoolean(parent) {\n        let data = {\n            \"id\": \"truefalse\",\n            \"title\": \"Vrai\",\n            \"type\": \"Boolean\",\n            \"editable\": true,\n            \"description\": \"\",\n            \"value\": false,\n            \"visible\": true\n        };\n        return this.addItem({ parent, data });\n        // let text = this.cc({type: \"editionitems.BooleanItem\", autoRefresh: true, data});\n        // text.onchanged.add(()=>{\n        //     this.onchanged.dispatch({target: this});\n        //     //this.onchanged.dispatch({target: this});\n        // })\n        // question.data.children.push(data);\n        // question.view.append(text.view);\n    }\n    addImage(parent, src) {\n        let data = {\n            \"id\": \"image\",\n            \"type\": \"Image\",\n            \"editable\": true,\n            \"description\": \"\",\n            \"asset\": {\n                \"preload\": false,\n                \"src\": src\n            },\n            \"visible\": true\n        };\n        return this.addItem({ parent, data, controller: this.controller });\n        // let text = this.cc({type: \"editionitems.ImageItem\", controller: this.controller, data});\n        // text.onchanged.add(()=>{\n        //     question.onchanged.dispatch({target: question});\n        //     //this.onchanged.dispatch({target: this});\n        // })\n        // question.data.children.push(data);\n        // question.view.append(text.view);\n    }\n    addSound(parent, src) {\n        let data = {\n            \"id\": \"sound\",\n            \"type\": \"Sound\",\n            \"editable\": true,\n            \"description\": \"\",\n            \"asset\": {\n                \"preload\": false,\n                \"src\": src\n            },\n            \"visible\": true\n        };\n        return this.addItem({ parent, data, controller: this.controller });\n        // let text = this.cc({type: \"editionitems.SoundItem\", controller: this.controller, data});\n        // text.onchanged.add(()=>{\n        //     question.onchanged.dispatch({target: question});\n        //    //this.onchanged.dispatch({target: this});\n        // })\n        // question.data.children.push(data);\n        // question.view.append(text.view);\n    }\n    addItem({ parent, type, data, children, controller }) {\n        if (parent.data.children.indexOf(data) === -1)\n            parent.data.children.push(data);\n        let typeItem = (data.type == \"Image\" || data.type == \"Sound\" || data.type == \"Number\" || data.type == \"Boolean\")\n            ? data.type + \"Item\"\n            : data.type;\n        let item = parent.cc({ type: \"editionitems.\" + typeItem, data: data, controller });\n        parent.addChild(item);\n        item.onchanged.add(evt => this.controller.onChangeData(evt));\n        if (data.children) {\n            for (var i = 0; i < data.children.length; i++) {\n                let typeItem = (data.children[i].type == \"Image\" || data.children[i].type == \"Sound\" || data.type == \"Number\" || data.type == \"Boolean\")\n                    ? data.children[i].type + \"Item\"\n                    : data.children[i].type;\n                this.addItem({ parent: item, type: \"editionitems.\" + typeItem, data: data.children[i] });\n            }\n            ;\n        }\n        ;\n        if (children) {\n            console.log(children);\n            for (var i = 0; i < children.length; i++) {\n                let typeItem = (children[i].type == \"Image\" || children[i].type == \"Sound\" || data.type == \"Number\" || data.type == \"Boolean\")\n                    ? children[i].type + \"Item\"\n                    : children[i].type;\n                this.addItem({ parent: item, type: \"editionitems.\" + typeItem, data: children[i] });\n            }\n            ;\n        }\n        ;\n        return item;\n    }\n    firstInit() {\n        let needReload = false;\n        if (this.children.length == 0) {\n            this.addInfos();\n            var name = this.data.title;\n            var theme = this.data.title;\n        }\n        else {\n            //-- get infos\n        }\n        this.questionsView = this.findChildById(\"questions\");\n        this.infosView = this.findChildById(\"infos\");\n        //--\n        this.themeField = this.infosView.findChildById(\"theme\");\n        this.themeField.lastValue = this.themeField.value;\n        this.themeField.onchanged.add(evt => {\n            if (this.themeField.value != this.themeField.lastValue) {\n                this.changeTitle();\n            }\n        });\n        if (!this.nameField) {\n            //--\n            this.nameField = this.infosView.findChildById(\"name\");\n            this.nameField.lastValue = this.nameField.value;\n            this.nameField.onchanged.add(evt => {\n                if (this.nameField.value != this.nameField.lastValue) {\n                    this.changeTitle();\n                }\n            });\n            this.nameField.value = name || this.nameField.value;\n            this.changeTitle();\n            // this.onchanged.dispatch({target: this});\n        }\n    }\n    changeTitle() {\n        let themeValue = this.themeField.value == \"none\" ? \"\" : this.themeField.value;\n        let title = \"Quiz \" + this.nameField.value + \" <br/><small>\" + themeValue + \"</small>\";\n        this.setTitle(title);\n        let editionPage = this.controller.mainController;\n        editionPage.changeTitleTab(this.id, title);\n    }\n    _reloadAndRefreshTab() {\n        let editionPage = this.controller.mainController;\n        let gabaritView = editionPage.gabaritView;\n        editionPage.refreshEditionView();\n        editionPage.showTab(this.id);\n    }\n    configure({ mess } = {}) {\n        this.firstInit();\n        let editionPage = this.controller.mainController;\n        let gabaritView = editionPage.gabaritView;\n        console.log(gabaritView.value);\n        let content = `\n        <form class=\"form-horizontal\">\n            <div id=\"mess\" class=\"alert alert-danger\" style=\"display:none\"></div>\n\n            <div class=\"form-group\">    \n            <label class=\"control-label col-sm-2\" for=\"deleteQuiz\"></label>\n            <div class=\"col-sm-10  text-right\">\n                <button id=\"deleteQuiz\" class=\"btn btn-danger\" type=\"button\">Supprimer ce quiz</button>\n            </div>\n           </div>\n             <div class=\"form-group\">    \n                <label class=\"control-label col-sm-2\" for=\"quizStyle\">Style</label>\n                <div class=\"col-sm-10\">\n                    <select class=\"form-control\" id=\"quizStyle\"/>\n                </div>\n            </div>\n            <div class=\"form-group\">    \n                <label class=\"control-label col-sm-2\" for=\"questionsNum\">Nombre de Questions</label>\n                <div class=\"col-sm-10\">\n                    <select class=\"form-control\" id=\"questionsNum\"/>\n                </div>\n            </div>\n           <div class=\"form-group\">    \n                <label class=\"control-label col-sm-2\" for=\"responsesNum\">Nombre de Réponses</label>\n                <div class=\"col-sm-10\">\n                    <select class=\"form-control\" id=\"responsesNum\"/>\n                </div>\n            </div>\n        </form>\n            `;\n        let popup = this.jx.editor.popup({ title: \"Configuration du quiz\", content, width: 600, buttons: { ok: { label: \"Remplacer le quiz\" }, append: { label: \"Ajouter au quiz\" } }, onclose: evt => {\n                console.log(evt.action);\n                if (evt.action != \"ok\" && evt.action != \"append\")\n                    return;\n                this._changeQuiz({\n                    // name: find(\"quizName\").value,\n                    // theme: find(\"quizThema\").value,\n                    append: evt.action == \"append\",\n                    style: find(\"quizStyle\").value,\n                    questionsNum: find(\"questionsNum\").value,\n                    responsesNum: find(\"responsesNum\").value\n                });\n            } });\n        let find = (id) => {\n            return $(popup).find(\"#\" + id)[0];\n        };\n        $(popup).find(\"#deleteQuiz\").on(\"click\", () => {\n            popup.modal('hide');\n            this.deleteQuiz();\n        });\n        let defaultStyle = this.quizStylesOptions.stylesOptions[0];\n        $(popup).find(\"#quizStyle\").on(\"change\", evt => {\n            console.log(evt.target.value);\n            // this[\"refreshQuizConfigPopup\"]({quizStyle: evt.target.value});\n            this._fillComboBox({ formEl: $(popup).find(\"#responsesNum\"), options: this.quizStylesOptions.responsesOptions[evt.target.value],\n                selected: this.quizStylesOptions.responsesOptions[evt.target.value][0]\n            });\n        });\n        // $(popup).find(\"#clearAll\").on(\"click\", ()=>{\n        //      popup.modal('hide');\n        //      this.clearAll({comfirm: true});\n        //  })\n        if (mess) {\n            $(popup).find(\"#mess\").html(mess);\n            $(popup).find(\"#mess\").css(\"display\", \"inline\");\n        }\n        ;\n        //-- get available types of quiz availables\n        let arrString, availableTypesList, optionsStyle;\n        if (this.data.availableTypes) {\n            arrString = this.quizStylesOptions[this.data.availableTypes.trim()] || this.data.availableTypes;\n        }\n        else {\n            arrString = \"*\";\n        }\n        if (arrString == \"*\") {\n            optionsStyle = this.quizStylesOptions.stylesOptions;\n        }\n        else {\n            availableTypesList = arrString.split(\",\");\n            availableTypesList.forEach((item, index, array) => array[index] = item.trim());\n            optionsStyle = this.quizStylesOptions.stylesOptions.filter(element => {\n                return availableTypesList.indexOf(element.id) !== -1;\n            });\n        }\n        //-- fill combobox\n        this._fillComboBox({\n            formEl: $(popup).find(\"#quizStyle\"),\n            options: optionsStyle,\n            selected: this._infos.style || defaultStyle.id\n        });\n        this._fillComboBox({ formEl: $(popup).find(\"#questionsNum\"), options: this.quizStylesOptions.questionsOptions,\n            selected: this.quizStylesOptions.questionsOptions\n        });\n        this._fillComboBox({ formEl: $(popup).find(\"#responsesNum\"), options: this._infos.style ? this.quizStylesOptions.responsesOptions[this._infos.style] : this.quizStylesOptions.responsesOptions[defaultStyle.id],\n            selected: this._infos.responsesNum || this.quizStylesOptions.responsesOptions[defaultStyle.id][0].id\n        });\n    }\n    _changeQuiz({ name, theme, style, questionsNum, responsesNum, append = false }) {\n        let recreateQuiz = false;\n        if (style != this._infos.style) {\n            this._infos.style = style;\n            recreateQuiz = true;\n        }\n        if (questionsNum != this._infos.questionsNum) {\n            this._infos.questionsNum = questionsNum;\n            recreateQuiz = true;\n        }\n        // if (theme != this._infos.theme) {\n        //      this._infos.theme = theme;\n        //  }\n        if (responsesNum != this._infos.responsesNum) {\n            this._infos.responsesNum = responsesNum;\n            recreateQuiz = true;\n        }\n        if (recreateQuiz) {\n            if (this._infos.questionsNum == undefined) {\n                this.configure({ mess: \"Indiquez le nombre de questions\" });\n            }\n            ;\n            this[\"quiz_\" + this._infos.style]();\n            if (this.questionsView.children.length === 0) {\n                this._createQuiz({ style, append });\n            }\n            else {\n                this.jx.editor.confirm({ title: \"Changement de la configuration du Quiz\", content: \"<small>Attention ! \\nCeci va supprimer les données existantes.\\n Voulez-vous continuer ?</small>\", onclose: evt => {\n                        if (evt.action == \"ok\") {\n                            this._createQuiz({ style, append });\n                        }\n                    } });\n            }\n        }\n        ;\n    }\n    _createQuiz({ style, append = false }) {\n        if (!append) {\n            this.clearAll({ confirm: false });\n        }\n        ;\n        for (var i = 0; i < this._infos.questionsNum; i++) {\n            this.addQuestion(this._infos, style);\n        }\n        this.questionsView.onchanged.dispatch({ target: this.questionsView });\n        this.onchanged.dispatch({ target: this });\n        // this.defaultConfigView.defaultQuestionImage.visible = style == \"q1\";\n        // this.defaultConfigView.onchanged.dispatch({target: this.defaultQuestionImage})\n        // this.defaultConfigView.defaultQuestionImage.onchanged.dispatch({target: this.defaultConfigView.defaultQuestionImage})\n    }\n    // question texte + image, reponses texte\n    quiz_q1() {\n        this._infos.questionText = true;\n        this._infos.questionImage = true;\n        this._infos.questionSound = false;\n        this._infos.responseText = true;\n        this._infos.responseImage = false;\n        this._infos.responseSound = false;\n    }\n    // question texte, reponses images\n    quiz_q2() {\n        this._infos.questionText = true;\n        this._infos.questionImage = false;\n        this._infos.questionSound = false;\n        this._infos.responseText = false;\n        this._infos.responseImage = true;\n        this._infos.responseSound = false;\n    }\n    // question texte, reponses images\n    quiz_q9() {\n        this._infos.questionText = true;\n        this._infos.questionImage = false;\n        this._infos.questionSound = false;\n        this._infos.responseText = true;\n        this._infos.responseImage = false;\n        this._infos.responseSound = false;\n    }\n    // question texte, reponses images\n    quiz_q10() {\n        this._infos.questionText = true;\n        this._infos.questionImage = false;\n        this._infos.questionSound = true;\n        this._infos.responseText = true;\n        this._infos.responseImage = false;\n        this._infos.responseSound = true;\n    }\n    quiz_q11() {\n        this._infos.questionText = true;\n        this._infos.questionImage = false;\n        this._infos.questionSound = true;\n        this._infos.responseText = false;\n        this._infos.responseImage = true;\n        this._infos.responseSound = true;\n    }\n    _fillComboBox({ formEl, options, selected }) {\n        formEl.empty();\n        for (var i = 0; i < options.length; i++) {\n            var opt = options[i];\n            var el = document.createElement(\"option\");\n            el.textContent = opt.desc || opt.id;\n            el.value = opt.id;\n            $(el).attr(\"selected\", selected ? (opt.id == selected) : (opt.id == options[0].value));\n            $(el).attr(\"disabled\", (opt.enabled == undefined ? false : !opt.enabled));\n            formEl.append(el);\n        }\n    }\n    deleteQuiz() {\n        this.jx.editor.confirm({ title: \"Suppression du Quiz\", content: \"<small>Attention ! \\nCeci va supprimer définitivement ce Quiz.\\n Voulez-vous continuer ?</small>\", onclose: evt => {\n                if (evt.action == \"ok\") {\n                    let editionPage = this.controller.mainController;\n                    editionPage.deleteTab(this.id);\n                }\n                ;\n            } });\n    }\n    set lock(value) {\n        // console.info(\"lock\",value, this.btnConfig.editable)\n        if (this.btnConfig)\n            this.btnConfig.lock = value;\n        // if(!value){\n        //     this.view.find(\"#value\").prop('disabled', !this.editable); \n        // }\n        // else {\n        //     this.view.find(\"#value\").prop('disabled', true)\n        // }\n    }\n}\n"]}