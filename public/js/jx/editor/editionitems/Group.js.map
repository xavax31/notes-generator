{"version":3,"sources":["../../../../src/jx/editor/editionitems/Group.js"],"names":["_template","sep","Group","dataObject","controller","id","data","view","$","html","descStr","description","trim","hideBtnConfig","jx","editor","userIsGroup","find","sepLineStyle","title","tabIndex","on","showInGabarit","RegExp","caseSensitive","wholeWord","regExp","screen","append","css","showScreen","showHeader","undefined","item","prop","children","child","push","itemParent","remove","index","indexOf","splice","i","length","value","panelInfo","showInfo","hideInfo","mainController"],"mappings":"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","file":"Group.js","sourcesContent":["import VisualComponent from \"jx/core/comps/VisualComponent\";\nlet _template = `\n<div class=\"tab-pane\" id=\"ID\">\n</div>\n`;\nlet sep = `\n<div>\n\t<span id=\"sepID\" class=\"text-left\"></span>\n\t<div id=\"children\"></div>\n</div>\n`;\nexport default class Group extends VisualComponent {\n    constructor(dataObject) {\n        super(dataObject);\n        this.controller = this.dataObject.controller;\n        this.id = this.data.id;\n        this.view = $(_template);\n        this.view.html($(sep));\n        // this.view.append(\"<button id='showConfig'>Config</button>\");\n        var descStr = ((this.data.description || \"\").trim() == \"\") ? \"\" : \"(\" + this.data.description + \")\";\n        if (!this.data.hideBtnConfig && this.jx.editor.userIsGroup(\"dev\")) {\n            this.view.find(\"#sepID\").html(\"<hr id='sepLine' class='\" + (this.data.sepLineStyle || \"groupSepLine\") + \"'><h4><span id='titleG'>\" + (this.data.title || this.data.id) + \"</span> <small>\" + descStr + \"</small></h4><span><button id='showConfig'><span class='fa fa-sitemap'></span></button></span>\");\n            this.view.find(\"#showConfig\")[0].tabIndex = -1;\n            this.view.find(\"#showConfig\").on(\"click\", evt => {\n                this.controller.showInGabarit(new RegExp('\"id\":\\\\s*\"' + this.id + '\"'), { caseSensitive: true, wholeWord: false, regExp: true });\n            });\n        }\n        else {\n            this.view.find(\"#sepID\").html(\"<hr id='sepLine' class='\" + (this.data.sepLineStyle || \"groupSepLine\") + \"'><h4><span id='titleG'>\" + (this.data.title || this.data.id) + \"</span> <small>\" + descStr + \"</small></h4>\");\n            //this.setTitle(this.data.title || this.data.id);\n        }\n        if (this.data.screen) {\n            this.view.append(\"<span><button id='screenPreview'><span class='fa fa-eye'></span></button></span>\");\n            this.view.find(\"#screenPreview\").css(\"display\", \"none\");\n            this.view.find(\"#screenPreview\").on(\"click\", evt => {\n                this.controller.showScreen(this.data.screen);\n            });\n        }\n        if (this.data.showHeader != undefined && !this.data.showHeader) {\n            this.view.find(\"#sepID\").css(\"display\", \"none\");\n        }\n        ;\n        //this.view.find(\"#sepID\").on(\"click\", evt=>this.view.find(\"#children:first\").toggle({duration: 100}))\n        this.item = this.view;\n        this.view.prop(\"id\", this.data.id);\n        this.children = [];\n    }\n    addChild(child) {\n        this.view.find(\"#children:first\").append(child.view);\n        this.children.push(child);\n        child.itemParent = this;\n    }\n    removeChild(child) {\n        child.view.remove();\n        child.itemParent = null;\n        let index = this.children.indexOf(child);\n        if (index != -1) {\n            this.children.splice(index, 1);\n        }\n    }\n    findChildById(id) {\n        for (var i = 0; i < this.children.length; i++) {\n            if (this.children[i].id == id)\n                return this.children[i];\n        }\n        return null;\n    }\n    setTitle(value) {\n        this.data.title = value;\n        this.view.find(\"#titleG:first\").html(this.data.title);\n    }\n    get mainController() {\n        return this.controller.mainController;\n    }\n    /** show/hide info panel of item */\n    showInfo() {\n        this.view.find(\"#informationsPanel\").css(\"display\", \"inline\");\n    }\n    /** show/hide info panel of item */\n    hideInfo() {\n        this.view.find(\"#informationsPanel\").css(\"display\", \"none\");\n    }\n    /** show/hide info panel of item */\n    toggleInfo() {\n        var panelInfo = this.view.find(\"#informationsPanel\");\n        if (panelInfo.css(\"display\") == \"none\") {\n            this.showInfo();\n        }\n        else {\n            this.hideInfo();\n        }\n    }\n}\n"]}