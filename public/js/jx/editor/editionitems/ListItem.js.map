{"version":3,"sources":["../../../../src/jx/editor/editionitems/ListItem.js"],"names":["ListItem","dataObject","content","$","view","find","html","data","fontsList","optionsList","jx","editor","getOptionsList","id","options","value","undefined","values","split","prop","i","length","opt","el","document","createElement","textContent","attr","indexOf","desc","append","on","event","css","editable","_clickedValue","target","preventDefault","_refreshOptions","onchanged","dispatch","currentTarget","substr","valueClicked","push","splice","join","elmt","Array","selected"],"mappings":"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","file":"ListItem.js","sourcesContent":["import BasicItem from \"jx/editor/editionitems/BasicItem\";\nexport default class ListItem extends BasicItem {\n    constructor(dataObject) {\n        super(dataObject);\n        this.content = $(`<div  class=\"form-control\" id=\"shortList\" style=\"maxHeight:200px;overflow:auto;background-color: #efefef;\"/><select class=\"form-control inline\" id=\"value\">`);\n        this.view.find(\"#content\").html(this.content);\n        //-- if data.fontsList or data.optionsList=true, we add it as options to editor.optionsList to be used as \n        // options list by others combobox or listitem.\n        if ((this.data.fontsList || this.data.optionsList) && !this.jx.editor.getOptionsList(this.id)) {\n            this.jx.editor.getOptionsList()[this.id] = this.data.options;\n        }\n        ;\n        //-- if options is string, it's considere as id, get options from editor.optionsList[options]\n        if (typeof this.data.options == \"string\") {\n            var options = this.jx.editor.getOptionsList(this.data.options);\n        }\n        else {\n            var options = this.data.options;\n        }\n        this.options = options;\n        if (this.data.value == undefined || this.data.value == \"\") {\n            var values = [options[0]];\n        }\n        else {\n            var values = this.data.value.split(\",\");\n        }\n        this.view.find(\"#value\").prop('multiple', true);\n        for (var i = 0; i < options.length; i++) {\n            var opt = options[i];\n            var el = document.createElement(\"option\");\n            if (typeof opt == \"string\") {\n                el.textContent = opt;\n                el.value = opt;\n                $(el).attr(\"selected\", (values.indexOf(opt.split(\":\")[0]) != -1));\n            }\n            else {\n                el.textContent = opt.desc || opt.id;\n                el.value = opt.id;\n                $(el).attr(\"selected\", (values.indexOf(opt.id.split(\":\")[0]) != -1));\n            }\n            this.view.find(\"#value\").append(el);\n        }\n        this.view.find(\"#shortList\").on(\"mousedown\", (event) => {\n            if (this.view.find(\"#value\").css(\"display\") == \"none\") {\n                this.view.find(\"#value\").css(\"display\", \"inline\");\n            }\n            else {\n                this.view.find(\"#value\").css(\"display\", \"none\");\n            }\n        });\n        this.view.find(\"#value\").prop('disabled', !this.editable);\n        this.view.find(\"#value\").on(\"mousedown\", (event) => {\n            this._clickedValue = event.target.value.split(\":\")[0];\n            event.preventDefault();\n        });\n        this.view.find(\"#value\").on(\"change\", (event) => {\n        });\n        this.view.find(\"#value\").on(\"click\", (event) => {\n            this._refreshOptions(this._clickedValue);\n            this.onchanged.dispatch({ currentTarget: this, target: this });\n        });\n        this.view.find(\"#value\").prop('size', options.length);\n        this.view.find(\"#value\").css(\"display\", \"none\");\n        this.view.find(\"#shortList\").html(this.value.substr(0, 30) + \" ...\");\n    }\n    _refreshOptions(valueClicked) {\n        if (this.data.value == undefined || this.data.value == \"\") {\n            var values = [this.options[0]];\n        }\n        else {\n            var values = this.data.value.split(\",\");\n        }\n        if (valueClicked == this.options[0]) {\n            values = [this.options[0]];\n        }\n        else {\n            if (values.indexOf(valueClicked) == -1) {\n                values.push(valueClicked);\n            }\n            else {\n                values.splice(values.indexOf(valueClicked), 1);\n            }\n            if (values.length == 0) {\n                values.push(this.options[0]);\n            }\n            else if (values.length > 1 && values.indexOf(this.options[0]) != -1) {\n                values.splice(values.indexOf(this.options[0]), 1);\n            }\n        }\n        this.data.value = values.join(\",\");\n        var elmt = this.view.find(\"#value\")[0];\n        for (var i = 0; i < elmt.options.length; i++) {\n            $(elmt.options[i]).prop(\"selected\", (values.indexOf(elmt.options[i].value.split(\":\")[0]) != -1));\n        }\n        this.view.find(\"#shortList\").html(this.value.substr(0, 30) + \" ...\");\n    }\n    get value() {\n        var values = new Array();\n        var elmt = this.view.find(\"#value\")[0];\n        for (var i = 0; i < elmt.options.length; i++) {\n            if (elmt.options[i].selected == true) {\n                values[values.length] = elmt.options[i].value;\n            }\n        }\n        return values.join(\",\");\n    }\n    set lock(value) {\n        if (!value) {\n            this.view.find(\"#value\").prop('disabled', !this.editable);\n        }\n        else {\n            this.view.find(\"#value\").prop('disabled', true);\n        }\n    }\n}\n"]}