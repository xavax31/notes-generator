{"version":3,"sources":["../../../../src/jx/editor/editionitems/ComboBox copy.js"],"names":["ComboBox","dataObject","content","$","view","find","html","data","options","jx","editor","getOptionsList","value","undefined","id","i","length","opt","el","document","createElement","textContent","attr","split","desc","append","indexOf","css","prop","editable","on","event","currentTarget","onchanged","dispatch","target","defaulValue","console","log","empty"],"mappings":"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","file":"ComboBox copy.js","sourcesContent":["import BasicItem from \"jx/editor/editionitems/BasicItem\";\nexport default class ComboBox extends BasicItem {\n    constructor(dataObject) {\n        super(dataObject);\n        //console.log(dataObject, this.dataObject)\n        this.content = $(`<select class=\"form-control\" id=\"value\">`);\n        this.view.find(\"#content\").html(this.content);\n        if (typeof this.data.options == \"string\") {\n            var options = this.jx.editor.getOptionsList(this.data.options);\n        }\n        else {\n            var options = this.data.options;\n        }\n        if (this.data.value == undefined || this.data.value == \"\") {\n            var value = (typeof options[0] == \"string\") ? options[0] : options[0].id;\n        }\n        else {\n            var value = this.data.value;\n        }\n        for (var i = 0; i < options.length; i++) {\n            var opt = options[i];\n            var el = document.createElement(\"option\");\n            if (typeof opt == \"string\") {\n                el.textContent = opt;\n                el.value = opt;\n                $(el).attr(\"selected\", (opt.split(\":\")[0] == value.split(\":\")[0]));\n            }\n            else {\n                el.textContent = opt.desc || opt.id;\n                el.value = opt.id;\n                $(el).attr(\"selected\", opt.id == value.split(\":\")[0]);\n            }\n            this.view.find(\"#value\").append(el);\n        }\n        if (options.indexOf(value) == -1) {\n            this.view.find(\"#informationsText\").html(`\n/!\\\\ La valeur ${value} définie pour ce champ n'est pas ou plus disponible dans les choix possibles. \n<br/>\nLes raisons peuvent être:\n<br/>\n- une mauvaise configuration de la liste. Voir le développeur pour corriger.\n<br/>\n- La valeur a été supprimée volontairement de la liste. Par exemple, une typo qui a été supprimée de la liste globale des fontes. Voir le responsable de ces listes pour plus d'infos.\n<br/>\n<br/>\nBien que cette valeur n'apparaisse pas dans ce champ, étant remplacée par le choix suivant dans la liste, c'est bien cette valeur manquante qui est utlisée dans le jeu, pouvant donc entrainer un comportement imprévu, voir un plantage.\n<br/>\n`);\n            // setTimeout(()=>this.showInfo(), 3000);\n            this.view.find(\"#info\").html('<i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>');\n            this.view.find(\"#info\").css({ \"color\": \"white\", \"backgroundColor\": \"orange\" });\n        }\n        this.view.find(\"#value\").prop('disabled', !this.editable);\n        this.view.on(\"change\", (event) => {\n            this.data.value = $(event.currentTarget).data(\"controller\").value.split(\":\")[0];\n            this.onchanged.dispatch({ currentTarget: this, target: this });\n        });\n    }\n    _refreshData() {\n        this.data.value = this.value;\n    }\n    _refreshView() {\n        this.data.value = this.value;\n    }\n    get value() {\n        return this.view.find(\"#value\")[0].value;\n    }\n    setOptions(options, defaulValue) {\n        console.log(options);\n        this.view.find(\"#value\").empty();\n        if (typeof options == \"string\") {\n            options = this.jx.editor.getOptionsList(options);\n        }\n        if (defaulValue == undefined || defaulValue == \"\") {\n            var value = (typeof options[0] == \"string\") ? options[0] : options[0].id;\n        }\n        else {\n            var value = defaulValue;\n        }\n        console.log(value);\n        for (var i = 0; i < options.length; i++) {\n            var opt = options[i];\n            var el = document.createElement(\"option\");\n            if (typeof opt == \"string\") {\n                el.textContent = opt;\n                el.value = opt;\n                $(el).attr(\"selected\", (opt.split(\":\")[0] == value.split(\":\")[0]));\n            }\n            else {\n                el.textContent = opt.desc || opt.id;\n                el.value = opt.id;\n                $(el).attr(\"selected\", opt.id == value.split(\":\")[0]);\n            }\n            this.view.find(\"#value\").append(el);\n        }\n        this.data.value = value;\n    }\n    set lock(value) {\n        if (!value) {\n            this.view.find(\"#value\").prop('disabled', !this.editable);\n        }\n        else {\n            this.view.find(\"#value\").prop('disabled', true);\n        }\n    }\n}\n"]}