{"version":3,"sources":["../../../../src/jx/editor/editorcode/EditorCode.js"],"names":["EditorCode","dataObject","mainView","editView","find","on","console","log","evt","target","value","search","gabaritEditor","gotoLine","Number","replace","backwards","wrap","caseSensitive","wholeWord","regExp","findNext","findPrevious","addItemFunc","type","$","data","itemsSnippets","Group","Separator","Text","Boolean","Point","Rectangle","Sound","Image","ScreenFla","Class","insert","css","ace","edit","setOptions","$blockScrolling","Infinity","setTheme","getSession","setMode","_gabaritEditorErrors","getAnnotations","jsonResource","project","getJSON","setValue","JSON","stringify","gabaritEditorLastPosition","row","column","moveCursorToPosition"],"mappings":"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","file":"EditorCode.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\nexport default class EditorCode extends Component {\n    constructor(dataObject) {\n        super(dataObject);\n        this.mainView = this.mainView;\n        this.editView = this.editView.find(\"#gabaritEditor\");\n    }\n    /** */\n    _create() {\n        super._create();\n        this.mainView.find(\"#search\").on(\"input\", evt => {\n            console.log(evt);\n            /*\n            The following options are available to you for your search parameters:\n            - needle: The string or regular expression you're looking for\n            - backwards: Whether to search backwards from where cursor currently is. Defaults to false.\n            - wrap: Whether to wrap the search back to the beginning when it hits the end. Defaults to false.\n            - caseSensitive: Whether the search ought to be case-sensitive. Defaults to false.\n            - wholeWord: Whether the search matches only on whole words. Defaults to false.\n            - range: The Range to search within. Set this to null for the whole document\n            - regExp: Whether the search is a regular expression or not. Defaults to false.\n            - start: The starting Range or cursor position to begin the search\n            - skipCurrent: Whether or not to include the current line in the search. Default to false.\n            */\n            if (evt.target.value.search(/^\\$[0-9]+$/) != -1) {\n                this.gabaritEditor.gotoLine(Number(evt.target.value.replace(/^\\$/, \"\")));\n            }\n            else {\n                this.gabaritEditor.find(evt.target.value, {\n                    backwards: false,\n                    wrap: true,\n                    caseSensitive: false,\n                    wholeWord: false,\n                    regExp: false\n                });\n            }\n        });\n        this.mainView.find(\"#searchNext\").on(\"click\", evt => {\n            console.log(evt);\n            this.gabaritEditor.findNext();\n        });\n        this.mainView.find(\"#searchPrevious\").on(\"click\", evt => {\n            console.log(evt);\n            this.gabaritEditor.findPrevious();\n        });\n        var addItemFunc = evt => {\n            var type = $(evt.target).data(\"action\").type;\n            console.log(\"action\", type);\n            var itemsSnippets = {\n                Group: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Group\",\n\t\t\t\t\t    \"children\": [\n\t\t\t\t\t    ]\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Separator: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Separator\",\n\t\t\t\t\t    \"description\": \"\"\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Text: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Text\",\n\t\t\t\t\t    \"description\": \"\",\n\t\t\t\t\t    \"editable\": true,\n\t\t\t\t\t    \"value\": \"\"\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Boolean: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Boolean\",\n\t\t\t\t\t    \"description\": \"\",\n\t\t\t\t\t    \"editable\": true,\n\t\t\t\t\t    \"value\": false\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Number: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Number\",\n\t\t\t\t\t    \"description\": \"\",\n\t\t\t\t\t    \"editable\": true,\n\t\t\t\t\t    \"value\": \"\"\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Point: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Rectangle\",\n\t\t\t\t\t    \"description\": \"\",\n\t\t\t\t\t    \"editable\": true,\n\t\t\t\t\t    \"value\": {\n\t\t\t\t\t        \"x\": 0,\n\t\t\t\t\t        \"y\": 0\n\t\t\t\t\t    }\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Rectangle: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Rectangle\",\n\t\t\t\t\t    \"description\": \"\",\n\t\t\t\t\t    \"editable\": true,\n\t\t\t\t\t    \"value\": {\n\t\t\t\t\t        \"x\": 0,\n\t\t\t\t\t        \"y\": 0,\n\t\t\t\t\t        \"width\": 100,\n\t\t\t\t\t        \"height\": 100\n\t\t\t\t\t    }\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Sound: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Sound\",\n\t\t\t\t\t    \"description\": \"\",\n\t\t\t\t\t    \"asset\": {\n\t\t\t\t\t        \"src\": \"sounds/fr/SOUND.mp3\"\n\t\t\t\t\t    }\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Image: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"Image\",\n\t\t\t\t\t    \"description\": \"\",\n\t\t\t\t\t    \"asset\": {\n\t\t\t\t\t        \"src\": \"images/IMAGE.png\"\n\t\t\t\t\t    }\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                ScreenFla: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"NAME_SCREEN_GROUP\",\n\t\t\t\t\t    \"type\": \"Group\",\n\t\t\t\t\t    \"children\": [\n\t\t\t\t\t    {\n\t\t\t\t\t        \"id\": \"PACKID_CONFIG\",\n\t\t\t\t\t        \"type\": \"FlashtmlPack\",\n\t\t\t\t\t        \"description\": \"\",\n\t\t\t\t\t        \"editable\": true,\n\t\t\t\t\t        \"value\": {\n\t\t\t\t\t            \"resourceID\": \"ID\",\n\t\t\t\t\t            \"framerate\": 12,\n\t\t\t\t\t            \"optimised\": false\n\t\t\t\t\t        },\n\t\t\t\t\t        \"preview\": true\n\t\t\t\t\t    },\n\t\t\t\t\t    {\n\t\t\t\t\t        \"id\": \"PACKID\",\n\t\t\t\t\t        \"type\": \"Flashtml\",\n\t\t\t\t\t        \"description\": \"\",\n\t\t\t\t\t        \"asset\": {\n\t\t\t\t\t            \"src\": \"flashtml/PACKID\",\n\t\t\t\t\t            \"type\": \"Flashtml\",\n\t\t\t\t\t            \"compType\": \"Flashtml\"\n\t\t\t\t\t        },\n\t\t\t\t\t        \"editable\": true,\n\t\t\t\t\t        \"visible\": true\n\t\t\t\t\t    }\n\t\t\t\t\t    ]\n\t\t\t\t\t},\n\t\t\t\t\t`,\n                Class: `\n\t\t\t\t\t{\n\t\t\t\t\t    \"id\": \"ID\",\n\t\t\t\t\t    \"type\": \"class\",\n\t\t\t\t\t    \"src\": \"src/game/CLASSNAME_NO_EXTENSION\"\n\t\t\t\t\t},\n\t\t\t\t`,\n            };\n            this.gabaritEditor.insert(itemsSnippets[type]);\n        };\n        this.mainView.find(\"#addGroup\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addSeparator\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addImage\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addSound\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addText\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addScreenFla\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addClass\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addNumber\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addBoolean\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addPoint\").on(\"click\", evt => addItemFunc(evt));\n        this.mainView.find(\"#addRectangle\").on(\"click\", evt => addItemFunc(evt));\n        // this.editView.find(\"#gabaritEditor\").css('margin', \"0px\");\n        this.editView.css('position', \"absolute\");\n        // this.editView.find(\"#gabaritEditor\").css('top', \"30px\");\n        // this.editView.find(\"#gabaritEditor\").css('bottom', \"0px\");\n        // this.editView.find(\"#gabaritEditor\").css('left', \"0px\");\n        // this.editView.find(\"#gabaritEditor\").css('right', \"0px\");\n        // this.editView.find(\"#gabaritEditor\").css('height', \"200px\");\n        // this.editView.find(\"#gabaritEditor\").css('width', \"90%\");\n        this.gabaritEditor = ace.edit(this.editView[0]);\n        this.gabaritEditor.setOptions({\n            wrap: true,\n            //maxLines: Infinity\n        });\n        this.gabaritEditor.$blockScrolling = Infinity; // because ace console warning: Automatically scrolling cursor into view after selection change this will be disabled in the next version set editor.$blockScrolling = Infinity to disable this message\n        //this.gabaritEditor.setFontSize(10);\n        this.gabaritEditor.setTheme(\"ace/theme/eclipse\");\n        this.gabaritEditor.getSession().setMode(\"ace/mode/json\");\n        this.gabaritEditor.getSession().on(\"changeAnnotation\", () => {\n            this._gabaritEditorErrors = this.gabaritEditor.getSession().getAnnotations();\n        });\n        //this.gabaritEditor.$blockScrolling = Infinity;\n        var jsonResource = this.project.getJSON();\n        this.gabaritEditor.setValue(JSON.stringify(jsonResource, null, 4));\n        this.gabaritEditorLastPosition = this.gabaritEditorLastPosition || { row: 0, column: 1 };\n        this.gabaritEditor.moveCursorToPosition(this.gabaritEditorLastPosition);\n        // this.editView.find(\"#saveGabarit\").click(()=>{\n        // \tthis.saveGabaritIntern(()=>this.reload());\n        // })\n    }\n}\n"]}