{"version":3,"sources":["../../../../src/jx/editor/pages/Home.js"],"names":["FiltersData","status","sortBy","publication","engine","typeProject","search","user","domain","Home","dataObject","filters","editor","jx","view","$","css","memo","cookie","getVar","menu","config","app","pageBackgroundColor","name","group","content","allowedPublications","getOptionsList","publicationCB","cc","type","controller","data","title","options","value","onChanged","evt","target","refreshList","find","append","engineCB","execute","statusCB","step","searchBox","onchanged","optSortBy","console","log","userFilter","filterBox","buttons","i","length","attr","undefined","args","split","userIsGroup","click","event","showAdminPanel","openTab","currentTarget","viewList","render","listContainer","html","top","position","outerHeight","height","window","on","wait","_ready","onInitialised","idTab","activeTab","dataAction","datObj","JSON","parse","_refreshButtons","removeClass","addClass","action","Object","assign","_refreshFilterBox","callback","loadingScreen","show","visible","setVar","list","getData","_refreshViewList","hide","removeAllChildren","addChild","text","id","showID","showStatus","showPreviewBtn","onclickAction","url","infos","datePublication","projectInfo","project","previewIndex","description","scrollTop"],"mappings":"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","file":"Home.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\nclass FiltersData {\n    constructor() {\n        this.status = \"all\";\n        this.sortBy = \"id\";\n        this.publication = \"all\";\n        this.engine = \"all\";\n        this.typeProject = \"Project\";\n        this.search = \"\";\n        this.user = \"all\";\n        this.domain = null;\n    }\n}\nexport default class Home extends Component {\n    constructor(dataObject) {\n        super(dataObject);\n        this.filters = new FiltersData();\n        this.editor = this.jx.editor;\n        this.view = $(\"body\");\n        this.view.css(\"overflow\", \"hidden\");\n        this.filters = this.jx.memo.cookie.getVar(\"homeFilters\", this.filters);\n        this.menu = $(` \n\t\t<div id=\"menu\" style=\"position:fixed; width:100%; z-index:1001; background-color:${this.jx.config.app.pageBackgroundColor};border-bottom: 1px solid rgb(233, 233, 233)\">\n\t\t\t<div class=\"row\" style=\"vertical-align: bottom\">\n\t\t\t\t<div class=\"col-xs-10\">\n\t\t\t\t\t<button id=\"BTN_Projects\" class=\"btn btn-default\" title=\"Projets\" data-action='{\"action\": \"list\", \"filters\":{\"typeProject\":\"Project\"}}'>PROJETS</button>\n\n\t\t\t\t\t<button id=\"BTN_Engines\" class=\"btn btn-default\" title=\"Moteurs\" data-action='{\"action\": \"list\", \"filters\":{\"typeProject\":\"AppEngine\"}}'>MOTEURS</button>\n\n\t\t\t\t\t<button id=\"BTN_Models\" class=\"btn btn-default\" title=\"Modèles\" data-action='{\"action\": \"list\", \"filters\":{\"typeProject\":\"Model\"}}'>MODELES</button>\n\n\t\t\t\t\t<button id=\"BTN_Archives\" class=\"btn btn-default\" title=\"Archives\" data-action='{\"action\": \"list\", \"filters\":{\"typeProject\":\"Archive\"}}'>ARCHIVES</button>\n\n\t\t\t\t\t<button id=\"BTN_Components\" class=\"btn btn-default\" title=\"Composants\" data-action='{\"action\": \"list\", \"filters\":{\"typeProject\":\"Component\"}}'>COMPOSANTS</button>\n\n\t\t\t\t\t<button id=\"BTN_Doc\" class=\"btn btn-default\" title=\"Doc\" data-action='{\"action\": \"list\", \"type\": \"Doc\", \"filters\":{\"typeProject\":\"Doc\"}}'>DOC</button>\n\n\t\t\t\t\t<button id=\"BTN_TESTS\" class=\"btn btn-default\" title=\"tests\"  data-access='admin,dev' data-action='{\"action\": \"list\", \"type\": \"Project\", \"domain\":\"/projects/tests\", \"filters\":{\"typeProject\":\"Project\", \"domain\":\"/projects/tests\"}}'>TESTS</button>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"col-xs-1\">\n\t\t\t\t\t<button id=\"BTN_Admin\" class=\"btn btn-default btn-xs pull-right\" style=\"border-radius:50px;margin:2px\" title=\"Admin\" data-access='admin,dev, manager' data-action='{\"action\": \"showAdminPanel\"}'><i class=\"fa fa-cog fa-2x\" aria-hidden=\"true\"></i></button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-xs-1\">\n\t\t\t\t\t<span class=\"fa fa-user\">${this.editor.user.name}</span>\n\t\t\t\t\t<div>(${this.editor.user.group})</div>\t\t\n\t\t\t\t</div>\n\t\t\t</div> \n\n\t\t\t<div class=\"row\" style=\"vertical-align: bottom\">\n\t\t\t\t<div class=\"col-xs-2  text-left\" style=\"width:160px\" id=\"choiceBar\"/>\n\t\t\t\t<div class=\"col-xs-2  text-left\"  style=\"width:160px\" id=\"choiceBar1\"/>\n\t\t\t\t<div class=\"col-xs-2  text-left\"  style=\"width:160px\" id=\"choiceBar3\"/>\n\t\t\t\t<div class=\"col-xs-2  text-left\"  style=\"width:160px\" id=\"choiceBar4\"/>\n\t\t\t\t<div class=\"col-xs-4\"/>\n\t\t\t</div>\n\t\t</div>\n\t\t`);\n        this.content = $(`\n\t\t<div class=\"fluid-container\">\n \t\t\t<div class=\"row\">\n\t\t\t    <div class=\"col-xs-12\" id=\"listContainer\">\n\t\t\t    </div>\n\t\t\t</div> \n\t\t</div>  \n\t\t`);\n        let allowedPublications = this.editor.getOptionsList(\"publication\");\n        if (this.filters.publication == \"all\")\n            this.filters.publication = allowedPublications[0];\n        var publicationCB = this.cc({ type: \"editionitems.SimpleComboBox\", controller: this, data: { title: \"Publication\", options: allowedPublications, value: this.filters.publication, onChanged: evt => {\n                    this.filters.publication = evt.target.value;\n                    this.refreshList();\n                } } });\n        this.menu.find(\"#choiceBar\").append(publicationCB.view);\n        var engineCB = this.cc({ type: \"editionitems.SimpleComboBox\", controller: this, data: { title: \"Moteur\", options: \"engine\", value: this.filters.engine, onChanged: evt => {\n                    this.filters.engine = evt.target.value;\n                    this.execute({ \"action\": \"list\", \"type\": \"Project\", \"domain\": \"/projects/milan-presse\" });\n                } } });\n        //this.content.find(\"#choiceBar\").append(engineCB.view);\n        var statusCB = this.cc({ type: \"editionitems.SimpleComboBox\", controller: this, data: { title: \"Status\", options: \"statusFilter\", value: this.filters.step, onChanged: evt => {\n                    this.filters.status = evt.target.value;\n                    this.refreshList();\n                } } });\n        this.menu.find(\"#choiceBar1\").append(statusCB.view);\n        var searchBox = this.cc({ type: \"editionitems.SearchBox\", controller: this, data: { value: this.filters.search, onchanged: evt => {\n                    this.filters.search = evt.target.value;\n                    this.refreshList();\n                } } });\n        this.menu.find(\"#choiceBar\").append(searchBox.view);\n        searchBox.view.css(\"width\", \"200px\");\n        searchBox.view.css(\"padding-left\", \"0px\");\n        searchBox.view.css(\"margin-bottom\", \"5px\");\n        var optSortBy = this.cc({ type: \"editionitems.SimpleComboBox\", controller: this, data: { title: \"Sort by\", options: [\n                    \"Name\", \"Status\", \"Date publication ASC\", \"Date publication DESC\",\n                    \"Date modification\", \"Date creation\", \"Date access\"\n                ],\n                value: this.filters.sortBy, onChanged: evt => {\n                    console.log(evt.target.value);\n                    this.filters.sortBy = evt.target.value;\n                    this.execute({ \"action\": \"list\", \"type\": \"Project\", \"domain\": \"/projects/milan-presse\" });\n                } } });\n        this.menu.find(\"#choiceBar4\").append(optSortBy.view);\n        optSortBy.view.css(\"width\", \"150px\");\n        var userFilter = this.cc({ type: \"editionitems.SimpleComboBox\", controller: this, data: { title: \"User\", options: \"users\", value: this.filters.user, onChanged: evt => {\n                    console.log(evt.target.value);\n                    if (evt.target.value == \"me\") {\n                        evt.target.value = this.editor.user.name;\n                    }\n                    ;\n                    this.filters.user = evt.target.value;\n                    this.execute({ \"action\": \"list\", \"type\": \"Project\", \"domain\": \"/projects/milan-presse\" });\n                } } });\n        this.menu.find(\"#choiceBar3\").append(userFilter.view);\n        userFilter.view.css(\"width\", \"150px\");\n        this.filterBox = {\n            status: statusCB,\n            sortBy: optSortBy,\n            user: userFilter\n        };\n        //--- add click on buttons. If attribute \"data-action\" is defined, click calls this[data-action](), else it calls this[btnID]()\n        var buttons = this.menu.find(\".btn\");\n        for (var i = 0; i < buttons.length; i++) {\n            // show button depends of user group\n            if ($(buttons[i]).attr(\"data-access\") != undefined) {\n                var args = $(buttons[i]).attr(\"data-access\").split(\",\");\n            }\n            else {\n                var args = [\"*\"];\n            }\n            $(buttons[i]).css(\"display\", (this.editor.userIsGroup(...args) ? \"inline\" : \"none\"));\n            if ($(buttons[i]).attr(\"id\") == \"BTN_Admin\") {\n                $(buttons[i]).click((event) => this.editor.showAdminPanel());\n            }\n            else {\n                $(buttons[i]).click((event) => this.openTab($(event.currentTarget).attr(\"id\")));\n            }\n        }\n        this.view.append(this.menu);\n        this.view.append(this.content);\n        this.viewList = this.cc({ type: \"editionitems.Container\", render: \"DOM\" });\n        let listContainer = this.content.find(\"#listContainer\");\n        listContainer.html(this.viewList.view);\n        let top = this.menu.position().top + this.menu.outerHeight();\n        listContainer.css(\"top\", (top) + \"px\");\n        listContainer.css(\"overflow\", \"auto\");\n        this.menu.css(\"overflow\", \"hidden\");\n        listContainer.height($(window.top).height() - top);\n        $(window).on(\"resize\", () => {\n            listContainer.css(\"overflow\", \"hidden\");\n            let top = this.menu.position().top + this.menu.outerHeight();\n            listContainer.css(\"top\", (top) + \"px\");\n            listContainer.height($(window.top).height() - top);\n            this.jx.wait(0, () => {\n                listContainer.css(\"overflow\", \"auto\");\n            });\n        });\n        this.listContainer = listContainer;\n        this.openTab(\"BTN_Projects\");\n    }\n    _create() {\n        super._create();\n        this._ready = true;\n    }\n    init({ onInitialised }) {\n        onInitialised();\n    }\n    openTab(idTab, filters = null) {\n        filters = filters || this.filters;\n        this.activeTab = idTab;\n        var dataAction = this.menu.find(\"#\" + idTab).attr(\"data-action\");\n        if (dataAction) {\n            var datObj = JSON.parse(dataAction);\n            datObj.filters = datObj.filters || filters;\n            this.execute(datObj);\n        }\n        else {\n            this[idTab]();\n        }\n        this._refreshButtons();\n    }\n    _refreshFilterBox() {\n        this.filterBox.status.value = this.filters.status;\n        this.filterBox.sortBy.value = this.filters.sortBy;\n    }\n    _refreshButtons() {\n        this.menu.find(\".btn\").removeClass(\"active\");\n        this.menu.find(\".btn\").css(\"background-color\", \"#FFFFFF\");\n        this.menu.find(\".btn\").css(\"color\", \"#337ab7\");\n        this.menu.find(\"#\" + this.activeTab).addClass(\"active\");\n        this.menu.find(\"#\" + this.activeTab).css(\"background-color\", \"#337ab7\");\n        this.menu.find(\"#\" + this.activeTab).css(\"color\", \"#FFFFFF\");\n    }\n    execute({ action, type, filters = {} }) {\n        //console.log(\"execute\", arguments[0]);\n        filters.domain = filters.domain || null;\n        this.filters = Object.assign(this.filters, filters);\n        this._refreshFilterBox();\n        // this.editor.host.io.emit('userAction', {username: this.editor.user.name , action, args: {filters: this.filters}});\n        switch (action) {\n            case 'list':\n                this.refreshList();\n                break;\n            case 'showAdminPanel':\n                this.editor.showAdminPanel();\n                break;\n            case 'callServiceDistant': // experimental\n                //--- get list of items of type 'type'\n                // this.editor.callServiceDistant(\"test\", {\"yo\": \"Youpy\"}, evt=>{\n                // \tconsole.log(evt);\n                // });\n                break;\n            default:\n                console.log(\"function not implemented : \", action);\n                break;\n        }\n    }\n    refreshList(callback = () => { }) {\n        this.jx.loadingScreen.show();\n        var filters = Object.assign({}, this.filters);\n        if (filters.typeProject != \"Project\") {\n            filters.status = \"all\";\n            filters.user = \"all\";\n            this.filterBox.status.visible = false;\n            this.filterBox.user.visible = false;\n        }\n        else {\n            this.filterBox.status.visible = true;\n            this.filterBox.user.visible = true;\n        }\n        this.jx.memo.cookie.setVar(\"homeFilters\", filters);\n        var list = this.editor.getData({ type: filters.typeProject, filters: filters }, (event) => {\n            // --- create and show content from list\n            this._refreshViewList({ list: event.data });\n            this.jx.loadingScreen.hide();\n            callback();\n        });\n    }\n    _refreshViewList({ list }) {\n        this.viewList.removeAllChildren();\n        if (list.length == 0) {\n            this.viewList.addChild({ type: \"Text\", text: \"no results with these search criteria\" });\n        }\n        ;\n        for (var i = 0; i < list.length; i++) {\n            // console.log(list[i])\n            this.viewList.addChild({ type: \"editionitems.CatalogItem\", controller: this,\n                data: {\n                    id: list[i].id,\n                    title: list[i].title,\n                    showID: list[i].type !== \"Doc\",\n                    showStatus: list[i].type !== \"Doc\",\n                    showPreviewBtn: list[i].type !== \"Doc\",\n                    onclickAction: list[i].type !== \"Doc\" ? null : \"preview\",\n                    type: list[i].type,\n                    url: list[i].url,\n                    status: list[i].infos.status.value,\n                    datePublication: (list[i].projectInfo != undefined) ? list[i].projectInfo.project.datePublication : \"\",\n                    previewIndex: (list[i].projectInfo && list[i].projectInfo.project.previewIndex) || \"\",\n                    description: list[i].description\n                } });\n        }\n        ;\n        this.listContainer.scrollTop(0);\n        return this.viewList.view;\n    }\n}\n"]}