{"version":3,"sources":["../../../src/jx/comps/ComboBox.js"],"names":["textInput","ComboBox","dataObject","addEventDispatcher","view","$","options","setOptions","value","find","html","description","attr","css","on","event","onchange","dispatch","target","onchanged","defaulValue","console","log","empty","undefined","id","i","length","opt","el","document","createElement","textContent","split","desc","type","append","prop"],"mappings":"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","file":"ComboBox.js","sourcesContent":["import VisualComponentDOM from \"jx/comps/visualcomponent/VisualComponentDOM\";\nlet textInput = `\n<div class=\"form-group row\">\n    <div class=\"col-xs-6\" id=\"description\">OOO\n    </div>\n    <div class=\"col-xs-6\">\n        <select class=\"form-control\" id=\"value\">\n    </div>\n </div>\n`;\nexport default class ComboBox extends VisualComponentDOM {\n    constructor(dataObject) {\n        super(dataObject);\n    }\n    _create() {\n        super._create();\n        this.addEventDispatcher(\"onchange\", \"onchanged\");\n        this.view = $(textInput);\n    }\n    _initSync() {\n        super._initSync();\n        var options = this.dataObject.options;\n        this.setOptions(options, this.dataObject.value);\n        this.view.find(\"#description\").html(this.dataObject.description || \"\");\n        this.view.find(\"#value\").attr('value', this.dataObject.value || 0);\n        this.view.find(\"#value\").css(\"textAlign\", \"right\");\n        this.view.on(\"input\", (event) => {\n            //this.value = this.value;\n            this.onchange.dispatch({ target: this });\n        });\n        this.view.on(\"change\", (event) => {\n            //this.value = this.value;\n            this.onchanged.dispatch({ target: this });\n        });\n    }\n    setOptions(options, defaulValue) {\n        console.log(options);\n        this.view.find(\"#value\").empty();\n        if (defaulValue == undefined || defaulValue == \"\") {\n            var value = (typeof options[0] == \"string\") ? options[0] : options[0].id;\n        }\n        else {\n            var value = defaulValue;\n        }\n        console.log(value);\n        for (var i = 0; i < options.length; i++) {\n            var opt = options[i];\n            var el = document.createElement(\"option\");\n            if (typeof opt == \"string\") {\n                el.textContent = opt;\n                el.value = opt;\n                $(el).attr(\"selected\", (opt.split(\":\")[0] == value.split(\":\")[0]));\n            }\n            else {\n                el.textContent = opt.desc || opt.id;\n                el.value = opt.id;\n                $(el).attr(\"selected\", opt.id == value.split(\":\")[0]);\n                if (opt.type === \"section\") {\n                    $(el).attr(\"disabled\", true);\n                }\n            }\n            this.view.find(\"#value\").append(el);\n        }\n    }\n    set value(value) {\n        this.view.find(\"#value\").prop('value', value);\n    }\n    get value() {\n        return this.view.find(\"#value\")[0].value;\n    }\n}\n"]}