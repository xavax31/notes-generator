{"version":3,"sources":["../../../../src/jx/comps/container/ContainerDOM.js"],"names":["ContainerDOM","dataObject","Object","assign","children","view","$","css","_allowZIndex","child","childElement","isJXComponent","cc","render","console","error","id","maxZ","j","length","Math","max","append","push","parent","indexOf","has","remove","splice","i","contains","index","value","log","width","ratio","x","height","y","bool","mouseChildren","mod","extendsFrom","mixin","_initialise"],"mappings":"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","file":"ContainerDOM.js","sourcesContent":["import VisualComponentDOM from \"jx/comps/visualcomponent/VisualComponentDOM\";\nexport default class ContainerDOM extends VisualComponentDOM {\n    constructor(dataObject) {\n        super(Object.assign({}, dataObject));\n        //console.log(\"ContainerDOM\", this.dataObject)\n    }\n    static initialiseMod(mod) {\n        mod.extendsFrom(\"VisualComponent\");\n        mod.mixin([\"_create\", \"addChild\", \"hasChild\", \"mouseChildren\", \"removeAllChildren\", \"removeChild\", \"getChildById\", \"getChildAt\",\n            \"width\", \"height\"], ContainerDOM, \"Container\");\n        mod._initialise();\n    }\n    _create() {\n        super._create();\n        this.children = [];\n        this.view = this.dataObject.view || $('<div/>');\n        this.view.css(\"position\", \"absolute\");\n        this._allowZIndex = false;\n    }\n    set width(value) {\n        console.log(this.width);\n        var ratio = value / this.width;\n        for (var i = 0; i < this.children.length; i++) {\n            this.children[i].width *= ratio;\n            this.children[i].x *= ratio;\n        }\n        ;\n    }\n    get width() {\n        var width = 0;\n        for (var i = 0; i < this.children.length; i++) {\n            width += this.children[i].width;\n        }\n        ;\n        return width;\n    }\n    set height(value) {\n        console.log(this.height);\n        var ratio = value / this.height;\n        for (var i = 0; i < this.children.length; i++) {\n            this.children[i].height *= ratio;\n            this.children[i].y *= ratio;\n        }\n        ;\n    }\n    get height() {\n        var height = 0;\n        for (var i = 0; i < this.children.length; i++) {\n            height += this.children[i].height;\n        }\n        ;\n        return height;\n    }\n    set mouseChildren(bool) {\n        this.view.mouseChildren = bool;\n    }\n    get mouseChildren() {\n        return this.view.mouseChildren;\n    }\n    addChild(child) {\n        var childElement = (child.isJXComponent) ? child : this.cc(child);\n        if (childElement.render != \"DOM\") {\n            console.error(\"ContainerDOM\", this.id, \" can not add child \", childElement.id, \"with render\", childElement.render);\n            return null;\n        }\n        if (this._allowZIndex) {\n            let children = this.view.children();\n            let maxZ = 0;\n            for (let j = 0; j < children.length; j++) {\n                maxZ = Math.max(maxZ, $(children[j]).css(\"z-index\"));\n            }\n            ;\n            this.view.append(childElement.view);\n            childElement.view.css(\"z-index\", maxZ + 1);\n        }\n        else {\n            this.view.append(childElement.view);\n        }\n        this.children.push(childElement);\n        childElement.parent = this;\n        return childElement;\n    }\n    hasChild(child) {\n        return this.children.indexOf(child) != -1;\n    }\n    removeChild(child) {\n        //console.log(\"removeChild\", child)\n        if (this.view.has(child.view).length > 0) {\n            //console.log(\"removeChild2\")\n            this.view.remove(child.view);\n            this.children.splice(this.children.indexOf(child), 1);\n        }\n        ;\n        //this._selected(0);\n    }\n    removeAllChildren() {\n        for (var i = 0; i < this.children.length; i++) {\n            if (this.view.contains(this.children[i].view)) {\n                this.view.remove(this.children[i].view);\n            }\n            ;\n        }\n        ;\n        this.children.length = 0;\n    }\n    getChildAt(index) {\n        return this.children[index];\n    }\n    getChildById(id) {\n        for (var i = 0; i < this.children.length; i++) {\n            if (this.children[i].id == id) {\n                return this.children[i];\n            }\n        }\n        ;\n        return null;\n    }\n}\n"]}