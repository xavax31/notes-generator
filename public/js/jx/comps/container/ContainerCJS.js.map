{"version":3,"sources":["../../../../src/jx/comps/container/ContainerCJS.js"],"names":["ContainerCJS","dataObject","Object","assign","_killed","view","removeAllChildren","children","createjs","Container","i","length","addChild","child","result","argumentsLength","arguments","childElement","isJXComponent","cc","render","domElement","DOMElement","push","parent","jx","stage","domView","app","pop","indexOf","contains","removeChild","splice","index","id","childI","getChildIndex","setChildIndex","bool","mouseChildren","mod","extendsFrom","mixin","_create"],"mappings":"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","file":"ContainerCJS.js","sourcesContent":["import VisualComponentCJS from \"jx/comps/visualcomponent/VisualComponentCJS\";\nexport default class ContainerCJS extends VisualComponentCJS {\n    constructor(dataObject) {\n        super(Object.assign({}, dataObject));\n        // console.log(\"ContainerCJS\", this.dataObject)\n    }\n    static initialiseMod(mod) {\n        mod.extendsFrom(\"VisualComponent\");\n        mod.mixin([\"_create\", \"_initSync\", \"addChild\", \"hasChild\", \"mouseChildren\", \"removeAllChildren\", \"removeChild\", \"getChildById\", \"getChildAt\"], ContainerCJS, \"Container\");\n        mod._create();\n    }\n    kill() {\n        if (this._killed)\n            return;\n        //console.info(\"kill\", this.id, this);\n        if (this.view) {\n            this.removeAllChildren();\n        }\n        ;\n        super.kill();\n    }\n    _create() {\n        super._create();\n        this.children = [];\n        this.view = this.dataObject.view || new createjs.Container();\n    }\n    _initSync() {\n        super._initSync();\n        if (!this.view)\n            return;\n        if (this.dataObject.children) {\n            for (var i = 0; i < this.dataObject.children.length; i++) {\n                this.addChild(this.dataObject.children[i]);\n            }\n            ;\n        }\n        ;\n    }\n    set mouseChildren(bool) {\n        this.view.mouseChildren = bool;\n    }\n    get mouseChildren() {\n        return this.view.mouseChildren;\n    }\n    addChild(...child) {\n        let result = [];\n        let argumentsLength = arguments.length;\n        for (let i = 0; i < argumentsLength; i++) {\n            let child = arguments[i];\n            let childElement = (child.isJXComponent) ? child : this.cc(child);\n            if (childElement.render != \"CJS\") {\n                //console.error(\"ContainerCJS\", this.id, \" can not add child \", childElement.id, \"with render\", childElement.render);\n                let domElement = new createjs.DOMElement(childElement.view[0]);\n                this.children.push(childElement);\n                childElement.parent = this;\n                this.view.addChild(domElement);\n                result.push(this.jx.stage.addChild(childElement));\n            }\n            this.children.push(childElement);\n            this.view.addChild(childElement.view);\n            if (child.domView) {\n                this.jx.app.stage.addChild(child.domView);\n            }\n            ;\n            childElement.parent = this;\n            result.push(childElement);\n        }\n        ;\n        return result.pop();\n    }\n    hasChild(child) {\n        return this.children.indexOf(child) != -1;\n    }\n    removeChild(child) {\n        //console.log(\"removeChild\", child)\n        if (this.view.contains(child.view)) {\n            //console.log(\"removeChild2\")\n            this.view.removeChild(child.view);\n            this.children.splice(this.children.indexOf(child), 1);\n            child.parent = null;\n        }\n        ;\n        //this._selected(0);\n    }\n    removeAllChildren() {\n        for (var i = 0; i < this.children.length; i++) {\n            if (this.view.contains(this.children[i].view)) {\n                this.view.removeChild(this.children[i].view);\n                this.children[i].parent = null;\n            }\n            ;\n        }\n        ;\n        this.children.length = 0;\n    }\n    getChildAt(index) {\n        return this.children[index];\n    }\n    getChildById(id) {\n        for (var i = 0; i < this.children.length; i++) {\n            if (this.children[i].id == id) {\n                return this.children[i];\n            }\n        }\n        ;\n        return null;\n    }\n    setChildIndex(child, index) {\n        var childI = this.getChildIndex(child);\n        this.view.setChildIndex(child.view, index);\n        this.children.splice(childI, 1);\n        this.children.splice(index, 0, child);\n    }\n    getChildIndex(child) {\n        return this.view.getChildIndex(child.view);\n    }\n}\n"]}