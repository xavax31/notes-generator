{"version":3,"sources":["../../../../src/jx/comps/screensmanager/ScreenVideo.js"],"names":["ScreenVideo","dataObject","Object","assign","zap","zapMarkers","layerLevel","autoStart","addEventDispatcher","type","needUserClickToStart","no","undefined","rid","resourceID","nextScreenID","bgMusicVolPC","onfinished","add","_ready","callback","autoplay","view","jx","playVideo","id","dispatch","target","app","screens","go","onready","console","log","wait","evt","_layerLevel","visible","killme","kill","value","css"],"mappings":"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","file":"ScreenVideo.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\n/**\n */\nexport default class ScreenVideo extends Component {\n    constructor(dataObject) {\n        super(Object.assign({\n            zap: true,\n            zapMarkers: null,\n            layerLevel: 100,\n            autoStart: false\n        }, dataObject));\n    }\n    _create() {\n        super._create();\n        this.addEventDispatcher(\"onfinished\");\n        this.type = \"video\";\n        this.needUserClickToStart = true;\n        this.no = this.dataObject.no !== undefined ? this.dataObject.no : this.no;\n        this.rid = this.dataObject.rid || this.dataObject.resourceID;\n        this.zap = this.dataObject.zap;\n        this.zapMarkers = this.dataObject.zapMarkers;\n        this.layerLevel = this.dataObject.layerLevel;\n        this.nextScreenID = this.dataObject.nextScreenID;\n        this.bgMusicVolPC = this.dataObject.bgMusicVolPC;\n        if (this.dataObject.onfinished) {\n            this.onfinished.add(this.dataObject.onfinished);\n        }\n        ;\n        this._ready = true;\n    }\n    show(callback = evt => { }, { autoplay = true }) {\n        // alert(\"firstScreenToBePlayed \" + firstScreenToBePlayed)\n        this.view = this.jx.playVideo({\n            id: this.rid,\n            autoplay: autoplay,\n            zap: this.zap,\n            zapMarkers: this.zapMarkers,\n            bgMusicVolPC: this.bgMusicVolPC,\n            onfinished: evt => {\n                //console.log(\"finish\");\n                this.onfinished.dispatch({ target: this });\n                if (this.nextScreenID) {\n                    this.jx.app.screens.go(this.nextScreenID);\n                }\n            },\n            onready: evt => {\n                console.log(\"ON READY\");\n                this.jx.wait(50, () => callback(evt)); // avoid bug: video appears very quickly during transition end (black fade out)\n            }\n        });\n        // this.view.visible = false;\n        this.layerLevel = this._layerLevel;\n        // this.jx.wait(200, ()=>this.view.visible = false)\n    }\n    set layerLevel(value) {\n        this._layerLevel = value;\n        if (this.view) {\n            this.view.view.css(\"z-index\", this._layerLevel);\n        }\n        ;\n    }\n    showScreen() {\n        // this.layerLevel = this._layerLevel;\n        this.view.visible = true;\n    }\n    hide(evt) {\n        if (this.view) {\n            this.view.killme();\n            this.view = null;\n        }\n    }\n    kill() {\n        if (this.view) {\n            this.view.killme();\n            this.view.kill(true);\n            this.view = null;\n        }\n        super.kill();\n    }\n}\n"]}