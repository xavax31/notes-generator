{"version":3,"sources":["../../../../src/jx/comps/visualcomponent/VisualComponentDOM.js"],"names":["VisualComponentDOM","dataObject","jQuery","fn","rotate","degrees","$","css","percentAnchorX","percentAnchorY","_addListeners","_killed","view","_removeListeners","par","x","y","jx","config","useClickOnTouchScreens","on","_clicked","evt","proxy","_mousedown","_mouseup","_rollover","_rollout","_mousemove","off","savedBounds","width","height","console","warn","parent","append","prepend","value","Number","replace","deg","_degrees","_cursorOnRoll","_enabled","_cursorOnDisabled","mod","mixin"],"mappings":"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","file":"VisualComponentDOM.js","sourcesContent":["import VisualComponent from \"jx/core/comps/VisualComponent\";\nexport default class VisualComponentDOM extends VisualComponent {\n    constructor(dataObject) {\n        super(dataObject);\n    }\n    _create() {\n        jQuery.fn.rotate = function (degrees) {\n            $(this).css({ '-webkit-transform': 'rotate(' + degrees + 'deg)',\n                '-moz-transform': 'rotate(' + degrees + 'deg)',\n                '-ms-transform': 'rotate(' + degrees + 'deg)',\n                'transform': 'rotate(' + degrees + 'deg)' });\n            //how can I find the controller for \n            var percentAnchorX = 0;\n            var percentAnchorY = 0;\n            $(this).css({ '-webkit-transform-origin': percentAnchorX + '% ' + percentAnchorY + '%',\n                '-moz-transform-origin': percentAnchorX + '% ' + percentAnchorY + '%',\n                '-ms-transform-origin': percentAnchorX + '% ' + percentAnchorY + '%',\n                '-o-transform-origin': percentAnchorX + '% ' + percentAnchorY + '%',\n                'transform-origin': percentAnchorX + '% ' + percentAnchorY + '%' });\n            return $(this);\n        };\n        super._create();\n    }\n    _initSync() {\n        super._initSync();\n        this._addListeners();\n    }\n    static initialiseMod(mod) {\n        mod.mixin([\"x\", \"y\", \"width\", \"height\", \"scaleX\", \"scaleY\", \"rotation\", \"alpha\", \"visible\",\n            \"saveBounds\", \"cache\"], VisualComponentDOM, \"VisualComponent\"); // replace VisualComponent members by  VisualComponentDOM members\n        mod.mixin([\"_create\"], VisualComponentDOM, \"MixIn\"); // override VisualComponentDOM members\n    }\n    kill() {\n        if (this._killed)\n            return;\n        if (this.view) {\n            this._removeListeners();\n        }\n        ;\n        super.kill();\n    }\n    set visible(value) {\n        this.view.css(\"display\", (value ? \"inline\" : \"none\"));\n    }\n    get visible() {\n        return this.view.css(\"display\") != \"none\";\n    }\n    set alpha(value) {\n        this.view.css(\"opacity\", value);\n    }\n    transform(par) {\n        this.view.x = par.x || this.view.x;\n        this.view.y = par.y || this.view.y;\n    }\n    set x(value) {\n        this.view.css(\"left\", value + \"px\");\n    }\n    get x() {\n        return Number(this.view.css(\"left\").replace(\"px\", \"\").replace(\",\", \".\"));\n    }\n    set y(value) {\n        this.view.css(\"top\", value + \"px\");\n    }\n    get y() {\n        return Number(this.view.css(\"top\").replace(\"px\", \"\").replace(\",\", \".\"));\n    }\n    set scaleX(value) {\n        //console.log(\"scaleX dom not implemented\")\n    }\n    get scaleX() {\n        //console.log(\"scaleX dom not implemented\")\n        return null;\n    }\n    set scaleY(value) {\n        //console.log(\"scaleY dom not implemented\")\n    }\n    get scaleY() {\n        //console.log(\"scaleY dom not implemented\")\n        return null;\n    }\n    set width(value) {\n        this.view.width(value);\n    }\n    get width() {\n        return this.view.width();\n    }\n    set height(value) {\n        this.view.height(value);\n    }\n    get height() {\n        return this.view.height();\n    }\n    // fitIn({x=0, y=0, width=0, height=0, center=true}){\n    // \tvar ratioW = width/this.width;\n    // \tvar ratioH = height/this.height;\n    // \tvar ratio = Math.min(ratioW, ratioH);\n    // \tthis.width *= ratio;\n    // \tthis.height *= ratio;\n    // \tif(center){\n    // \t\tthis.x = x + width/2 - this.width/2;\n    // \t\tthis.y = y + height/2 - this.height/2;\n    // \t}\n    // \telse{\n    // \t\tthis.x = x;\n    // \t\tthis.y = y;\n    // \t}\n    // \t////console.log(this.width, this.height)\n    // }\n    _addListeners() {\n        if (this.jx.config.useClickOnTouchScreens) {\n            this.view.on(\"click\", evt => { this._clicked(evt); });\n            this.view.on(\"mousedown\", $.proxy(this._mousedown, this));\n        }\n        else {\n            this.view.on(\"touchend\", evt => { this._clicked(evt); });\n            this.view.on(\"touchstart\", $.proxy(this._mousedown, this));\n        }\n        this.view.on(\"mouseup\", $.proxy(this._mouseup, this));\n        this.view.on(\"mouseenter\", $.proxy(this._rollover, this));\n        this.view.on(\"mouseout\", $.proxy(this._rollout, this));\n        this.view.on(\"mousemove\", $.proxy(this._mousemove, this));\n    }\n    _removeListeners() {\n        if (!this.view)\n            return;\n        if (this.jx.config.useClickOnTouchScreens) {\n            this.view.off(\"click\");\n            this.view.off(\"mousedown\");\n        }\n        else {\n            this.view.off(\"touchend\");\n            this.view.off(\"touchstart\");\n        }\n        this.view.off(\"mouseup\");\n        this.view.off(\"mouseenter\");\n        this.view.off(\"mouseout\");\n        this.view.off(\"mousemove\");\n    }\n    set rotation(deg) {\n        this._degrees = deg;\n        this.view.rotate(deg);\n    }\n    get rotation() {\n        return this._degrees;\n    }\n    saveBounds() {\n        this.savedBounds = {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    }\n    cache() {\n        //no action in dom\n    }\n    restoreBounds() {\n        this.width = this.savedBounds.width;\n        this.height = this.savedBounds.height;\n        this.x = this.savedBounds;\n        this.y = this.savedBounds;\n    }\n    bringToFront() {\n        console.warn(\"BRINGTOFRONT\", this.view, this.view.parent());\n        if (this.view.parent()) {\n            this.view.parent().append(this.view);\n        }\n    }\n    bringToBack() {\n        if (this.view.parent()) {\n            this.view.parent().prepend(this.view);\n        }\n    }\n    set cursor(value) {\n        this._cursorOnRoll = value;\n        if (this._enabled) {\n            this.view.css(\"cursor\", value);\n        }\n        else {\n            this.view.css(\"cursor\", this._cursorOnDisabled);\n        }\n    }\n    get cursor() {\n        return this._cursorOnRoll;\n    }\n}\n"]}