{"version":3,"sources":["../../../../src/jx/comps/clip/Clip.js"],"names":["Clip","dataObject","Object","assign","id","lib","symbolID","_lib","view","getFromSymbol","_initializeClip","console","log","createjs","MovieClip","gotoAndStop","framerate","arrangeFlashClipsNames","path","b","children","c","d","length","name","parent","pathArr","split","i","shift","getMCChildByPath","join","args","stop","mc","pattern","result","regExp","RegExp","child","search","push","movieClip","rec","prop","DisplayObject","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QACMA,I;;;AACF,sBAAYC,UAAZ,EAAwB;AAAA;;AAAA,oHACdC,OAAOC,MAAP,CAAc,EAAEC,IAAI,EAAN,EAAUC,KAAK,IAAf,EAAqBC,UAAU,IAA/B,EAAd,EAAqDL,UAArD,CADc;;AAEpB,kBAAKM,IAAL,GAAY,MAAKN,UAAL,CAAgBI,GAA5B;AACA,kBAAKG,IAAL,GAAY,MAAKD,IAAL,CAAUE,aAAV,CAAwB,MAAKR,UAAL,CAAgBK,QAAxC,CAAZ;AACA,kBAAKI,eAAL;AAJoB;AAKvB;;;;8CACiB;AACdC,wBAAQC,GAAR,CAAY,gBAAZ;AACA,oBAAI,KAAKJ,IAAL,YAAqBK,SAASC,SAAlC,EAA6C;AACzC,yBAAKN,IAAL,CAAUO,WAAV,CAAsB,CAAtB;AACA,yBAAKP,IAAL,CAAUQ,SAAV,GAAsB,EAAtB;AACH;AACDhB,qBAAKiB,sBAAL,CAA4B,KAAKT,IAAjC;AACH;;;2CAMcU,I,EAAM;AACjB,qBAAK,IAAIC,IAAI,KAAKX,IAAL,CAAUY,QAAlB,EAA4BC,IAAI,CAAhC,EAAmCC,IAAIH,EAAEI,MAA9C,EAAsDD,IAAID,CAA1D,EAA6DA,GAA7D,EAAkE;AAE9D,wBAAIF,EAAEE,CAAF,EAAKG,IAAL,IAAaN,IAAjB,EACI,OAAOC,EAAEE,CAAF,CAAP;AACP;AACD,uBAAO,IAAP;AACH;;;6CAMgBH,I,EAAqB;AAAA,oBAAfO,MAAe,yDAAN,IAAM;;AAClCd,wBAAQC,GAAR,CAAY,kBAAZ,EAAgCM,IAAhC,EAAsCO,MAAtC;AACA,oBAAIC,UAAUR,KAAKS,KAAL,CAAW,GAAX,CAAd;AACA,oBAAIP,WAAYK,UAAU,IAAX,GAAmB,KAAKjB,IAAL,CAAUY,QAA7B,GAAwCK,OAAOL,QAA9D;AACA,qBAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAIR,SAASG,MAA7B,EAAqCK,GAArC,EAA0C;AACtC,wBAAIR,SAASQ,CAAT,EAAYJ,IAAZ,IAAoBE,QAAQ,CAAR,CAAxB,EAAoC;AAChCA,gCAAQG,KAAR;AACA,4BAAIH,QAAQH,MAAR,IAAkB,CAAtB,EAAyB;AACrB,mCAAOH,SAASQ,CAAT,CAAP;AACH,yBAFD,MAGK;AACD,mCAAO,KAAKE,gBAAL,CAAsBJ,QAAQK,IAAR,CAAa,GAAb,CAAtB,EAAyCX,SAASQ,CAAT,CAAzC,CAAP;AACH;AACJ;AACD;AACH;AACD;AACA,uBAAO,IAAP;AACH;;;0CAuBoB;AAAA,kDAANI,IAAM;AAANA,wBAAM;AAAA;;AACjB,qBAAKxB,IAAL,CAAUO,WAAV,CAAsBiB,IAAtB;AACH;;;mCACM;AACH,qBAAKxB,IAAL,CAAUyB,IAAV;AACH;;;8CASwBC,E,EAAIC,O,EAAS;AAClC,oBAAIC,SAAS,EAAb;AACA,oBAAIC,SAAS,IAAIC,MAAJ,CAAWH,OAAX,EAAoB,GAApB,CAAb;;AAIA,qBAAK,IAAIP,IAAI,CAAb,EAAgBA,IAAIM,GAAGd,QAAH,CAAYG,MAAhC,EAAwCK,GAAxC,EAA6C;AACzC,wBAAIW,QAAQL,GAAGd,QAAH,CAAYQ,CAAZ,CAAZ;AACA,wBAAIW,MAAMf,IAAN,IAAc,IAAd,IAAsBe,MAAMf,IAAN,CAAWgB,MAAX,CAAkBH,MAAlB,KAA6B,CAAC,CAAxD,EAA2D;AACvDD,+BAAOK,IAAP,CAAYF,KAAZ;AACH;AACJ;AACD;AACA,uBAAOH,MAAP;AACH;;;mDAO6BM,S,EAAoB;AAAA,oBAATC,GAAS,yDAAH,CAAG;;AAC9C,qBAAK,IAAIC,IAAT,IAAiBF,SAAjB,EAA4B;AACxB,wBAAIE,QAAQ,QAAR,IAAoBA,QAAQ,OAA5B,IAAuCF,UAAUE,IAAV,aAA2B/B,SAASgC,aAA/E,EAA8F;AAE1FH,kCAAUE,IAAV,EAAgBpB,IAAhB,GAAuBoB,IAAvB;AACA,4BAAID,MAAM,CAAN,IAAWD,UAAUE,IAAV,EAAgBxB,QAAhB,IAA4B0B,SAA3C,EAAsD;AAClD9C,iCAAKiB,sBAAL,CAA4ByB,UAAUE,IAAV,CAA5B,EAA6CD,MAAM,CAAnD;AACH;AACD;AAEH;AACD;AACH;AACD;AACH;;;;;;sBAEU3C,I","file":"Clip.js","sourcesContent":["import VisualComponentCJS from \"jx/comps/visualcomponent/VisualComponentCJS\";\nclass Clip extends VisualComponentCJS {\n    constructor(dataObject) {\n        super(Object.assign({ id: \"\", lib: null, symbolID: null }, dataObject));\n        this._lib = this.dataObject.lib;\n        this.view = this._lib.getFromSymbol(this.dataObject.symbolID);\n        this._initializeClip();\n    }\n    _initializeClip() {\n        console.log(\"initializeClip\");\n        if (this.view instanceof createjs.MovieClip) {\n            this.view.gotoAndStop(0);\n            this.view.framerate = 12;\n        }\n        Clip.arrangeFlashClipsNames(this.view);\n    }\n    /* __\n     * [getChildByName description]\n     * @param  {} path\n     * @return {}\n     */\n    getChildByName(path) {\n        for (var b = this.view.children, c = 0, d = b.length; d > c; c++) {\n            //console.log( b[ c ] )\n            if (b[c].name == path)\n                return b[c];\n        }\n        return null;\n    }\n    /* __\n     * [getChildByPath description]\n     * @param  {} path\n     * @return {}\n     */\n    getMCChildByPath(path, parent = null) {\n        console.log(\"getMCChildByPath\", path, parent);\n        var pathArr = path.split(\".\");\n        var children = (parent == null) ? this.view.children : parent.children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name == pathArr[0]) {\n                pathArr.shift();\n                if (pathArr.length == 0) {\n                    return children[i];\n                }\n                else {\n                    return this.getMCChildByPath(pathArr.join(\".\"), children[i]);\n                }\n            }\n            ;\n        }\n        ;\n        return null;\n    }\n    // /* __\n    //   * [getChildByPath description]\n    //   * @param  {} path\n    //   * @return {}\n    //   */\n    //  getMCChildByPath( path , parent=null) {\n    //      console.log(\"getMCChildByPath\", path, parent)\n    //      var pathArr = path.split(\".\");\n    //      var children = (parent==null) ? this.view.children : parent.children;\n    //      for (var i = 0; i < children.length; i++) {\n    //          if (children[i].name == pathArr[0]) {\n    //              pathArr.shift();\n    //              if (pathArr.length == 0) {\n    //                  return children[i];\n    //              }\n    //              else{\n    //                  return this.getMCChildByPath(pathArr.join(\".\"), children[i]);\n    //              }\n    //          };\n    //      };\n    //      return null;\n    //  }\n    gotoAndStop(...args) {\n        this.view.gotoAndStop(args);\n    }\n    stop() {\n        this.view.stop();\n    }\n    //______________________________________________________________________________________\n    // STATIC FUNCTIONS\n    /* __\n     * Retourne un array de tous les enfants de mc, de nom pattern.\n     * @param  {} mc\n     * @param  {} pattern\n     * @return {}\n     */\n    static getChildrenByName(mc, pattern) {\n        var result = [];\n        var regExp = new RegExp(pattern, \"g\");\n        // console.log( \" mc \"+ mc );\n        // console.log( \" mc.children \"+ mc.children );\n        // console.log( \" mc.children.length \"+ mc.children.length );\n        for (var i = 0; i < mc.children.length; i++) {\n            var child = mc.children[i];\n            if (child.name != null && child.name.search(regExp) != -1) {\n                result.push(child);\n            }\n        }\n        ;\n        return result;\n    }\n    /* __\n     * Corrige les noms des clips dans l'export html5 de Flash.\n     * Lors de l'export Flash vers html5, les noms des clips sont référencés comme variable dans le clip parent, mais clip.name est null. Donc parent.getChildByName(\"NomClip\") return null même si le clip est bien nommé \"NomClip\" dans le fla.\n     * L'appel de cette fonction sur un clip corrige ceci en remplissant la variable name de tous ces enfants selon les références trouvées.\n     * @param  {createjs.MovieClip} movieClip\n     */\n    static arrangeFlashClipsNames(movieClip, rec = 4) {\n        for (var prop in movieClip) {\n            if (prop != \"parent\" && prop != \"shape\" && movieClip[prop] instanceof createjs.DisplayObject) {\n                //console.log( prop );\n                movieClip[prop].name = prop;\n                if (rec > 0 && movieClip[prop].children != undefined) {\n                    Clip.arrangeFlashClipsNames(movieClip[prop], rec - 1);\n                }\n                ;\n                //console.Clip\"arrangeFlashClipsNames \" +  movieClip[ prop ].name );\n            }\n            ;\n        }\n        ;\n    }\n}\nexport default Clip;\n"]}