{"version":3,"sources":["../../../../src/jx/comps/image/ImageDOM.js"],"names":["ImageDOM","dataObject","view","resourceID","imageResource","jx","db","findOne","id","Image","src","bitmapData","toDataURL","console","error","$","css","width","data","naturalWidth","height","naturalHeight","mod","extendsFrom","mixin","_initialise"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QACqBA,Q;;;AACjB,0BAAYC,UAAZ,EAAwB;AAAA;;AAAA,uHACdA,UADc;AAEvB;;;;sCAMS;AACN;AACA,oBAAIC,IAAJ;AACA,oBAAI,KAAKD,UAAL,CAAgBE,UAAhB,IAA8B,IAAlC,EAAwC;AACpC,wBAAIC,gBAAgB,KAAKC,EAAL,CAAQC,EAAR,CAAWC,OAAX,CAAmB,EAAEC,IAAI,KAAKP,UAAL,CAAgBE,UAAtB,EAAnB,CAApB;AACAD,2BAAO,IAAIO,KAAJ,EAAP;AACAP,yBAAKQ,GAAL,GAAWN,cAAcM,GAAzB;AACH,iBAJD,MAKK,IAAI,KAAKT,UAAL,CAAgBU,UAAhB,IAA8B,IAAlC,EAAwC;AACzCT,2BAAO,IAAIO,KAAJ,EAAP;AACAP,yBAAKQ,GAAL,GAAW,KAAKT,UAAL,CAAgBU,UAAhB,CAA2BC,SAA3B,EAAX;AACH,iBAHI,MAIA;AACDC,4BAAQC,KAAR,CAAc,6CAAd,EAA6D,KAAKb,UAAlE;AAGH;AACD,qBAAKC,IAAL,GAAYa,EAAEb,IAAF,CAAZ;AACA,qBAAKA,IAAL,CAAUc,GAAV,CAAc,UAAd,EAA0B,UAA1B;AACA,oBAAIZ,aAAJ,EAAmB;AACf,yBAAKa,KAAL,GAAab,cAAcc,IAAd,CAAmBC,YAAhC;AACA,yBAAKC,MAAL,GAAchB,cAAcc,IAAd,CAAmBG,aAAjC;AACH;AACJ;;;8BACcV,U,EAAY;AACvB,qBAAKT,IAAL,CAAUQ,GAAV,GAAgBC,UAAhB;AACH;;;0CA/BoBW,G,EAAK;AACtBA,oBAAIC,WAAJ,CAAgB,iBAAhB;AACAD,oBAAIE,KAAJ,CAAU,CAAC,SAAD,EAAY,YAAZ,CAAV,EAAqCxB,QAArC,EAA+C,OAA/C;AACAsB,oBAAIG,WAAJ;AACH;;;;;;sBARgBzB,Q","file":"ImageDOM.js","sourcesContent":["import VisualComponentDOM from \"jx/comps/visualcomponent/VisualComponentDOM\";\nexport default class ImageDOM extends VisualComponentDOM {\n    constructor(dataObject) {\n        super(dataObject);\n    }\n    static initialiseMod(mod) {\n        mod.extendsFrom(\"VisualComponent\");\n        mod.mixin([\"_create\", \"bitmapData\"], ImageDOM, \"Image\");\n        mod._initialise();\n    }\n    _create() {\n        super._create();\n        var view;\n        if (this.dataObject.resourceID != null) {\n            var imageResource = this.jx.db.findOne({ id: this.dataObject.resourceID });\n            view = new Image();\n            view.src = imageResource.src;\n        }\n        else if (this.dataObject.bitmapData != null) {\n            view = new Image();\n            view.src = this.dataObject.bitmapData.toDataURL();\n        }\n        else {\n            console.error(\"resourceID property is needed in dataObject\", this.dataObject);\n            // ?used\n            // view = new Image();\n        }\n        this.view = $(view);\n        this.view.css(\"position\", \"absolute\");\n        if (imageResource) {\n            this.width = imageResource.data.naturalWidth;\n            this.height = imageResource.data.naturalHeight;\n        }\n    }\n    set bitmapData(bitmapData) {\n        this.view.src = bitmapData;\n    }\n}\n"]}