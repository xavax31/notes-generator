{"version":3,"sources":["../../../../src/jx/comps/image/ImageCJS.js"],"names":["ImageCJS","dataObject","resourceID","imageResource","jx","db","findOne","id","data","debug","error","view","createjs","Bitmap","width","getBounds","height","bitmapData","console","image","mod","extendsFrom","mixin","_initialise"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QACqBA,Q;;;AACjB,0BAAYC,UAAZ,EAAwB;AAAA;;AAAA,uHACdA,UADc;AAEvB;;;;sCAMS;AACN;AACA,oBAAI,KAAKA,UAAL,CAAgBC,UAAhB,IAA8B,IAAlC,EAAwC;AACpC,wBAAIC,gBAAgB,KAAKC,EAAL,CAAQC,EAAR,CAAWC,OAAX,CAAmB,EAAEC,IAAI,KAAKN,UAAL,CAAgBC,UAAtB,EAAnB,CAApB;AACA,wBAAIC,cAAcK,IAAd,IAAsB,IAA1B,EAAgC;AAC5B,6BAAKJ,EAAL,CAAQK,KAAR,CAAcC,KAAd,CAAoB,8BAA8B,KAAKT,UAAL,CAAgBC,UAAlE;AACA;AACH;AACD,yBAAKS,IAAL,GAAY,IAAIC,SAASC,MAAb,CAAoBV,cAAcK,IAAlC,CAAZ;AACA,yBAAKM,KAAL,GAAa,KAAKH,IAAL,CAAUI,SAAV,GAAsBD,KAAnC;AACA,yBAAKE,MAAL,GAAc,KAAKL,IAAL,CAAUI,SAAV,GAAsBC,MAApC;AACH,iBATD,MAUK,IAAI,KAAKf,UAAL,CAAgBgB,UAAhB,IAA8B,IAAlC,EAAwC;AACzC,yBAAKN,IAAL,GAAY,IAAIC,SAASC,MAAb,CAAoB,KAAKZ,UAAL,CAAgBgB,UAApC,CAAZ;AACA,yBAAKH,KAAL,GAAa,KAAKH,IAAL,CAAUI,SAAV,GAAsBD,KAAnC;AACA,yBAAKE,MAAL,GAAc,KAAKL,IAAL,CAAUI,SAAV,GAAsBC,MAApC;AACH,iBAJI,MAKA;AACDE,4BAAQR,KAAR,CAAc,6CAAd,EAA6D,KAAKT,UAAlE;AACA;AAKH;AAGJ;;;8BACcgB,U,EAAY;AACvB,qBAAKN,IAAL,CAAUQ,KAAV,GAAkBF,UAAlB;AACH,a;gCACgB;AACb,uBAAO,KAAKN,IAAL,CAAUQ,KAAjB;AACH;;;0CAtCoBC,G,EAAK;AACtBA,oBAAIC,WAAJ,CAAgB,iBAAhB;AACAD,oBAAIE,KAAJ,CAAU,CAAC,SAAD,EAAY,YAAZ,CAAV,EAAqCtB,QAArC,EAA+C,OAA/C;AACAoB,oBAAIG,WAAJ;AACH;;;;;;sBARgBvB,Q","file":"ImageCJS.js","sourcesContent":["import VisualComponentCJS from \"jx/comps/visualcomponent/VisualComponentCJS\";\nexport default class ImageCJS extends VisualComponentCJS {\n    constructor(dataObject) {\n        super(dataObject);\n    }\n    static initialiseMod(mod) {\n        mod.extendsFrom(\"VisualComponent\");\n        mod.mixin([\"_create\", \"bitmapData\"], ImageCJS, \"Image\");\n        mod._initialise();\n    }\n    _create() {\n        super._create();\n        if (this.dataObject.resourceID != null) {\n            var imageResource = this.jx.db.findOne({ id: this.dataObject.resourceID });\n            if (imageResource.data == null) {\n                this.jx.debug.error(\"resource not preloaded : \" + this.dataObject.resourceID);\n                return;\n            }\n            this.view = new createjs.Bitmap(imageResource.data);\n            this.width = this.view.getBounds().width;\n            this.height = this.view.getBounds().height;\n        }\n        else if (this.dataObject.bitmapData != null) {\n            this.view = new createjs.Bitmap(this.dataObject.bitmapData);\n            this.width = this.view.getBounds().width;\n            this.height = this.view.getBounds().height;\n        }\n        else {\n            console.error(\"resourceID property is needed in dataObject\", this.dataObject);\n            return;\n            // ?used : clone Image cjs\n            // var data = this.dataObject.resource;\n            // data.cache(0,0,data.getBounds().width, data.getBounds().height)\n            // this.view = new createjs.Bitmap(data.cacheCanvas);\t\n        }\n        // this.width = this.view.getBounds().width;\n        // this.height = this.view.getBounds().height;\n    }\n    set bitmapData(bitmapData) {\n        this.view.image = bitmapData;\n    }\n    get bitmapData() {\n        return this.view.image;\n    }\n}\n"]}