{"version":3,"sources":["../../../src/jx/comps/RemoteCom.js"],"names":["RemoteCom","dataObject","Object","assign","url","io","info","connect","on","message","console","log","username","action","args","$","click","method","params","callback","ajax","type","dataType","data","JSON","stringify","success","result","beforeSend","jqXHR","PlainObject","error","textStatus","errorThrown","responseText"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAGqBA,S;;;AAIjB,2BAAYC,UAAZ,EAAwB;AAAA;;AAAA,yHACdC,OAAOC,MAAP,CAAc;AAChBC,qBAAK,EADW;AAEhBC,oBAAI;AAFY,aAAd,EAGHJ,UAHG,CADc;AAKvB;;;;sCACS;AACN;AACA,qBAAKK,IAAL,GAAY;AACRF,yBAAK,KAAKH,UAAL,CAAgBG;AADb,iBAAZ;AAGA,oBAAI,KAAKH,UAAL,CAAgBI,EAApB,EAAwB;AACpB,yBAAKA,EAAL,GAAUA,GAAGE,OAAH,CAAW,qBAAX,CAAV;;AAEA,yBAAKF,EAAL,CAAQG,EAAR,CAAW,SAAX,EAAsB,UAAUC,OAAV,EAAmB;AACrCC,gCAAQC,GAAR,CAAY,yCAAyCF,OAArD;AACH,qBAFD;AAGA,yBAAKJ,EAAL,CAAQG,EAAR,CAAW,YAAX,EAAyB,gBAAsC;AAAA,4BAA1BI,QAA0B,QAA1BA,QAA0B;AAAA,4BAAhBC,MAAgB,QAAhBA,MAAgB;AAAA,4BAARC,IAAQ,QAARA,IAAQ;;AAC3DJ,gCAAQC,GAAR,CAAY,UAAUC,QAAV,GAAqB,eAArB,GAAuCC,MAAnD,EAA2DC,IAA3D;AACH,qBAFD;AAGAC,sBAAE,OAAF,EAAWC,KAAX,CAAiB,YAAY,CAE5B,CAFD;AAGH;AACD;AACH;;;uCAQUC,M,EAAQC,M,EAAQC,Q,EAAU;AACjCJ,kBAAEK,IAAF,CAAO;AACHC,0BAAM,MADH;AAEHjB,yBAAK,KAAKE,IAAL,CAAUF,GAAV,GAAgB,GAAhB,GAAsBa,MAFxB;AAGHK,8BAAU,MAHP;AAIHC,0BAAM,EAAEL,QAAQM,KAAKC,SAAL,CAAeP,MAAf,CAAV,EAJH;AAKHQ,6BAAS,iBAAUC,MAAV,EAAkB;AAEvBR,iCAASQ,MAAT;AACH,qBARE;AASHC,gCAAY,oBAAUC,KAAV,EAAiBC,WAAjB,EAA8B,CAEzC,CAXE;AAYHC,2BAAO,eAAUF,KAAV,EAAiBG,UAAjB,EAA6BC,WAA7B,EAA0C;AAC7CvB,gCAAQqB,KAAR,CAAcF,MAAMK,YAApB;AACH;AAdE,iBAAP;AAgBH;;;0CACajB,M,EAAQC,M,EAAQC,Q,EAAU;AACpCJ,kBAAEK,IAAF,CAAO;AACHC,0BAAM,MADH;AAEHjB,yBAAK,KAAKE,IAAL,CAAUF,GAAV,GAAgB,GAAhB,GAAsBa,MAFxB;AAGHK,8BAAU,MAHP;AAIHC,0BAAML,MAJH;AAKHQ,6BAAS,iBAAUC,MAAV,EAAkB;AAEvBR,iCAASQ,MAAT;AACH,qBARE;AASHC,gCAAY,oBAAUC,KAAV,EAAiBC,WAAjB,EAA8B;AACtCpB,gCAAQC,GAAR,CAAYkB,KAAZ,EAAmBC,WAAnB;AACH,qBAXE;AAYHC,2BAAO,eAAUF,KAAV,EAAiBG,UAAjB,EAA6BC,WAA7B,EAA0C;AAC7CvB,gCAAQqB,KAAR,CAAcF,MAAMK,YAApB;AACH;AAdE,iBAAP;AAgBH;;;;;;sBAxEgBlC,S","file":"RemoteCom.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\n/**\n */\nexport default class RemoteCom extends Component {\n    /**\n    * @param {object} dataObject\n    */\n    constructor(dataObject) {\n        super(Object.assign({\n            url: \"\",\n            io: false\n        }, dataObject));\n    }\n    _create() {\n        super._create();\n        this.info = {\n            url: this.dataObject.url\n        };\n        if (this.dataObject.io) {\n            this.io = io.connect('http://52.208.49.19');\n            // this.io = io.connect('http://localhost:3000');\n            this.io.on('message', function (message) {\n                console.log('Le serveur a un message pour vous : ' + message);\n            });\n            this.io.on('userAction', function ({ username, action, args }) {\n                console.log('User ' + username + \" make action \" + action, args);\n            });\n            $('#poke').click(function () {\n                // this.io.emit('message', 'Salut serveur, ça va ?');\n            });\n        }\n        ;\n    }\n    /**\n     * Call a method on remote  (server type independant php/node).\n     * @param  {String}   method\n     * @param  {Object}   params\n     * @param  {Function} callback\n     * @return none  return result in callback function. result is an object {data: result of opération, ... others eventuals properties}\n     */\n    callMethod(method, params, callback) {\n        $.ajax({\n            type: \"POST\",\n            url: this.info.url + \"/\" + method,\n            dataType: \"json\",\n            data: { params: JSON.stringify(params) },\n            success: function (result) {\n                //console.log(\"RESULT\", result)\n                callback(result);\n            },\n            beforeSend: function (jqXHR, PlainObject) {\n                // console.log(jqXHR, PlainObject)\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                console.error(jqXHR.responseText);\n            }\n        });\n    }\n    callMethodOld(method, params, callback) {\n        $.ajax({\n            type: \"POST\",\n            url: this.info.url + \"/\" + method,\n            dataType: \"json\",\n            data: params,\n            success: function (result) {\n                //console.log(\"RESULT\", result)\n                callback(result);\n            },\n            beforeSend: function (jqXHR, PlainObject) {\n                console.log(jqXHR, PlainObject);\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                console.error(jqXHR.responseText);\n            }\n        });\n    }\n}\n"]}