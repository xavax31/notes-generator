{"version":3,"sources":["../../../src/jx/comps/StartButton.js"],"names":["StartButton","dataObject","Object","assign","resourceID","target","onstarted","addEventDispatcher","addOnce","jx","config","system","needUserActionToWork","view","cc","type","render","ipadStartButton","id","x","width","y","height","addChild","onclick","event","removeChild","createjs","WebAudioPlugin","playEmptySound","dispatch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAKqBA,W;;;AAOjB,6BAAYC,UAAZ,EAAwB;AAAA;;AAAA,6HACdC,OAAOC,MAAP,CAAc;AAChBC,4BAAY,cADI;AAEhBC,wBAAQ,IAFQ;AAGhBC,2BAAW,wBAAO,CAAG;AAHL,aAAd,EAIHL,UAJG,CADc;AAMvB;;;;sCACS;AAAA;;AACN;AACA,qBAAKI,MAAL,GAAc,KAAKJ,UAAL,CAAgBI,MAA9B;AACA,qBAAKE,kBAAL,CAAwB,WAAxB;AACA,qBAAKD,SAAL,CAAeE,OAAf,CAAuB,KAAKP,UAAL,CAAgBK,SAAvC;AACA,oBAAI,KAAKG,EAAL,CAAQC,MAAR,CAAeC,MAAf,CAAsBC,oBAA1B,EAAgD;AAC5C,yBAAKC,IAAL,GAAY,KAAKC,EAAL,CAAQ,EAAEC,MAAM,WAAR,EAAqBC,QAAQ,KAA7B,EAAR,CAAZ;;AAGA,wBAAIC,kBAAkB,KAAKH,EAAL,CAAQ,EAAEC,MAAM,QAAR,EAAkBC,QAAQ,KAA1B,EAAiCE,IAAI,KAAKjB,UAAL,CAAgBG,UAArD,EAAiEA,YAAY,KAAKH,UAAL,CAAgBG,UAA7F,EAAR,CAAtB;AACAa,oCAAgBE,CAAhB,GAAoB,KAAKd,MAAL,CAAYe,KAAZ,GAAoB,CAApB,GAAwBH,gBAAgBG,KAAhB,GAAwB,CAApE;AACAH,oCAAgBI,CAAhB,GAAoB,KAAKhB,MAAL,CAAYiB,MAAZ,GAAqB,CAArB,GAAyBL,gBAAgBK,MAAhB,GAAyB,CAAtE;AACA,yBAAKT,IAAL,CAAUU,QAAV,CAAmBN,eAAnB;;AAMA,yBAAKJ,IAAL,CAAUW,OAAV,CAAkBhB,OAAlB,CAA0B,UAACiB,KAAD,EAAW;AACjC,+BAAKpB,MAAL,CAAYqB,WAAZ,CAAwB,OAAKb,IAA7B;AACAc,iCAASC,cAAT,CAAwBC,cAAxB;AAEA,+BAAKvB,SAAL,CAAewB,QAAf;AAIH,qBARD;AASA,yBAAKzB,MAAL,CAAYkB,QAAZ,CAAqB,KAAKV,IAA1B;AACH,iBAvBD,MAwBK;AACD,yBAAKP,SAAL,CAAewB,QAAf;AACH;AACJ;;;;;;sBA9CgB9B,W","file":"StartButton.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\n/**\n* Show a button to start application, only if needed by context.\n* Some devices/browsers like ipad/safari need at less one user's action to accept to play sounds and videos. In these cases, this button is showed to launch game, forcing user to make a first click, enabling behind sounds and videos use.\n*/\nexport default class StartButton extends Component {\n    /**\n    * @param {object} dataObject\n    * @param {string} dataObject.resourceID - resourceID of visualcomponent to use.\n    * @param {Container} dataObject.target -  target view\n    * @param {function} dataObject.onstarted - called when clicked or if StartButton not needed in context.\n    */\n    constructor(dataObject) {\n        super(Object.assign({\n            resourceID: \"START_BUTTON\",\n            target: null,\n            onstarted: evt => { }\n        }, dataObject));\n    }\n    _create() {\n        super._create();\n        this.target = this.dataObject.target;\n        this.addEventDispatcher(\"onstarted\");\n        this.onstarted.addOnce(this.dataObject.onstarted);\n        if (this.jx.config.system.needUserActionToWork) {\n            this.view = this.cc({ type: \"Container\", render: \"DOM\" });\n            // var background = this.cc({type: \"Shape\", color: \"#ffffff\", alpha: 0.3, width: this.target.width, height: this.target.height});\n            // this.view.addChild(background);\n            var ipadStartButton = this.cc({ type: \"Visual\", render: \"DOM\", id: this.dataObject.resourceID, resourceID: this.dataObject.resourceID });\n            ipadStartButton.x = this.target.width / 2 - ipadStartButton.width / 2;\n            ipadStartButton.y = this.target.height / 2 - ipadStartButton.height / 2;\n            this.view.addChild(ipadStartButton);\n            // this.view.view.on(\"click\", function() {\n            // \tthis.target.removeChild(this.view);\n            // \t//this.onstarted.dispatch();\n            // \tthis.dataObject.onstarted.call(this);\n            // }.bind(this));\n            this.view.onclick.addOnce((event) => {\n                this.target.removeChild(this.view);\n                createjs.WebAudioPlugin.playEmptySound(); // for unmute sounds on IOS\n                //this.dataObject.onstarted()\n                this.onstarted.dispatch();\n                //$(\"#videoTest\")[0].play();\n                //this.dataObject.onstarted.call(this);\n                //this.dataObject.video.play();\n            });\n            this.target.addChild(this.view);\n        }\n        else {\n            this.onstarted.dispatch();\n        }\n    }\n}\n"]}