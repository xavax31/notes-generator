{"version":3,"sources":["../../../../src/jx/comps/text/TextMultiRender.js"],"names":["TextMultiRender","dataObject","Object","assign","text","maxWidth","style","_style","fontFamily","fontSize","fontWeight","fontStyle","color","textAlign","borderColor","borderStyle","view","createjs","Shape","graphics","beginFill","setStrokeStyle","beginStroke","drawRoundRectComplex","setBounds","domView","cc","render","type","console","log","alpha","lineWidth","resourceID","resource","jx","db","findOne","id","data","_ready","on","$","proxy","_clicked","_rollover","_rollout","_mouseup","_mousedown","_mousemove","removeAllEventListeners","styleObject","value","rotation","x","y","getTransformedBounds","actualWidth","width","scaleX","ratio","actualHeight","height","scaleY","_anchorX","regX","anchorX","_anchorY","regY","anchorY","mod","extendsFrom","mixin","_initialise"],"mappings":"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","file":"TextMultiRender.js","sourcesContent":["import VisualComponentCJS from \"jx/comps/visualcomponent/VisualComponentCJS\";\nexport default class TextMultiRender extends VisualComponentCJS {\n    constructor(dataObject) {\n        super(Object.assign({\n            text: \"\",\n            maxWidth: null,\n            style: null\n        }, dataObject));\n    }\n    static initialiseMod(mod) {\n        mod.extendsFrom(\"VisualComponent\");\n        mod.mixin([\"_initialise\", \"_createView\", \"text\", \"style\"], TextMultiRender, \"Text\");\n        mod._initialise();\n    }\n    _create() {\n        super._create();\n        this._style = {\n            fontFamily: \"Arial\",\n            fontSize: 12,\n            fontWeight: \"normal\",\n            fontStyle: \"normal\",\n            color: \"#000000\",\n            textAlign: \"left\",\n            borderColor: \"#000000\",\n            borderStyle: null\n        };\n        this.view = new createjs.Shape();\n        this.view.graphics.beginFill(\"#000000\").setStrokeStyle(1, \"round\", \"round\", 10, true).beginStroke(\"#000000\").drawRoundRectComplex(0, 0, 100, 100, 1, 1, 1, 1);\n        this.view.setBounds(0, 0, 100, 100);\n        this.domView = this.cc(Object.assign(this.dataObject, { render: \"DOM\", type: \"TextDOM\" }));\n        console.log(this.domView);\n    }\n    _initSync() {\n        super._initSync();\n        this.view.alpha = 0.4;\n        this.maxWidth = this.dataObject.maxWidth;\n        this.view.lineWidth = this.maxWidth;\n        // this.maxWidth = this.dataObject.maxWidth;\n        // this.view.maxWidth = this.maxWidth;\n        this.style = this.dataObject.style || this._style;\n        // set text\n        if (this.dataObject.resourceID != null) {\n            var resource = this.jx.db.findOne({ id: this.dataObject.resourceID });\n            this.text = resource.data;\n        }\n        else if (this.dataObject.text) {\n            this.text = this.dataObject.text;\n        }\n        this._ready = true;\n    }\n    set style(styleObject) {\n        this.domView.style = styleObject;\n    }\n    set text(value) {\n        this.domView.text = value;\n    }\n    get text() {\n        return this.domView.text;\n    }\n    /** @type {number} */\n    set rotation(value) {\n        this.view.rotation = value;\n        this.domView.rotation = this.rotation;\n    }\n    /** @type {number} */\n    get rotation() {\n        return this.view.rotation;\n    }\n    /** @type {number} */\n    set x(value) {\n        console.log(value, this.x);\n        this.view.x = value;\n        this.domView.x = value;\n    }\n    /** @type {number} */\n    get x() {\n        return this.view.x;\n    }\n    /** @type {number} */\n    set y(value) {\n        this.view.y = value;\n        this.domView.y = value;\n    }\n    /** @type {number} */\n    get y() {\n        return this.view.y;\n    }\n    set width(value) {\n        if (this.view.getTransformedBounds()) {\n            var actualWidth = this.view.getTransformedBounds().width;\n            var scaleX = this.view.scaleX;\n            var ratio = value / actualWidth;\n            this.view.scaleX *= ratio;\n        }\n        this.domView.width = this.width;\n    }\n    get width() {\n        if (this.view.getTransformedBounds()) {\n            return this.view.getTransformedBounds().width;\n        }\n        return 0;\n    }\n    set height(value) {\n        if (this.view.getTransformedBounds()) {\n            var actualHeight = this.view.getTransformedBounds().height;\n            var scaleY = this.view.scaleY;\n            var ratio = value / actualHeight;\n            this.view.scaleY *= ratio;\n        }\n        this.domView.height = this.height;\n    }\n    get height() {\n        if (this.view.getTransformedBounds()) {\n            return this.view.getTransformedBounds().height;\n        }\n        return 0;\n    }\n    _addListeners() {\n        //this._removeListeners();\n        this.view.on(\"click\", $.proxy(this._clicked, this));\n        this.view.on(\"rollover\", $.proxy(this._rollover, this));\n        this.view.on(\"rollout\", $.proxy(this._rollout, this));\n        this.view.on(\"pressup\", $.proxy(this._mouseup, this));\n        this.view.on(\"mousedown\", $.proxy(this._mousedown, this));\n        this.view.on(\"pressmove\", $.proxy(this._mousemove, this));\n    }\n    _removeListeners() {\n        this.view.removeAllEventListeners();\n    }\n    set anchorX(value) {\n        this._anchorX = value;\n        this.view.regX = this._anchorX; //*this.width;\n        //this.rotation = this.rotation;\n        this.domView.anchorX = this.anchorX;\n    }\n    set anchorY(value) {\n        this._anchorY = value;\n        this.view.regY = this.anchorY; //* this.height;\n        this.domView.anchorY = this.anchorY;\n    }\n    set anchor(value) {\n        this.anchorY = value;\n        this.anchorX = value;\n        this.domView.anchorX = this.anchorX;\n        this.domView.anchorY = this.anchorY;\n    }\n    get anchorX() {\n        return this._anchorX;\n    }\n    get anchorY() {\n        return this._anchorY;\n    }\n    get anchor() {\n        return { anchorX: this.anchorX, anchorY: this.anchorY };\n    }\n}\n"]}