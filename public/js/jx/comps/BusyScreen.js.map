{"version":3,"sources":["../../../src/jx/comps/BusyScreen.js"],"names":["instance","singletonEnforcer","BusyScreen","jx","onclick","signals","Signal","_spinner","window","_splashscreen","$","find","_killed","opts","lines","length","width","radius","scale","corners","color","opacity","rotate","direction","speed","trail","fps","zIndex","className","top","left","shadow","hwaccel","position","target","document","body","Spinner","spin","console","log","stop","height","css","mousedown","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,QAAIA,WAAW,IAAf;AACA,QAAIC;AAAA;AAAA,KAAJ;;QAEMC,U;AACF,kCAAoB;AAAA,gBAANC,EAAM,QAANA,EAAM;;AAAA;;AAChB,iBAAKA,EAAL,GAAUA,EAAV;;AAEA,iBAAKC,OAAL,GAAe,IAAIC,QAAQC,MAAZ,EAAf;AACA,iBAAKC,QAAL,GAAgBC,OAAO,YAAP,CAAhB;AACA,iBAAKC,aAAL,GAAqBC,EAAE,MAAF,EAAUC,IAAV,CAAe,eAAf,CAArB;AAEH;;;;mCACM;AACH,oBAAI,KAAKC,OAAT,EACI;AACJ,qBAAKA,OAAL,GAAe,IAAf;AACA,qBAAKL,QAAL,GAAgBC,OAAO,YAAP,IAAuB,IAAvC;AACA,qBAAKL,EAAL,GAAU,IAAV;AACH;;;yCAIY;AACT,oBAAIU,OAAO;AACPC,2BAAO,EADA;AAGPC,4BAAQ,EAHD;AAKPC,2BAAO,CALA;AAOPC,4BAAQ,EAPD;AASPC,2BAAO,CATA;AAWPC,6BAAS,CAXF;AAaPC,2BAAO,MAbA;AAePC,6BAAS,CAfF;AAiBPC,4BAAQ,CAjBD;AAmBPC,+BAAW,CAnBJ;AAqBPC,2BAAO,CArBA;AAuBPC,2BAAO,EAvBA;AAyBPC,yBAAK,EAzBE;AA2BPC,4BAAQ,GA3BD;AA6BPC,+BAAW,SA7BJ;AA+BPC,yBAAK,KA/BE;AAiCPC,0BAAM,KAjCC;AAmCPC,4BAAQ,KAnCD;AAqCPC,6BAAS,KArCF;AAuCPC,8BAAU,UAvCH,EAAX;AAyCA,oBAAIC,SAASC,SAASC,IAAtB;AACA,qBAAK7B,QAAL,GAAgB,IAAI8B,OAAJ,CAAYxB,IAAZ,CAAhB;AACH;;;mCACM;AACH,qBAAKN,QAAL,CAAc+B,IAAd,CAAmBH,SAASC,IAA5B;AACH;;;+CACkB;AAEf,qBAAK7B,QAAL,CAAc+B,IAAd,CAAmBH,SAASC,IAA5B;AACH;;;0CACa;AACVG,wBAAQC,GAAR,CAAY,aAAZ,EAA2B,KAAKjC,QAAL,KAAkBC,OAAO,YAAP,CAA7C;AACA,qBAAKD,QAAL,CAAckC,IAAd;AACH;;;mDAC4C;AAAA,yCAA3BC,MAA2B;AAAA,oBAA3BA,MAA2B,gCAAlB,KAAkB;AAAA,oBAAXtC,OAAW,SAAXA,OAAW;;AACzC,qBAAKK,aAAL,CAAmBE,IAAnB,CAAwB,WAAxB,EAAqCA,IAArC,CAA0C,QAA1C,EAAoDgC,GAApD,CAAwD,QAAxD,EAAkED,MAAlE;AACA,qBAAKjC,aAAL,CAAmBE,IAAnB,CAAwB,WAAxB,EAAqCgC,GAArC,CAAyC,SAAzC,EAAoD,QAApD;AACA,qBAAKlC,aAAL,CAAmBE,IAAnB,CAAwB,WAAxB,EAAqCgC,GAArC,CAAyC,QAAzC,EAAmD,SAAnD;AACA,qBAAKlC,aAAL,CAAmBkC,GAAnB,CAAuB,QAAvB,EAAiC,SAAjC;AACA,qBAAKlC,aAAL,CAAmBmC,SAAnB,CAA6BxC,OAA7B;AAIH;;;mCACM;AACH,qBAAKG,QAAL,CAAckC,IAAd;AACA,qBAAKhC,aAAL,CAAmBoC,MAAnB;AACH;;;0CAxEoB;AAAE,oBAAI,CAAC,KAAK7C,QAAL,CAAL,EAAqB;AACxC,yBAAKA,QAAL,IAAiB,IAAIE,UAAJ,CAAeD,iBAAf,CAAjB;AACH,iBAAC,OAAO,KAAKD,QAAL,CAAP;AAAwB;;;;;;sBAwEfE,U","file":"BusyScreen.js","sourcesContent":["let instance = null;\nlet singletonEnforcer = class SingetonEnforcer {\n};\nclass BusyScreen {\n    constructor({ jx }) {\n        this.jx = jx;\n        //if(enforcer != singletonEnforcer) throw \"Cannot construct singleton\";\n        this.onclick = new signals.Signal();\n        this._spinner = window[\"JXLoadAnim\"];\n        this._splashscreen = $(\"body\").find('#splashscreen');\n        // this.initialize();\n    }\n    kill() {\n        if (this._killed)\n            return;\n        this._killed = true;\n        this._spinner = window[\"JXLoadAnim\"] = null;\n        this.jx = null;\n    }\n    static getInstance() { if (!this[instance]) {\n        this[instance] = new BusyScreen(singletonEnforcer);\n    } return this[instance]; }\n    initialize() {\n        var opts = {\n            lines: 12 // The number of lines to draw\n            ,\n            length: 10 // The length of each line\n            ,\n            width: 5 // The line thickness\n            ,\n            radius: 10 // The radius of the inner circle\n            ,\n            scale: 3 // Scales overall size of the spinner\n            ,\n            corners: 2 // Corner roundness (0..1)\n            ,\n            color: '#eee' // #rgb or #rrggbb or array of colors\n            ,\n            opacity: 0 // Opacity of the lines\n            ,\n            rotate: 0 // The rotation offset\n            ,\n            direction: 1 // 1: clockwise, -1: counterclockwise\n            ,\n            speed: 1 // Rounds per second\n            ,\n            trail: 60 // Afterglow percentage\n            ,\n            fps: 20 // Frames per second when using setTimeout() as a fallback for CSS\n            ,\n            zIndex: 2e9 // The z-index (defaults to 2000000000)\n            ,\n            className: 'spinner' // The CSS class to assign to the spinner\n            ,\n            top: '50%' // Top position relative to parent\n            ,\n            left: '50%' // Left position relative to parent\n            ,\n            shadow: false // Whether to render a shadow\n            ,\n            hwaccel: false // Whether to use hardware acceleration\n            ,\n            position: 'absolute' // Element positioning\n        };\n        var target = document.body;\n        this._spinner = new Spinner(opts); //(target);  \n    }\n    show() {\n        this._spinner.spin(document.body);\n    }\n    showSplashScreen() {\n        //$(\"body\").append('<div id=\"splashscreen\"  class=\"center-content\"  style=\"width: 100%; height: 100%;\"><img class=\"imgScreen\" style=\"max-height: 100%; max-width: 100%; box-sizing: border-box; padding: 0px;\" src=\"assets/images/SPLASHSCREEN.png\"></div>');\n        this._spinner.spin(document.body);\n    }\n    hideSpinner() {\n        console.log(\"hidespinner\", this._spinner === window[\"JXLoadAnim\"]);\n        this._spinner.stop();\n    }\n    showStartButton({ height = \"80%\", onclick }) {\n        this._splashscreen.find('#startBTN').find('#image').css(\"height\", height);\n        this._splashscreen.find('#startBTN').css(\"display\", \"inline\");\n        this._splashscreen.find('#startBTN').css(\"cursor\", \"pointer\");\n        this._splashscreen.css(\"cursor\", \"pointer\");\n        this._splashscreen.mousedown(onclick);\n        // this._splashscreen.mousedown(()=>{\n        //     this.onclick.dispatch({target: this});\n        // });\n    }\n    hide() {\n        this._spinner.stop();\n        this._splashscreen.remove();\n    }\n}\nexport default BusyScreen;\n"]}