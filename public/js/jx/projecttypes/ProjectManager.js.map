{"version":3,"sources":["../../../src/jx/projecttypes/ProjectManager.js"],"names":["ProjetManager","dataObject","locked","hooks","beforeBuild","afterBuild","addEventDispatcher","console","log","editViewType","_functionnalities","info","functionnalityID","indexOf","onFinished","i","gabarit","length","id","projectGroupChildren","children","projectInfos","value","jx","tools","mergeObjectIn","project","engine","editor","openTerminal","url","gitInitWithBitBucketLink","evt","popup","title","content","buttons","close","label","onclose","dropzone","cc","type","rootPath","dom","find","rid","callback","typeExport","user","lock","host","callMethod","result","onlock","dispatch","target","onunlock","name","refreshLocks","execBash2","openFile","success","alert","execBash","commandline","rootDir","getCurrentCommit","openURL","encodeURIComponent","output","popupContent","width","popupReload","$","click","currentTarget","attr","request","JSON","parse","event","action","params","undefined","deleteDir","appData","listVersions","versions","stdout","hookID","method","push","error","_callHooks","index"],"mappings":"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","file":"ProjectManager.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\nimport ProjectDataObject from \"jx/core/dataobjects/ProjectDataObject\";\nexport default class ProjetManager extends Component {\n    constructor(dataObject) {\n        super(dataObject);\n        this.locked = false;\n        this.hooks = {\n            beforeBuild: [],\n            afterBuild: []\n        };\n        this.addEventDispatcher(\"onlock\", \"onunlock\");\n    }\n    _create() {\n        console.log(\"ProjetManager create\");\n        super._create();\n        this.editViewType = \"jx/projecttypes/ProjectEditView\";\n        this.addEventDispatcher(\"onevent\");\n        this._functionnalities = [\"editGabarit\", \"openProjectDir\", \"openTerminal\", \"openSublimeProject\", \"openVisualCodeProject\", \"serverSyncDial\", \"pullProject\", \"pushProject\", \"pushProjectSrc\", \"save\", \"testBtnDev\", \"generateAPIDoc\", \"showAPIDoc\", \"extraActionsGroup\"];\n        this.info = new ProjectDataObject();\n    }\n    hasFunctionnality(functionnalityID) {\n        return (this._functionnalities.indexOf(functionnalityID) != -1);\n    }\n    load(onFinished) {\n    }\n    save(onFinished) {\n    }\n    /**\n     * Refresh this.info object depends of gabarit json\n     */\n    refreshInfo() {\n        for (var i = 0; i < this.info.gabarit.length; i++) {\n            if (this.info.gabarit[i].id == \"Informations\") {\n                var projectGroupChildren = this.info.gabarit[i].children;\n                break;\n            }\n        }\n        ;\n        var projectInfos = {};\n        for (var i = 0; i < projectGroupChildren.length; i++) {\n            projectInfos[projectGroupChildren[i].id] = projectGroupChildren[i].value;\n        }\n        ;\n        this.jx.tools.mergeObjectIn(this.info, projectInfos.project);\n        this.info.engine = projectInfos.engine;\n    }\n    openTerminal() {\n        this.jx.editor.openTerminal(this.info.url);\n    }\n    gitInitWithBitBucketLink() {\n        this.jx.editor.gitInitWithBitBucketLink({ url: this.info.url }, evt => {\n            console.log(evt);\n        });\n    }\n    /**\n     * Show the dropbox popup that allows to upload/download shared files associated with project but that have not assigned field in editor.\n     */\n    dropbox() {\n        var popup = this.jx.editor.popup({\n            title: \"Zone de partage\",\n            content: \"<div id='dropbox1'  style='height:50px;background-color: #00FF00'></div>\",\n            buttons: {\n                close: { label: \"Close\" }\n            },\n            onclose: evt => { }\n        });\n        var dropzone = this.cc({ type: \"editionitems.DropFilesZone\", rootPath: this.info.url, dom: popup.find(\"#dropbox1\") });\n    }\n    /** Show preview of project or item rid */\n    preview(rid = null) {\n    }\n    /** */\n    export(callback, typeExport = \"Mix\") {\n        //callback(result);\n    }\n    /**  */\n    createIndependantProject(callback = () => { }) {\n        //callback(result);\n    }\n    refreshLocks({ url, user, lock = null }) {\n        this.jx.editor.host.callMethod(\"refreshLocks\", { url, user, lock }, evt => {\n            if (evt.result == \"success\") { // project is locked by this user\n                this.locked = this.jx.editor.user;\n                this.onlock.dispatch({ target: this, locked: this.locked });\n            }\n            else if (evt.result == \"locked\") { // project is locked by OTHER user\n                this.locked = evt.user;\n                this.onlock.dispatch({ target: this, locked: this.locked });\n            }\n            else { // project not locked\n                this.locked = false;\n                this.onunlock.dispatch({ target: this, locked: this.locked });\n            }\n        });\n    }\n    setAsLocked({ name }) {\n        if (name == this.jx.editor.user.name) {\n            this.locked = this.jx.editor.user;\n        }\n        else {\n            this.locked = { name };\n        }\n        this.onlock.dispatch({ target: this, locked: this.locked });\n    }\n    setAsUnlocked() {\n        this.locked = false;\n        this.onunlock.dispatch({ target: this, locked: this.locked });\n    }\n    /**   {user:'username', group:\"usergroup\"} */\n    lock(callback) {\n        this.jx.editor.refreshLocks({ url: this.info.url, user: this.jx.editor.user, lock: true }, (evt) => {\n            if (evt.result == \"success\") {\n                this.locked = this.jx.editor.user;\n            }\n            else {\n                this.locked = evt.user;\n            }\n            callback(evt);\n            this.onlock.dispatch({ target: this, locked: this.locked });\n        });\n    }\n    /**   {user:'username', group:\"usergroup\"} */\n    unlock(callback) {\n        this.jx.editor.refreshLocks({ url: this.info.url, user: this.jx.editor.user, lock: false }, (evt) => {\n            if (evt.result == \"success\") {\n                this.locked = false;\n            }\n            callback(evt);\n            this.onunlock.dispatch({ target: this, locked: this.locked });\n        });\n    }\n    /**  */\n    openProjectDir() {\n        this.jx.editor.execBash2(\"open_project_dir.sh -p \" + this.info.url, evt => {\n        });\n    }\n    /**  */\n    openSublimeProject() {\n        this.jx.editor.openFile({ url: this.info.url + \"/project.sublime-project\" }, evt => {\n            if (!evt.success) {\n                this.jx.editor.alert({ title: \"Project file not found\", content: \"project.sublime-project file not found in project directory.\" });\n            }\n            ;\n        });\n    }\n    /**  */\n    openVisualCodeProject() {\n        this.jx.editor.execBash({ commandline: \"code .\", rootDir: this.info.url }, evt => {\n        });\n    }\n    getCurrentGitCommit(callback = evt => { }) {\n        this.jx.editor.getCurrentCommit({ url: this.info.url }, evt => {\n            // console.log(\"GIT\", evt);\n            callback(evt);\n        });\n    }\n    /** sync project */\n    goToRemoteProjectURL() {\n        this.jx.tools.openURL(\"http://dev.aws.milan.fr/editor/?a=edit&id=\" + this.info.id + \"&url=\" + encodeURIComponent(this.info.url));\n        // this.jx.editor.execBash2(\"pull_project.sh -l \" + this.info.url + \" -s \" +  this.info.url, evt=>{\n        //       })\n    }\n    /** sync project */\n    pullProject() {\n        this.jx.editor.execBash2(\"pull_project.sh -l \" + this.info.url + \" -s \" + this.info.url, evt => {\n        });\n    }\n    /** sync project */\n    pushProject() {\n        this.jx.editor.execBash2(\"push_project.sh -l \" + this.info.url + \" -s \" + this.info.url, evt => {\n        });\n        // this.getCurrentGitCommit(evt=>{\n        // \tthis.jx.db.saveJSON(this.info.url + \"/etc/gitversion.json\", evt, (evt)=>{\n        // \t});\n        // }); \n    }\n    /** sync project */\n    pushProjectSrc() {\n        this.jx.editor.execBash({\n            commandline: \"push_project_src.sh -l \" + this.info.url + \" -s \" + this.info.url + \"\",\n            output: \"new\"\n        }, evt => {\n        });\n    }\n    /** Export project */\n    serverSyncDial() {\n        //console.info(\"serverInfos\", serverInfos);\n        let popupContent = `\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t\t<h4>Accéder à la page d'édition sur le serveur</h4>\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default label-info btn-lg small\" style=\"color:#000000;background-color:#27fd00\" title=\"Accéder à la page d'édition sur le serveur\" id=\"goToRemoteProjectURL\"><span class=\"fa fa-eye\"></span></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t    <hr>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t\t<h4>Envoyer vers le serveur</h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\n\t\t\t    \t\t<div style=\"font-size:14px\">TOUT</div>\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default label-info btn-lg\" title=\"Envoyer vers le serveur\" id=\"pushProject\", style= \"margin-bottom:20px\"><span class=\"fa fa-share-square-o\"></span></button>\n\n\t\t\t    \t\t<div style=\"font-size:14px\">CODE ONLY</div>\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default label-info btn-lg\" title=\"Envoyer vers le serveur (code seulement)\" id=\"pushProjectSrc\"><span class=\"fa fa-share-square-o\"></span><span class=\"fa fa-file-code-o\"></span></button>\n\t\t\t    \t</div>\n\t\t\t    </div>\n\n\t\t\t    <hr>\n\t\t\t    \n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t\t<h4>Récupérer du serveur</h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default label-info btn-lg\" title=\"Récupérer du serveur\" id=\"pullProject\"><span class=\"fa fa-level-down\"></span></button>\n\t\t\t    \t</div>\n\t\t\t    </div>\n\n\t\t\t    <hr>\n\t\t\t    \n\n\t\t`;\n        var popup = this.jx.editor.popup({ title: \"Synchronisation avec le serveur\", content: popupContent, width: 700, buttons: {}, onclose: evt => { } });\n        var popupReload = () => {\n            // popup.modal(\"hide\");\n            // this.exportDial(appData)\n        };\n        $(popup).find(\".btn\").click((evt) => {\n            if ($(evt.currentTarget).attr(\"data-action\")) {\n                var request = JSON.parse($(event.currentTarget).attr(\"data-action\"));\n            }\n            else {\n                request = { action: event.currentTarget.id, params: undefined };\n            }\n            switch (request.action) {\n                default:\n                    if (this[request.action])\n                        this[request.action](request, evt => { });\n            }\n        });\n        // popup.modal('hide') // close popup\n    }\n    /** transpil project */\n    transpilProject() {\n        this.jx.editor.deleteDir(this.info.url + \"/public/js/src\", () => {\n            this.jx.editor.execBash2(\"transpil_project.sh -u \" + this.info.url, evt => {\n            });\n        });\n    }\n    /** Export project */\n    exportProject(appData) {\n    }\n    /** */\n    downloadBuild() {\n    }\n    /**  */\n    listEngineVersions() {\n        this.jx.editor.listVersions(evt => { console.log(evt.versions); });\n    }\n    showAPIDoc() {\n        jx.tools.openURL(this.info.url + \"/doc\", \"DOC - \" + this.info.id);\n    }\n    generateAPIDoc() {\n        this.jx.editor.execBash2(\"jxes6doc_generate_project.sh -u \" + this.info.url, evt => {\n            console.log(evt.stdout);\n        }, \"new\");\n    }\n    extraAction1() {\n        console.log(\"call extraAction1\");\n        this.jx.editor.host.callMethod(\"extraAction1\", { info: this.info }, result => {\n            console.log(\"result extraAction1: \", result);\n        });\n    }\n    addHook({ hookID, method }) {\n        if (this.hooks[hookID]) {\n            this.hooks[hookID].push(method);\n        }\n        else {\n            console.error(\"hook with ID\", hookID, \"not exists\");\n        }\n    }\n    callHooks({ hookID }, callback) {\n        if (this.hooks[hookID]) {\n            this._callHooks({ hookID, callback });\n        }\n        else {\n            console.error(\"hook with ID\", hookID, \"not exists\");\n            callback();\n        }\n    }\n    _callHooks({ hookID, callback, index = -1 }) {\n        if (index < this.hooks[hookID].length - 1) {\n            index++;\n            this.hooks[hookID][index](() => {\n                this._callHooks({ hookID, callback, index });\n            });\n        }\n        else {\n            callback();\n        }\n    }\n}\n"]}