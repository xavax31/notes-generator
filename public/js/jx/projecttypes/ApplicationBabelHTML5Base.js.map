{"version":3,"sources":["../../../src/jx/projecttypes/ApplicationBabelHTML5Base.js"],"names":["ApplicationBabelHTML5Base","dataObject","console","log","_functionnalities","push","info","url","projectURL","projectJXData","testURL","azoomeeBuildURL","azoomeeDefaultServerURL","_bayamTestOpts","prefix","numBubbles","json","id","gabarit","idArr","split","item","children","i","length","_getInGabarit","warn","type","childrenG","onFinished","importer","importConfig","projectData","gabaritJSON","jx","tools","mergeObjectIn","projectInformations","project","engine","modules","target","exporter","exportConfig","rid","screen","generateHTMLPage","name","title","jxVersion","destDir","debug","usejxMinified","openURL","config","system","container","device","support","callback","editor","popup","content","buttons","ok","label","close","onclose","evt","action","popup2","alert","closable","updateInternJX","modal","versionFramework","mode","pathFramework","pathFrameworkLibs","jxPath","host","callMethod","filename","result","getCurrentCommit","saveText","JSON","stringify","getEngineVersion","getDiff","db","loadText","projectJXVersion","parse","currentJXVersion","outputStr","interval","Date","date","getTime","commit","getGitDiff","replace","context","pathJXLauncher","jxMinifyFromConfig","jxMinify","undefined","jxsrc","mainCtrlSrc","templateURL","templateOldHtml","templateHtml","pageIndex","overrideJXConfig","_getJXConfigInHTML","replaceParam","_setNewJXConfigInHTML","getInGabarit","value","backgroundColor","generatedURL","htmlContent","regex","found","match","resultObj","lines","split2","key","trim","stringOverride","obj","patternValue","defaultValue","createIfnotExists","isNaN","str1","_removeLimitsQuotes","str2","str","versionCodeApp","params","linkIndex","no","slotURL","options","extExclude","fileExclude","dirExclude","treeOnly","merge","deleteSource","recursive","cloneDir","sourcePath","destPath","_generateHTMLPages","saveJSON","filter","getToday","fr","utc","zip","exportURL","azoomeePackageURL","azoomeeServerURL","azoomeeConfig","deleteFile","deleteDir","download","prefixZip","version","internPath","optionsJX","optionsLibs","paramsCloneProject","appData","filesToTest","src","filesExist","projectPath","filePathArray","_exportDial","serverInfos","bubbleBayam","bubbleNo","enabledPreview","enabledDownload","link","exists","display","userIsGroup","bubblesBayam","popupContent","width","popupReload","exportDial","$","find","change","currentTarget","save","click","attr","request","event","callHooks","hookID","sendToTest","sendToBayamBubble","sendToAzoomee","buildProjectIntern","buildProjectLastReleaseJX","downloadFullProject"],"mappings":"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","file":"ApplicationBabelHTML5Base.js","sourcesContent":["import ProjetManager from \"jx/projecttypes/ProjectManager\";\nexport default class ApplicationBabelHTML5Base extends ProjetManager {\n    constructor(dataObject) {\n        super(dataObject);\n    }\n    _create() {\n        console.log(\"ApplicationBabelHTML5Base create\");\n        super._create();\n        this._functionnalities.push(\"previewDev\", \"preview\", \"previewDebug\", \"transpilProject\", \"updateInternJX\", \"showVersion\", \"compareJSON\");\n        this.info.url = this.dataObject.url;\n        this.info.projectURL = this.dataObject.url; // don't use\n        this.info.projectJXData = this.dataObject.projectJXData; // don't use\n        this.testURL = \"/builds\" + this.info.url;\n        this.azoomeeBuildURL = \"/builds/azoomee\" + this.info.url;\n        this.azoomeeDefaultServerURL = \"https://milan-ressources.com/multimedia/DEMOS_BAYAM/Azoomee\";\n        this._bayamTestOpts = {\n            url: \"/builds/bayam\",\n            prefix: \"link\",\n            numBubbles: 11\n        };\n        this.json = null;\n    }\n    getJSON() {\n        return this.json;\n    }\n    /** */\n    getInGabarit({ id, gabarit = this.info.gabarit }) {\n        console.log(id);\n        console.log(gabarit);\n        var idArr = id.split(\".\");\n        var item;\n        var children = gabarit;\n        for (var i = 0; i < idArr.length; i++) {\n            item = this._getInGabarit({ id: idArr[i], gabarit: children });\n            if (!item) {\n                console.warn(\"getInGabarit\", id, \"not correct\");\n            }\n            else if (item.children) {\n                children = item.children;\n            }\n        }\n        ;\n        return item;\n    }\n    /** */\n    _getInGabarit({ id, gabarit = this.info.gabarit }) {\n        console.log(id);\n        console.log(gabarit);\n        var idArr = id.split(\".\");\n        for (var i = 0; i < idArr.length; i++) {\n            idArr[i];\n        }\n        ;\n        for (var i = 0; i < gabarit.length; i++) {\n            console.log(gabarit[i].id);\n            if (gabarit[i].id == id) {\n                console.log(\"FOUND\");\n                return gabarit[i];\n            }\n            else if (gabarit[i].type == \"Group\") {\n                console.log(\"Group\", gabarit[i].id);\n                var childrenG = this._getInGabarit({ id: id, gabarit: gabarit[i].children });\n                if (childrenG != null) {\n                    return this._getInGabarit({ id: id, gabarit: gabarit[i].children });\n                }\n                ;\n            }\n        }\n        ;\n        return null;\n    }\n    load(onFinished) {\n        this.importer.importConfig(projectData => {\n            console.log(\"config imported\", this);\n            this.json = projectData.gabaritJSON;\n            this.jx.tools.mergeObjectIn(this.info, projectData.projectInformations.project);\n            this.info.engine = projectData.projectInformations.engine;\n            // projectData.modules[0].srcPath = this.info.engine.modulePath;\n            this.info.gabarit = projectData.modules[0].gabarit;\n            onFinished({ target: this });\n        });\n    }\n    save(onFinished) {\n        this.exporter.exportConfig(onFinished);\n        //this.adaptIndexHTMLPage(this.info);\n    }\n    /** Show preview of project */\n    preview(rid = null, screen = null) {\n        let url = this.info.url + \"/public/?d=a\" + (rid ? \"&rid=\" + rid : \"\") + (screen ? \"&screen=\" + screen : \"\");\n        let id = rid || this.info.id;\n        this.generateHTMLPage({\n            name: \"index\", title: this.info.id,\n            jxVersion: \"intern\", destDir: this.info.url + \"/public\", debug: false,\n            usejxMinified: true\n        }, evt => {\n            this.jx.tools.openURL(url, id);\n        });\n        if (this.jx.config.system.container.type == \"browser\" && this.jx.config.system.device.support == \"mobile\") {\n            this.jx.tools.openURL(url, id);\n        }\n        ;\n    }\n    /** Show preview of project */\n    previewDebug(rid = null) {\n        let url = this.info.url + \"/public/index_debug.html?jxsrc=true\" + (rid ? \"&rid=\" + rid : \"\");\n        let id = rid || this.info.id;\n        this.generateHTMLPage({\n            name: \"index_debug\", title: this.info.id + \"_DEBUG\",\n            jxVersion: \"intern\", destDir: this.info.url + \"/public\", debug: true\n        }, evt => {\n            this.jx.tools.openURL(url, id);\n        });\n        if (this.jx.config.system.container.type == \"browser\" && this.jx.config.system.device.support == \"mobile\") {\n            this.jx.tools.openURL(url, id);\n        }\n        ;\n    }\n    /** Show preview of project */\n    previewDev(rid = null) {\n        let url = this.info.url + \"/public/index_dev.html?debug=true&jxsrc=true\" + (rid ? \"&rid=\" + rid : \"\");\n        let id = rid || this.info.id;\n        this.generateHTMLPage({\n            name: \"index_dev\", title: this.info.id + \"_DEV\",\n            jxVersion: \"last_release\", destDir: this.info.url + \"/public\", debug: true\n        }, evt => {\n            this.jx.tools.openURL(url, id);\n        });\n        if (this.jx.config.system.container.type == \"browser\" && this.jx.config.system.device.support == \"mobile\") {\n            this.jx.tools.openURL(url, id);\n        }\n        ;\n    }\n    updateInternJXDialog(callback = evt => { }) {\n        this.jx.editor.popup({\n            title: \"Update Jx version of this project\",\n            content: \"This will replace intern version of jx with the last release. This is irreversible. Make sure to test and validate this update before by using preview dev button<br>\",\n            buttons: {\n                ok: { label: \"Run\" },\n                close: { label: \"Close\" }\n            },\n            onclose: evt => {\n                if (evt.action == \"ok\") {\n                    var popup2 = this.jx.editor.alert({ title: \"Opération en cours\", content: \"Veuillez patienter svp...\", closable: false });\n                    this.updateInternJX(evt => {\n                        popup2.modal('hide');\n                        this.jx.editor.popup({ title: \"Message\", content: \"JX version updated\", onclose: callback });\n                    });\n                }\n            }\n        });\n    }\n    /**\n     * Update project with current jx engine.\n     * @param  {Function} callback\n     * @return {void}\n     */\n    updateInternJX(callback = evt => { }) {\n        console.log(\"updateInternJX\");\n        var versionFramework = \"last_release\"; //this.info.engine[\"jxVersion\"];\n        var mode = versionFramework.split(\":\")[0];\n        var pathFramework;\n        var pathFrameworkLibs;\n        var jxPath;\n        switch (mode) {\n            case \"intern\":\n                pathFrameworkLibs = \"js/lib\";\n                jxPath = \"js/jx\";\n                break;\n            case \"last_release\":\n                pathFramework = \"/dev/mp-framework/current\";\n                pathFrameworkLibs = \"/dev/mp-framework/current/lib\";\n                jxPath = \"/dev/mp-framework/current/engine/build/jx\";\n                break;\n            case \"last_dev\":\n                pathFrameworkLibs = \"/dev/mp-framework/develop/lib\";\n                jxPath = \"/dev/mp-framework/develop/engine/build/jx\";\n                break;\n        }\n        this.jx.editor.host.callMethod(\"updateInternJX\", { filename: this.info.url, pathFramework: pathFramework }, (result) => {\n            console.log(\"updateInternJX OK\", result);\n            this.jx.editor.getCurrentCommit({ url: \"$bobaLastRelease\" }, evt => {\n                console.log(\"GIT\", evt);\n                this.jx.editor.saveText(this.info.url + \"/public/jxversion.json\", JSON.stringify(evt));\n                callback(result);\n            });\n        });\n    }\n    getEngineVersionDial() {\n        this.getEngineVersion(result => {\n            this.jx.editor.popup({ title: \"Version\", content: result });\n        });\n    }\n    getEngineVersion(callback) {\n        // {\"branch\":\"HEAD, release/v1.0\",\"commit\":\"52f6dea\",\"date\":\"Tue Apr 12 02:21:40 2016 +0200\"}\n        var getDiff = false; // need to get diff infos ?\n        this.jx.db.loadText(this.info.url + \"/public/jxversion.json\", evt => {\n            var projectJXVersion = evt ? JSON.parse(evt) : null;\n            this.jx.editor.getCurrentCommit({ url: \"$bobaLastRelease\" }, evt => {\n                console.log(\"GIT\", evt);\n                var currentJXVersion = evt;\n                var outputStr = \"\";\n                outputStr += \"Used engine : \";\n                if (projectJXVersion) {\n                    var interval = new Date(currentJXVersion.date).getTime() - new Date(projectJXVersion.date).getTime();\n                    if (interval == 0) {\n                        outputStr += \" <span class='text-success'>UPDATED</span>\\n\";\n                    }\n                    else if (interval > 0) {\n                        outputStr += \" <span class='text-danger'>NOT UPDATED</span>\\n\";\n                        getDiff = true;\n                    }\n                    else if (interval < 0) {\n                        outputStr += \" More recent than current, check current version\\n\";\n                    }\n                    outputStr += JSON.stringify(projectJXVersion, null, 4);\n                }\n                else {\n                    outputStr += \"none\";\n                }\n                outputStr += \"<br>Current engine : \";\n                outputStr += JSON.stringify(currentJXVersion, null, 4);\n                if (getDiff) {\n                    console.log(\"GITDIFF\", projectJXVersion.commit, currentJXVersion.commit);\n                    this.jx.editor.getGitDiff({ url: \"$bobaLastRelease\", date: projectJXVersion.date }, evt => {\n                        outputStr += \"<br><br>Log : <br><br>\";\n                        outputStr += evt.log;\n                        //console.log(evt);\n                        callback(outputStr.replace(/\\n/g, \"<br>\")\n                            .replace(/commit ([0-9a-f]{8,})/g, \"<span style='color:#87A3E3'>Commit $1</span>\"));\n                    });\n                }\n                else {\n                    callback(outputStr.replace(/\\n/g, \"<br>\")\n                        .replace(/\\[31m/g, \"<span style='color:red'>\")\n                        .replace(/\\[m/g, \"</span>\"));\n                }\n            });\n        });\n    }\n    generateHTMLPage({ name = \"page\", title = \"App\", destDir = null, jxVersion = \"intern\", context = \"\", debug = false, usejxMinified = false }, callback = evt => { }) {\n        var pathFrameworkLibs, jxPath, mode, pathJXLauncher;\n        // determine jxsrc\n        let jxMinifyFromConfig = this.info.engine.jxMinify == undefined ? \"auto\" : this.info.engine.jxMinify;\n        console.log(\"jxMinifyFromConfig\", jxMinifyFromConfig);\n        if (jxMinifyFromConfig == \"always\") {\n            usejxMinified = true;\n        }\n        else if (jxMinifyFromConfig == \"never\") {\n            usejxMinified = false;\n        }\n        var jxsrc = !usejxMinified;\n        console.log(\"adaptIndexHTMLPage\", jxVersion);\n        switch (jxVersion) {\n            case \"intern\":\n                mode = \"prod\";\n                pathFrameworkLibs = \"js/lib\";\n                pathJXLauncher = pathFrameworkLibs + \"/jx/jx.js\";\n                jxPath = \"jx\";\n                break;\n            case \"last_release\":\n                mode = \"dev\";\n                pathFrameworkLibs = \"/dev/mp-framework/current/lib\";\n                pathJXLauncher = pathFrameworkLibs + \"/jx/jx.js\";\n                jxPath = \"/dev/mp-framework/current/engine/build/jx\";\n                break;\n            case \"last_dev\":\n                mode = \"dev\";\n                pathFrameworkLibs = \"/dev/mp-framework/develop/lib\";\n                pathJXLauncher = pathFrameworkLibs + \"/jx/jx.js\";\n                jxPath = \"/dev/mp-framework/develop/engine/build/jx\";\n                break;\n        }\n        var mainCtrlSrc = \"js/src/index.js\";\n        var templateURL = this.info.url + \"/public/index_template.html\";\n        this.jx.db.loadText(templateURL, templateHtml => {\n            // For retro compatibility, clean/adapt index_template and save it if needed.\n            var templateOldHtml = templateHtml;\n            templateHtml = templateHtml.replace(/\\$\\{pathFrameworkLibs\\}\\/jx.js/g, \"${pathJXLauncher}\")\n                .replace(/body bgcolor=\"#FFFFFF\"/g, 'body bgcolor=\"${backgroundColor}\"')\n                .replace(/body bgcolor=\"#000000\"/g, 'body bgcolor=\"${backgroundColor}\"');\n            if (templateOldHtml != templateHtml) {\n                this.jx.db.saveText(templateURL, templateHtml);\n            }\n            ;\n            var pageIndex = templateHtml;\n            // retrieve overrideJXConfig object in HTML\n            let overrideJXConfig = this._getJXConfigInHTML(pageIndex);\n            // set required defaults parameters & values if missing\n            this.replaceParam(overrideJXConfig, \"jxPath\", \"${jxPath}\", jxPath);\n            this.replaceParam(overrideJXConfig, \"jxsrc\", \"${jxsrc}\", jxsrc);\n            this.replaceParam(overrideJXConfig, \"src\", \"${mainCtrlSrc}\", mainCtrlSrc);\n            this.replaceParam(overrideJXConfig, \"mode\", \"${mode}\", mode);\n            this.replaceParam(overrideJXConfig, \"debug\", \"${debug}\", debug);\n            //set optionnals\n            if (context != \"\")\n                this.replaceParam(overrideJXConfig, \"context\", \"${context}\", context);\n            pageIndex = this._setNewJXConfigInHTML(pageIndex, overrideJXConfig);\n            // replaces others patterns in html content\n            pageIndex = pageIndex\n                .replace(/\\$\\{pathFrameworkLibs\\}/g, pathFrameworkLibs)\n                .replace(/\\$\\{pathJXLauncher\\}/g, pathJXLauncher)\n                .replace(/\\$\\{title\\}/g, title)\n                .replace(/\\$\\{backgroundColor\\}/g, this.getInGabarit({ id: \"Informations.engine\" }).value.backgroundColor || \"#000000\");\n            var generatedURL = (destDir ? destDir + \"/\" : this.info.url + \"/public/\") + name + \".html\";\n            this.jx.db.saveText(generatedURL, pageIndex, evt => {\n                console.log(evt);\n                callback({ url: generatedURL });\n            });\n        });\n    }\n    _setParamInOverrideJXConfig() {\n    }\n    _getJXConfigInHTML(htmlContent) {\n        let regex = /var\\s+overrideJXConfig\\s*=\\s*{([\\s\\w:'${},\"\\/.]*)}/i;\n        let found = htmlContent.match(regex);\n        let resultObj = {};\n        if (found != null) {\n            let lines = found[1].replace(/\\s/g, \"\").split(\",\");\n            for (let i = 0; i < lines.length; i++) {\n                let split2 = lines[i].split(\":\");\n                let key = split2[0].trim();\n                let value = split2[1].trim();\n                resultObj[key] = value;\n            }\n        }\n        return resultObj;\n    }\n    _setNewJXConfigInHTML(htmlContent, overrideJXConfig) {\n        let stringOverride = \"\";\n        for (var key in overrideJXConfig) {\n            stringOverride += \"\\t\\t\\t\" + key + \": \" + overrideJXConfig[key] + \",\\n\";\n        }\n        stringOverride = stringOverride.replace(/,\\n$/, \"\"); // remove last comma & \\n\n        let regex = /var\\s+overrideJXConfig\\s*=\\s*{([\\s\\w:'${},\"\\/.]*)}/i;\n        return htmlContent.replace(regex, \"var overrideJXConfig = {\\n\" + stringOverride + \"\\n\\t\\t}\");\n    }\n    _setNewJXConfigInHTMLold(htmlContent, overrideJXConfig) {\n        let regex = /var\\s+overrideJXConfig\\s*=\\s*{([\\s\\w:'${},\"\\/.]*)}/i;\n        return htmlContent.replace(regex, \"var overrideJXConfig = \" + JSON.stringify(overrideJXConfig, null, 8));\n    }\n    replaceParam(obj, key, patternValue, defaultValue, createIfnotExists = false) {\n        if (obj[key] == undefined) {\n            if (createIfnotExists)\n                obj[key] = isNaN(defaultValue) ? \"'\" + defaultValue + \"'\" : defaultValue;\n        }\n        else {\n            let str1 = this._removeLimitsQuotes(obj[key]);\n            let str2 = this._removeLimitsQuotes(patternValue);\n            if (str1 == str2) {\n                obj[key] = isNaN(defaultValue) ? \"'\" + defaultValue + \"'\" : defaultValue;\n            }\n        }\n    }\n    _removeLimitsQuotes(str) {\n        return str\n            .replace(/^\"/, \"\")\n            .replace(/\"$/, \"\")\n            .replace(/^'/, \"\")\n            .replace(/'$/, \"\");\n    }\n    adaptIndexHTMLPage() {\n        var versionFramework = this.info.engine[\"jxVersion\"];\n        var mode = versionFramework.split(\":\")[0];\n        var pathFrameworkLibs;\n        var jxPath;\n        switch (mode) {\n            case \"intern\":\n                pathFrameworkLibs = \"js/lib\";\n                jxPath = \"jx\";\n                break;\n            case \"last_release\":\n                pathFrameworkLibs = \"/dev/mp-framework/current/lib\";\n                jxPath = \"/dev/mp-framework/current/engine/build/jx\";\n                break;\n            case \"last_dev\":\n                pathFrameworkLibs = \"/dev/mp-framework/develop/lib\";\n                jxPath = \"/dev/mp-framework/develop/engine/build/jx\";\n                break;\n        }\n        var versionCodeApp = this.info[\"appCodeVersion\"];\n        var mode = versionCodeApp.split(\":\")[0];\n        var mainCtrlSrc;\n        switch (mode) {\n            case \"intern\":\n                mainCtrlSrc = \"js/src/index.js\";\n                break;\n            case \"last_release\":\n                mainCtrlSrc = \"/archives/milan-presse/moteurs/mini-quiz/master/public/src/index.js\";\n                break;\n            case \"last_dev\":\n                mainCtrlSrc = \"/archives/milan-presse/moteurs/mini-quiz/develop/public/src/index.js\";\n                break;\n        }\n        this.jx.db.loadText(this.info.url + \"/public/index_template.html\", evt => {\n            var pageIndex = evt.replace(/\\$\\{pathFrameworkLibs\\}/g, pathFrameworkLibs)\n                .replace(/\\$\\{jxPath\\}/g, jxPath)\n                .replace(/\\$\\{mainCtrlSrc\\}/g, mainCtrlSrc);\n            this.jx.db.saveText(this.info.url + \"/public/index.html\", pageIndex, evt => {\n                console.log(evt);\n            });\n        });\n    }\n    _generateHTMLPages({ destDir = null, jxVersion = \"intern\", usejxMinified = false, context = \"\" }, callback = evt => { }) {\n        this.generateHTMLPage({ name: \"index\", title: this.info.id, jxVersion, destDir, debug: false, usejxMinified, context }, evt => {\n            this.generateHTMLPage({ name: \"index_debug\", title: this.info.id + \"_DEBUG\", jxVersion, destDir, debug: true, usejxMinified, context }, evt => callback());\n        });\n    }\n    /** */\n    sendToBayamBubble(params = null, callback = evt => { }) {\n        console.log(\"sendToBayamTest\");\n        var linkIndex = params.no;\n        var slotURL = this._bayamTestOpts.url + \"/\" + this._bayamTestOpts.prefix + linkIndex;\n        var options = {\n            date: true,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url + \"/public\",\n            destPath: slotURL,\n            options: options\n        }, result => {\n            console.log(\"buildProject OK\", result);\n            this._generateHTMLPages({ destDir: result.destPath, jxVersion: \"intern\", usejxMinified: true }, evt => {\n                this.jx.db.saveJSON(slotURL + \"/info.json\", this.jx.tools.obj.filter(this.info, { id: null, date: this.jx.tools.date.getToday().fr + \" ( \" + this.jx.tools.date.getToday().utc + \")\" }), evt => {\n                    this.jx.editor.zip({ url: result.destPath }, evt => callback());\n                });\n            });\n        });\n    }\n    /** */\n    sendToTest(params = null, callback = evt => { }) {\n        console.log(\"sendToTest\");\n        var options = {\n            date: true,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"node_modules\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url + \"/public\",\n            destPath: this.testURL,\n            options: options\n        }, result => {\n            console.log(\"buildProject OK\", result);\n            this._generateHTMLPages({ destDir: result.destPath, jxVersion: \"intern\", usejxMinified: true }, evt => callback());\n        });\n    }\n    /** */\n    sendToAzoomee(params = null, callback = evt => { }) {\n        console.log(\"sendToAzoomee\");\n        let exportURL = this.azoomeeBuildURL + \"/\" + this.info.id;\n        let azoomeePackageURL = this.azoomeeServerURL + \"/\" + this.info.id + \"/\" + this.info.id + \".zip\";\n        let azoomeeConfig = {\n            \"name\": this.info.id,\n            \"currentVersion\": 1,\n            \"minVersion\": 1,\n            \"uri\": azoomeePackageURL,\n            \"pathToStartPage\": \"index.html\"\n        };\n        var options = {\n            date: true,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"node_modules\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url + \"/public\",\n            destPath: exportURL,\n            options: options\n        }, result => {\n            console.log(\"buildProject OK\", result);\n            this._generateHTMLPages({ destDir: result.destPath, context: \"azoomee\", jxVersion: \"intern\", usejxMinified: true }, evt => {\n                this.jx.db.saveJSON(this.azoomeeBuildURL + \"/\" + this.info.id + \".json\", azoomeeConfig, () => {\n                    this.jx.editor.deleteFile(result.destPath + \"/index_debug.html\", () => {\n                        this.jx.editor.zip({ url: result.destPath }, evt => {\n                            this.jx.editor.deleteDir(result.destPath, () => {\n                                this.jx.editor.download({ url: this.azoomeeBuildURL, prefixZip: this.info.id + \"_v\" + this.info.version + \"_AZOOMEE\", internPath: \"\", date: false });\n                                callback();\n                            });\n                        });\n                    });\n                });\n            });\n        });\n    }\n    downloadTest() {\n        this.jx.editor.download({ url: this.testURL, prefixZip: this.info.id + \"_TEST\", internPath: this.info.id, date: true });\n    }\n    downloadBayamBubble(params) {\n        this.jx.editor.download({ url: this._bayamTestOpts.url + \"/\" + this._bayamTestOpts.prefix + params.no + \".zip\" });\n    }\n    downloadAzoomee() {\n        //this.jx.editor.download({url: this.testURL, prefixZip: this.info.id + \"_TEST\", internPath: this.info.id, date: true});\n    }\n    previewBayamBubble(params) {\n        this.jx.tools.openURL(this._bayamTestOpts.url + \"/\" + this._bayamTestOpts.prefix + params.no, \"Bayam Bubble_\" + params.no + \" \" + this.info.id);\n    }\n    previewTest() {\n        this.jx.tools.openURL(this.testURL, \"TEST_\" + this.info.id);\n    }\n    /** */\n    downloadFullProject(params = null, callback = evt => { }) {\n        console.log(\"buildProjectIntern\");\n        var options = {\n            date: false,\n            extExclude: [],\n            fileExclude: [],\n            dirExclude: [\"\\.git\", \"node_modules\"],\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url,\n            destPath: \"$temp\" + this.info.url,\n            options: options\n        }, (result) => {\n            console.log(\"cloneFullProject OK\", result);\n            this.jx.editor.download({ url: result.destPath, prefixZip: this.info.id + \"_\" + this.info.version + \"_FULL\", internPath: this.info.id, date: true });\n            callback(result);\n        });\n    }\n    /** */\n    buildProjectIntern(params = null, callback = evt => { }) {\n        console.log(\"buildProjectIntern\");\n        var options = {\n            date: true,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url + \"/public\",\n            destPath: \"$temp\" + this.info.url,\n            options: options\n        }, (result) => {\n            //console.log(\"buildProject OK\", result);\n            this._generateHTMLPages({ destDir: result.destPath, jxVersion: \"intern\", usejxMinified: true }, evt => {\n                this.jx.editor.download({ url: result.destPath, prefixZip: this.info.id + \"_v\" + this.info.version, internPath: this.info.id, date: true });\n                callback(result);\n            });\n        });\n    }\n    /** */\n    buildProjectLastReleaseJX(params = null, callback = evt => { }) {\n        console.log(\"buildProjectLastReleaseJX\");\n        var options = {\n            date: true,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        var optionsJX = {\n            date: false,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            treeOnly: false,\n            merge: true,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        var optionsLibs = {\n            date: false,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            treeOnly: false,\n            merge: true,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url + \"/public\",\n            destPath: \"$temp\" + this.info.url,\n            options: options\n        }, (result) => {\n            console.log(\"buildProject OK\", result);\n            var destPath = result.destPath;\n            this.jx.editor.cloneDir({\n                sourcePath: \"$bobaLastRelease/engine/build\",\n                destPath: destPath + \"/js\",\n                options: optionsJX\n            }, (result) => {\n                this.jx.editor.cloneDir({\n                    sourcePath: \"$bobaLastRelease/lib\",\n                    destPath: destPath + \"/js/lib\",\n                    options: optionsLibs\n                }, (result) => {\n                    console.log(\"buildProject OK\", result);\n                    this._generateHTMLPages({ destDir: destPath, jxVersion: \"intern\" }, evt => {\n                        this.jx.editor.download({ url: destPath, prefixZip: this.info.id + \"_v\" + this.info.version + \"_LAST_JX\", internPath: this.info.id, date: true });\n                        callback(result);\n                    });\n                });\n            });\n        });\n    }\n    /** */\n    buildProject2(params, callback) {\n        console.log(\"buildProject\");\n        var paramsCloneProject = {\n            date: true,\n            extExclude: [\"sublime-project\", \"sublime-workspace\", \"fla\", \"mov\", \"as\", \"rtf\", \"zip\", \"as2proj\", \"pdf\", \"psd\", \"txt\", \"bat\", \"rar\", \"dmg\", \"md\"],\n            fileExclude: [\"publish.js\", \"_panel.html\", \"^index_\", \"^.*_old\", \"^.*_temp\"],\n            dirExclude: [\"^xfl$\", \"^doc$\", \"_sources_medias\", \"\\.git\", \"^Typos$\", \"^.*_old$\", \"^.*_temp$\"],\n            // fichier_reg_exclude: [ ],    // exclude files for wich name matches these regular expressions\n            // dossier_reg_exclude: [],     // exclude directories for wich name matches these regular expressions\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url,\n            destPath: \"$temp\" + this.info.url,\n            options: paramsCloneProject\n        }, (result) => {\n            console.log(\"buildProject OK\", result);\n            this.jx.editor.download({ url: result.destPath, prefixZip: this.info.id, internPath: this.info.id, date: true });\n            callback(result);\n        });\n    }\n    /** */\n    copyProject(params, callback) {\n        console.log(\"buildProject\");\n        var options = {\n            date: true,\n            extExclude: [],\n            fileExclude: [],\n            dirExclude: [],\n            // fichier_reg_exclude: [ ],    // exclude files for wich name matches these regular expressions\n            // dossier_reg_exclude: [],     // exclude directories for wich name matches these regular expressions\n            treeOnly: false,\n            merge: false,\n            deleteSource: false,\n            recursive: 10000 // level of recursivity in directories\n        };\n        this.jx.editor.cloneDir({\n            sourcePath: this.info.url,\n            destPath: \"$temp\" + this.info.url,\n            options: options\n        }, (result) => {\n            console.log(\"buildProject OK\", result);\n            callback(result);\n        });\n    }\n    /** Export project */\n    exportDial(appData) {\n        //-- Bayam bubbles - check existing before show export popup.\n        var numBubbles = this._bayamTestOpts.numBubbles;\n        var filesToTest = [];\n        for (var i = 0; i < numBubbles; i++) {\n            filesToTest.push({ src: \"link\" + i }, { src: \"link\" + i + \".zip\" });\n        }\n        this.jx.editor.filesExist({\n            projectPath: this._bayamTestOpts.url,\n            filePathArray: filesToTest\n        }, evt => {\n            this._exportDial(appData, evt.filePathArray);\n        });\n    }\n    /** Export project */\n    _exportDial(appData, serverInfos) {\n        console.info(\"serverInfos\", serverInfos);\n        var bubbleBayam = (bubbleNo) => {\n            var enabledPreview = \"disabled\";\n            var enabledDownload = \"disabled\";\n            for (var i = 0; i < serverInfos.length; i++) {\n                var link = serverInfos[i];\n                if (link.src == \"link\" + bubbleNo && link.exists) {\n                    enabledPreview = \"\";\n                }\n                else if (link.src == \"link\" + bubbleNo + \".zip\" && link.exists) {\n                    enabledDownload = \"\";\n                }\n                ;\n            }\n            ;\n            var display = (bubbleNo == 0 && this.jx.editor.userIsGroup(\"dev\") == false) ? \"none\" : \"inline\";\n            return `\n\t\t\t\t\t<div  id=\"bubble${bubbleNo}\" class=\"col-xs-2\" style=\"display:${display};width:60px\">\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default label-info\" title=\"Envoyer vers bulle ${bubbleNo}\" id=\"sendToBayamBubble${bubbleNo}\"  data-action='{\"action\": \"sendToBayamBubble\", \"no\": \"${bubbleNo}\"}' ><span class=\"fa fa-share-square-o\"></span>${bubbleNo}</button>\n\n\t\t\t    \t\t<button type=\"button\" ${enabledPreview} class=\"btn btn-default\" title=\"Visualiser le contenu actuel de la bulle\" id=\"previewBayamBubble${bubbleNo}\"  data-action='{\"action\": \"previewBayamBubble\", \"no\": \"${bubbleNo}\"}' ><span class=\"fa fa-eye\"></span></button>\n\n\t\t\t    \t\t<button type=\"button\" ${enabledDownload} class=\"btn btn-default\" title=\"Télécharger le contenu actuel\" id=\"downloadBayamBubble${bubbleNo}\"  data-action='{\"action\": \"downloadBayamBubble\", \"no\": \"${bubbleNo}\"}' ><span class=\"fa fa-download\"></span></button>\n\t\t\t    \t\t\n\t\t\t    \t</div>\n\t\t\t`;\n        };\n        var bubblesBayam = (numBubbles) => {\n            var result = \"\";\n            for (var i = 0; i < numBubbles; i++) {\n                result += bubbleBayam(i);\n            }\n            ;\n            return result;\n        };\n        this.azoomeeServerURL = this.getInGabarit({ id: \"Informations.project\" }).value.azoomeeServerURL || this.azoomeeDefaultServerURL;\n        // this.azoomeePackageURL = this.getInGabarit({id: \"Informations.project\"}).value.azoomeePackageURL || this.azoomeeServerURL + \"/\" + this.info.id + \"/\" + this.info.id + \".zip\";\n        let popupContent = `\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t\t<h4>Envoi en Test</h4>\n\t\t\t\t\t\t<div style=\"font-size:14px\">Envoie une publication du projet actuel en Test, visualisable pendant que l'on continue à modifier le projet</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default label-info btn-lg\" title=\"Envoyer en Test\" id=\"sendToTest\"><span class=\"fa fa-share-square-o\"></span></button>\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default\" title=\"Visualiser la version actuellement en Test\" id=\"previewTest\"><span class=\"fa fa-eye\"></span></button>\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default\" title=\"Télécharger la version actuellement en Test\" id=\"downloadTest\"><span class=\"fa fa-download\"></span></button>\n\t\t\t    \t</div>\n\t\t\t    </div>\n\n\t\t\t    <hr>\n\t\t\t    \n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t\t<h4>Envoi vers l'application Bayam</h4>\n\t\t\t\t\t\t<div style=\"font-size:14px\">Envoi une publication du projet vers une des bulles de l'application Bayam</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t${bubblesBayam(this._bayamTestOpts.numBubbles)}\n\t\t\t    </div>\n\n\t\t\t    <hr>\n\t\t\t    \n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t\t<h4>Azoomee</h4>\n\t\t\t\t\t\t<div style=\"font-size:14px\">Export pour la plateforme Azoomee<br/><br/>\n\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-2\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" title=\"Télécharger la version Azoomee\" id=\"sendToAzoomee\"><span class=\"fa fa-download\"></span></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-xs-10\">\n\t\t\t\t\tServer URL: \n\t\t\t\t\t\t<input type=\"text\" class=\"\" style=\"width:100%;\" id=\"azoomeeServerURL\" value=\"${this.azoomeeServerURL}\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-12\">\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\tLe zip récupéré contient 2 fichiers: <br/>\n\t\t\t\t\t\t- le json, pointant vers l'url du zip: &lt;Server URL&gt;/${this.info.id}/${this.info.id}.zip <br/>\n\t\t\t\t\t\t- le zip ${this.info.id}.zip qui doit être placée à l'url pointée par le json. <br/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t    <hr>\n\n\t\t\t    <div class=\"row\">\n\t\t\t    \t<div class=\"col-xs-12\">\n\t\t\t    \t\t<h4>Exporter le projet actuel</h4>\n\t\t\t    \t</div>\n\t\t\t    </div>\n\n\n\t\t\t    <div class=\"row\">\n\t\t\t    \t<div class=\"col-xs-12\">\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default label-success\" style=\"width:100%; text-align: left\" title=\"Télécharger une publication du projet\" id=\"buildProjectIntern\"><span class=\"fa fa-download\"></span> Publication du projet</button>\n\n\t\t\t    \t</div>\n\t\t\t    </div>\n\n\t\t\t    <div class=\"row\">\n\t\t\t    \t<div class=\"col-xs-12\">\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default\" style=\"width:100%; text-align: left\" title=\"Publication du projet  avec le dernier JX\" id=\"buildProjectLastReleaseJX\"><span class=\"fa fa-download\"></span> Publication du projet  avec le dernier JX</button>\n\n\t\t\t    \t</div>\n\t\t\t    </div>\n\n\t\t\t    <hr>\n\t\t\t    <div class=\"row\">\n\t\t\t    \t<div class=\"col-xs-12\">\n\t\t\t    \t\t<button type=\"button\" class=\"btn btn-default\" style=\"width:100%; text-align: left\" title=\"Télécharger tout le dossier du projet\" id=\"downloadFullProject\"><span class=\"fa fa-download\"></span> Tout le dossier du projet</button>\n\n\t\t\t    \t</div>\n\t\t\t    </div>\n\n\t\t`;\n        var popup = this.jx.editor.popup({ title: \"Exporter le projet\", content: popupContent, width: 700, buttons: {}, onclose: evt => { } });\n        var popupReload = () => {\n            popup.modal(\"hide\");\n            this.exportDial(appData);\n        };\n        $(popup).find(\"#azoomeeServerURL\").change(evt => {\n            this.getInGabarit({ id: \"Informations.project\" }).value.azoomeeServerURL = evt.currentTarget.value;\n            this.azoomeeServerURL = evt.currentTarget.value;\n            this.save(() => { });\n        });\n        $(popup).find(\".btn\").click((evt) => {\n            if ($(evt.currentTarget).attr(\"data-action\")) {\n                var request = JSON.parse($(event.currentTarget).attr(\"data-action\"));\n            }\n            else {\n                request = { action: event.currentTarget.id, params: undefined };\n            }\n            this.callHooks({ hookID: \"beforeBuild\" }, () => {\n                console.log(request.action);\n                switch (request.action) {\n                    case \"sendToTest\":\n                        this.jx.editor.popup({ title: \"Comfirmation de l'envoi en Test\",\n                            content: \"Attention, cette action va remplacer la version actuellement en Test par la version du projet en cours.\\n Etes-vous sûr ?\",\n                            buttons: {\n                                ok: { label: \"Oui\" },\n                                no: { label: \"Non\" }\n                            },\n                            onclose: evt => {\n                                if (evt.action == \"ok\") {\n                                    var popup2 = this.jx.editor.alert({ title: \"Opération en cours\", content: \"Veuillez patienter svp...\", closable: false });\n                                    this.sendToTest(null, evt => {\n                                        popup2.modal('hide');\n                                    });\n                                }\n                            }\n                        });\n                        break;\n                    case \"sendToBayamBubble\":\n                        this.jx.editor.popup({ title: \"Comfirmation de l'envoi en Test vers la bulle Bayam \" + request.no,\n                            content: \"Attention, cette action va remplacer la version actuelle de la bulle \" + request.no + \" par la version du projet en cours.\\n Etes-vous sûr ?\",\n                            buttons: {\n                                ok: { label: \"Oui\" },\n                                no: { label: \"Non\" }\n                            },\n                            onclose: evt => {\n                                if (evt.action == \"ok\") {\n                                    var popup2 = this.jx.editor.alert({ title: \"Opération en cours\", content: \"Veuillez patienter svp...\", closable: false });\n                                    this.sendToBayamBubble(request, evt => {\n                                        popup2.modal('hide');\n                                        popupReload();\n                                    });\n                                }\n                            }\n                        });\n                        break;\n                    case \"sendToAzoomee\":\n                        this.jx.editor.popup({ title: \"Comfirmation de l'export Azoomee \",\n                            content: \"\",\n                            buttons: {\n                                ok: { label: \"Oui\" },\n                                no: { label: \"Non\" }\n                            },\n                            onclose: evt => {\n                                if (evt.action == \"ok\") {\n                                    var popup2 = this.jx.editor.alert({ title: \"Opération en cours\", content: \"Veuillez patienter svp...\", closable: false });\n                                    this.sendToAzoomee(request, evt => {\n                                        popup2.modal('hide');\n                                        popupReload();\n                                    });\n                                }\n                            }\n                        });\n                        break;\n                    case \"buildProjectIntern\":\n                        var popup2 = this.jx.editor.alert({ title: \"Opération en cours\", content: \"Veuillez patienter svp...\", closable: false });\n                        this.buildProjectIntern(null, evt => {\n                            popup2.modal('hide');\n                        });\n                        break;\n                    case \"buildProjectLastReleaseJX\":\n                        var popup2 = this.jx.editor.alert({ title: \"Opération en cours\", content: \"Veuillez patienter svp...\", closable: false });\n                        this.buildProjectLastReleaseJX(null, evt => {\n                            popup2.modal('hide');\n                        });\n                        break;\n                    case \"downloadFullProject\":\n                        var popup2 = this.jx.editor.alert({ title: \"Opération en cours\", content: \"Veuillez patienter svp...\", closable: false });\n                        this.downloadFullProject(null, evt => {\n                            popup2.modal('hide');\n                        });\n                        break;\n                    default:\n                        if (this[request.action])\n                            this[request.action](request, evt => { });\n                }\n            });\n        });\n        // popup.modal('hide') // close popup\n    }\n}\n"]}