{"version":3,"sources":["../../../../src/jx/core/loaders/TextLoader.js"],"names":["TextLoader","resource","onFinished","jx","success","$","ajax","src","fail","_jsonFailed","done","_jsonLoaded","data","always","_always","ready","target"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAAqBA,U;AACjB,4BAAYC,QAAZ,EAAsBC,UAAtB,EAAkCC,EAAlC,EAAsC;AAAA;;AAClC,iBAAKA,EAAL,GAAUA,EAAV;AACA,iBAAKF,QAAL,GAAgBA,QAAhB;AACA,iBAAKC,UAAL,GAAkBA,UAAlB;AACA,iBAAKE,OAAL,GAAe,KAAf;AACH;;;;mCACM;AAAA;;AACHC,kBAAEC,IAAF,CAAO,KAAKL,QAAL,CAAcM,GAArB,EACKC,IADL,CACU;AAAA,2BAAO,MAAKC,WAAL,EAAP;AAAA,iBADV,EAEKC,IAFL,CAEU;AAAA,2BAAQ,MAAKC,WAAL,CAAiBC,IAAjB,CAAR;AAAA,iBAFV,EAGKC,MAHL,CAGY;AAAA,2BAAO,MAAKC,OAAL,EAAP;AAAA,iBAHZ;AAIH;;;mCACM;AACH,oBAAI,CAAC,KAAKX,EAAV,EACI;AACJ,qBAAKD,UAAL,GAAkB,IAAlB;AACA,qBAAKD,QAAL,GAAgB,IAAhB;AACA,qBAAKE,EAAL,GAAU,IAAV;AACH;;;wCACWS,I,EAAM;AACd,qBAAKX,QAAL,CAAcW,IAAd,GAAqBA,IAArB;AACA,qBAAKX,QAAL,CAAcc,KAAd,GAAsB,IAAtB;AACA,oBAAI,KAAKb,UAAT,EACI,KAAKA,UAAL,CAAgB,EAAEc,QAAQ,IAAV,EAAgBf,UAAU,KAAKA,QAA/B,EAAyCG,SAAS,IAAlD,EAAhB;AACP;;;0CACa;AACV,oBAAI,KAAKF,UAAT,EACI,KAAKA,UAAL,CAAgB,EAAEc,QAAQ,IAAV,EAAgBf,UAAU,KAAKA,QAA/B,EAAyCG,SAAS,KAAlD,EAAhB;AACP;;;sCACS,CACT;;;;;;sBA/BgBJ,U","file":"TextLoader.js","sourcesContent":["export default class TextLoader {\n    constructor(resource, onFinished, jx) {\n        this.jx = jx;\n        this.resource = resource;\n        this.onFinished = onFinished;\n        this.success = false;\n    }\n    load() {\n        $.ajax(this.resource.src)\n            .fail(evt => this._jsonFailed())\n            .done(data => this._jsonLoaded(data))\n            .always(evt => this._always());\n    }\n    kill() {\n        if (!this.jx)\n            return;\n        this.onFinished = null;\n        this.resource = null;\n        this.jx = null;\n    }\n    _jsonLoaded(data) {\n        this.resource.data = data;\n        this.resource.ready = true;\n        if (this.onFinished)\n            this.onFinished({ target: this, resource: this.resource, success: true });\n    }\n    _jsonFailed() {\n        if (this.onFinished)\n            this.onFinished({ target: this, resource: this.resource, success: false });\n    }\n    _always() {\n    }\n}\n"]}