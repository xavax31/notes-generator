{"version":3,"sources":["../../../../src/jx/core/loaders/ClassLoader.js"],"names":["ClassLoader","resource","onFinished","jx","success","db","importClass","src","data","ClassDef","ready","target","console","log","id","err"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAAqBA,W;AACjB,6BAAYC,QAAZ,EAAsBC,UAAtB,EAAkCC,EAAlC,EAAsC;AAAA;;AAClC,iBAAKA,EAAL,GAAUA,EAAV;AACA,iBAAKF,QAAL,GAAgBA,QAAhB;AACA,iBAAKC,UAAL,GAAkBA,UAAlB;AACA,iBAAKE,OAAL,GAAe,KAAf;AACH;;;;mCACM;AACH,oBAAI,CAAC,KAAKD,EAAV,EACI;AACJ,qBAAKD,UAAL,GAAkB,IAAlB;AACA,qBAAKD,QAAL,GAAgB,IAAhB;AACA,qBAAKE,EAAL,GAAU,IAAV;AACH;;;mCACM;AAAA;;AAEH,qBAAKA,EAAL,CAAQE,EAAR,CAAWC,WAAX,CAAuB,CAAC,KAAKL,QAAL,CAAcM,GAAf,CAAvB,EAA4C,oBAAY;AACpD,0BAAKN,QAAL,CAAcO,IAAd,GAAqBC,QAArB;AACA,0BAAKR,QAAL,CAAcS,KAAd,GAAsB,IAAtB;AACA,0BAAKR,UAAL,CAAgB,EAAES,aAAF,EAAgBV,UAAU,MAAKA,QAA/B,EAAyCG,SAAS,IAAlD,EAAhB;AACH,iBAJD,EAIG,eAAO;AACNQ,4BAAQC,GAAR,CAAY,MAAKZ,QAAL,CAAca,EAA1B,EAA8B,MAAKb,QAAL,CAAcM,GAA5C,EAAiDQ,GAAjD;AACA,0BAAKb,UAAL,CAAgB,EAAES,aAAF,EAAgBV,UAAU,MAAKA,QAA/B,EAAyCG,SAAS,KAAlD,EAAhB;AACH,iBAPD;AAQH;;;;;;sBAxBgBJ,W","file":"ClassLoader.js","sourcesContent":["export default class ClassLoader {\n    constructor(resource, onFinished, jx) {\n        this.jx = jx;\n        this.resource = resource;\n        this.onFinished = onFinished;\n        this.success = false;\n    }\n    kill() {\n        if (!this.jx)\n            return;\n        this.onFinished = null;\n        this.resource = null;\n        this.jx = null;\n    }\n    load() {\n        // console.log(this.resource.src)\n        this.jx.db.importClass([this.resource.src], ClassDef => {\n            this.resource.data = ClassDef;\n            this.resource.ready = true;\n            this.onFinished({ target: this, resource: this.resource, success: true });\n        }, err => {\n            console.log(this.resource.id, this.resource.src, err);\n            this.onFinished({ target: this, resource: this.resource, success: false });\n        });\n    }\n}\n"]}