{"version":3,"sources":["../../../src/jx/core/Config.js"],"names":["Config","jx","_detectDevice","langs","lang","urlParams","tools","getURLParameters","_system","SystemInfo","_projectInfo","ProjectInfos","_flashOptimizer","FlashOptimizer","system","host","type","window","location","href","search","needUserActionToWork","startbtn","undefined","useClickOnTouchScreens","kill","projectData","Object","assign","project","engine","config","screenObject","db","findOne","id","ratioArray","data","split","app","ratio","Number","global","apple_phone","apple_ipod","apple_tablet","android_phone","android_tablet","amazon_phone","amazon_tablet","windows_phone","windows_tablet","other_blackberry","other_blackberry_10","other_opera","other_chrome","other_firefox","seven_inch","RegExp","match","regex","userAgent","test","IsMobileClass","ua","navigator","tmp","apple","phone","ipod","tablet","device","amazon","android","windows","other","blackberry","blackberry10","opera","firefox","chrome","any","instantiate","IM","Class","isMobile","value","_useClickOnTouchScreens","support","quality","monitor","enabled","framerate","defaultStageResolution","width","height","defaultRenderers","video","defaultViewType","lockDelayAfterClick","spriteSheetMaxWidth","spriteSheetMaxHeight","cacheStatics","_config","version","os","container","name","$","on","screen","resolutionUser","resolution","pixelRatio","devicePixelRatio","audio","isWebAudioSupported","isHTMLAudioSupported","createjs","HTMLAudioPlugin","isSupported","battery","connection","online","onLine","_init","_batteryRemoveListeners","blockMobileContextualMenu","blockMobileScroll","context","_getBatteryInfos","addEventListener","e","getBattery","then","core","charging","level","chargingTime","dischargingTime","_listeners","_batteryAddListeners","removeEventListener","css","_blockMobileScroll","_blockMobileScrollListener","preventDefault","document"],"mappings":"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","file":"Config.js","sourcesContent":["/**\n * Contains all system and project config.\n */\nexport default class Config {\n    constructor(jx) {\n        this.jx = jx;\n        this._detectDevice();\n        /** langs to use. First is by default. */\n        this.langs = [\"fr\"];\n        /** Lang actually active */\n        this.lang = \"fr\";\n        /** Return an object containing all parameters provided in url. */\n        this.urlParams = this.jx.tools.getURLParameters();\n        this._system = new SystemInfo(this);\n        this._projectInfo = new ProjectInfos();\n        this._flashOptimizer = new FlashOptimizer();\n        this.system.host.type = (window.location.href.search(\"localhost\") == -1) ? \"server\" : \"local\";\n        this.system.needUserActionToWork = this.urlParams.startbtn == undefined ? this.system.needUserActionToWork : this.urlParams.startbtn;\n        this.useClickOnTouchScreens = true;\n    }\n    kill() {\n        this._system.kill();\n        this._system = null;\n        this._projectInfo = null;\n        this._flashOptimizer = null;\n        this.jx = null;\n    }\n    setProjectInfo(projectData) {\n        if (!projectData)\n            return;\n        Object.assign(this._projectInfo, projectData.project || {});\n        Object.assign(this._projectInfo, projectData.engine || {});\n        Object.assign(this._projectInfo, projectData.config || {});\n    }\n    init() {\n        var screenObject = this.jx.db.findOne({ id: \"ScreenRatio\" });\n        if (screenObject) {\n            var ratioArray = screenObject.data.split(\"/\");\n            this.app.ratio = Number(ratioArray[0]) / Number(ratioArray[1]);\n        }\n    }\n    _detectDevice() {\n        /**\n         * isMobile.js v0.4.1\n         *\n         * A simple library to detect Apple phones and tablets,\n         * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),\n         * and any kind of seven inch device, via user agent sniffing.\n         *\n         * @author: Kai Mallea (kmallea@gmail.com)\n         *\n         * http://creativecommons.org/publicdomain/zero/1.0/\n         */\n        (function (global) {\n            var apple_phone = /iPhone/i, apple_ipod = /iPod/i, apple_tablet = /iPad/i, android_phone = /(?=.*\\bAndroid\\b)(?=.*\\bMobile\\b)/i, // Match 'Android' AND 'Mobile'\n            android_tablet = /Android/i, amazon_phone = /(?=.*\\bAndroid\\b)(?=.*\\bSD4930UR\\b)/i, amazon_tablet = /(?=.*\\bAndroid\\b)(?=.*\\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\\b)/i, windows_phone = /Windows Phone/i, windows_tablet = /(?=.*\\bWindows\\b)(?=.*\\bARM\\b)/i, // Match 'Windows' AND 'ARM'\n            other_blackberry = /BlackBerry/i, other_blackberry_10 = /BB10/i, other_opera = /Opera Mini/i, other_chrome = /(CriOS|Chrome)(?=.*\\bMobile\\b)/i, other_firefox = /(?=.*\\bFirefox\\b)(?=.*\\bMobile\\b)/i, // Match 'Firefox' AND 'Mobile'\n            seven_inch = new RegExp('(?:' + // Non-capturing group\n                'Nexus 7' + // Nexus 7\n                '|' + // OR\n                'BNTV250' + // B&N Nook Tablet 7 inch\n                '|' + // OR\n                'Kindle Fire' + // Kindle Fire\n                '|' + // OR\n                'Silk' + // Kindle Fire, Silk Accelerated\n                '|' + // OR\n                'GT-P1000' + // Galaxy Tab 7 inch\n                ')', // End non-capturing group\n            'i'); // Case-insensitive matching\n            var match = function (regex, userAgent) {\n                return regex.test(userAgent);\n            };\n            var IsMobileClass = function (userAgent) {\n                var ua = userAgent || navigator.userAgent;\n                // Facebook mobile app's integrated browser adds a bunch of strings that\n                // match everything. Strip it out if it exists.\n                var tmp = ua.split('[FBAN');\n                if (typeof tmp[1] !== 'undefined') {\n                    ua = tmp[0];\n                }\n                // Twitter mobile app's integrated browser on iPad adds a \"Twitter for\n                // iPhone\" string. Same probable happens on other tablet platforms.\n                // This will confuse detection so strip it out if it exists.\n                tmp = ua.split('Twitter');\n                if (typeof tmp[1] !== 'undefined') {\n                    ua = tmp[0];\n                }\n                this.apple = {\n                    phone: match(apple_phone, ua),\n                    ipod: match(apple_ipod, ua),\n                    tablet: !match(apple_phone, ua) && match(apple_tablet, ua),\n                    device: match(apple_phone, ua) || match(apple_ipod, ua) || match(apple_tablet, ua)\n                };\n                this.amazon = {\n                    phone: match(amazon_phone, ua),\n                    tablet: !match(amazon_phone, ua) && match(amazon_tablet, ua),\n                    device: match(amazon_phone, ua) || match(amazon_tablet, ua)\n                };\n                this.android = {\n                    phone: match(amazon_phone, ua) || match(android_phone, ua),\n                    tablet: !match(amazon_phone, ua) && !match(android_phone, ua) && (match(amazon_tablet, ua) || match(android_tablet, ua)),\n                    device: match(amazon_phone, ua) || match(amazon_tablet, ua) || match(android_phone, ua) || match(android_tablet, ua)\n                };\n                this.windows = {\n                    phone: match(windows_phone, ua),\n                    tablet: match(windows_tablet, ua),\n                    device: match(windows_phone, ua) || match(windows_tablet, ua)\n                };\n                this.other = {\n                    blackberry: match(other_blackberry, ua),\n                    blackberry10: match(other_blackberry_10, ua),\n                    opera: match(other_opera, ua),\n                    firefox: match(other_firefox, ua),\n                    chrome: match(other_chrome, ua),\n                    device: match(other_blackberry, ua) || match(other_blackberry_10, ua) || match(other_opera, ua) || match(other_firefox, ua) || match(other_chrome, ua)\n                };\n                this.seven_inch = match(seven_inch, ua);\n                this.any = this.apple.device || this.android.device || this.windows.device || this.other.device || this.seven_inch;\n                // excludes 'other' devices and ipods, targeting touchscreen phones\n                this.phone = this.apple.phone || this.android.phone || this.windows.phone;\n                // excludes 7 inch devices, classifying as phone or tablet is left to the user\n                this.tablet = this.apple.tablet || this.android.tablet || this.windows.tablet;\n                if (typeof window === 'undefined') {\n                    return this;\n                }\n            };\n            var instantiate = function () {\n                var IM = new IsMobileClass();\n                IM.Class = IsMobileClass;\n                return IM;\n            };\n            global.isMobile = instantiate();\n        })(window);\n    }\n    /** @type {SystemInfo} */\n    get system() {\n        return this._system;\n    }\n    /** @type {FlashOptimizer} */\n    get flashOptimizer() {\n        return this._flashOptimizer;\n    }\n    /** @type {ProjectInfos} */\n    get app() {\n        return this._projectInfo;\n    }\n    set useClickOnTouchScreens(value) {\n        this._useClickOnTouchScreens = value;\n    }\n    get useClickOnTouchScreens() {\n        return this._system.device.support !== \"mobile\" || this._useClickOnTouchScreens; // todo: better way to detect touchscreen\n    }\n}\n/** */\nexport class ProjectInfos {\n    constructor() {\n        /**\n        * quality linked to optimisation (flashtml). not finished.\n        * @type {number}\n        */\n        this.quality = 1;\n        this.monitor = {\n            enabled: true\n        };\n        /**\n        * Global cjs framerate of application.\n        * @type {number}\n        */\n        this.framerate = 50;\n        /**\n        * Default ratio use by StageViews at creation.\n        * @type {number}\n        */\n        this.ratio = 4 / 3;\n        /**\n        * Default width and height use by StageViews at creation.\n        * @type {object}\n        */\n        this.defaultStageResolution = { width: 800, height: 600 };\n        this.defaultRenderers = {\n            video: \"DOM\"\n        };\n        this.defaultViewType = \"DOM\";\n        this.lockDelayAfterClick = 0;\n    }\n}\n/** */\nexport class FlashOptimizer {\n    constructor() {\n        /**\n        */\n        this.spriteSheetMaxWidth = 2048;\n        this.spriteSheetMaxHeight = 2048;\n        /**\n         * Determine if statics clips are cached by default during auto-optimisation.\n         * @type {String} default: \"always\". available: always, never, if_optimisation (== if optimisation is checked for specific flashtml)\n         */\n        this.cacheStatics = \"always\";\n        /**\n         * Determine the default quality of optimisations.\n         * \"good\": don't use screen pixel ratio when cache images.\n         * \"best\": use pixel ratio when cache images\n         * @type {String} default: good\n         */\n        this.quality = \"good\";\n    }\n}\n/** */\nexport class SystemInfo {\n    constructor(config) {\n        this._config = config;\n        // this._blockMobileScroll = false;\n        /**\n         * @type {Object}\n         * @property {string} device.type\n         * @property {string} device.version\n         */\n        this.device = {\n            support: \"desktop\",\n            type: \"mac\",\n            version: \"book2013\"\n        };\n        /**\n         * @type {Object}\n         * @property {string} os.type\n         * @property {string} os.version\n         */\n        this.os = {\n            type: \"os\",\n            version: \"10.10.5\"\n        };\n        /**\n         * @type {Object}\n         * @property {string} host.type - server or local\n         */\n        this.host = {\n            type: \"server\"\n        };\n        /**\n          * @type {Object}\n          * @property {string} container.type - browser, aquafadas,...\n          */\n        this.container = {\n            type: \"browser\",\n            name: \"chrome\"\n        };\n        $(window).on(\"resize\", evt => {\n            this.screen.resolutionUser.width = $(window).width();\n            this.screen.resolutionUser.height = $(window).height();\n        });\n        /**\n         * @type {Object}\n         * @property {object} screen.resolution - Resolution of screen.\n         * @property {number} screen.resolution.width\n         * @property {number} screen.resolution.height\n         * @property {object} screen.resolutionUser - Resolution of user's available screen part.\n         * @property {number} screen.resolutionUser.width\n         * @property {number} screen.resolutionUser.height\n         * @property {number} screen.ratio\n         */\n        this.screen = {\n            resolutionUser: { width: $(window).width(), height: $(window).height() },\n            resolution: { width: screen.width, height: screen.height },\n            // resolution: {width: screen.width, height: screen.height},\n            ratio: 4 / 3,\n            pixelRatio: window.devicePixelRatio\n        };\n        /**\n         * @type {Object}\n         * @property {boolean} audio.needUserActionToWork\n         * @property {boolean} audio.isWebAudioSupported\n         * @property {boolean} audio.isHTMLAudioSupported\n         */\n        this.audio = {\n            needUserActionToWork: false,\n            isWebAudioSupported: false,\n            isHTMLAudioSupported: createjs.HTMLAudioPlugin.isSupported(),\n        };\n        /**\n         * @type {Object}\n         * @property {boolean} video.needUserActionToWork\n         */\n        this.video = {\n            needUserActionToWork: false\n        };\n        this.battery = null;\n        this.connection = {\n            online: navigator.onLine\n        };\n        /**\n         * @type {boolean}\n         */\n        this.needUserActionToWork = false;\n        this._init();\n    }\n    /**\n     * (ios) block contextual menu when long click on dom.\n     * @type {boolean}\n     */\n    set blockMobileContextualMenu(value) {\n        $(\"body\").css(\"-webkit-touch-callout\", value ? \"none\" : \"default\");\n    }\n    get blockMobileContextualMenu() {\n        return $(\"body\").css(\"-webkit-touch-callout\") == \"none\" ? true : false;\n    }\n    /**\n      * (ios) block slide on document dom.\n      * @type {boolean}\n      */\n    set blockMobileScroll(value) {\n        if (jx._blockMobileScroll === value)\n            return;\n        jx._blockMobileScroll = value;\n        if (jx._blockMobileScroll) {\n            jx._blockMobileScrollListener = jx._blockMobileScrollListener || function (e) {\n                e.preventDefault();\n            };\n            document.removeEventListener(\"touchmove\", jx._blockMobileScrollListener);\n            document.addEventListener(\"touchmove\", jx._blockMobileScrollListener);\n        }\n        else {\n            document.removeEventListener(\"touchmove\", jx._blockMobileScrollListener);\n        }\n    }\n    get blockMobileScroll() {\n        return this._blockMobileScroll;\n    }\n    kill() {\n        this._batteryRemoveListeners();\n    }\n    _init() {\n        this.device.support = isMobile.any ? \"mobile\" : \"desktop\";\n        // setInterval(()=>{\n        //   this.blockMobileContextualMenu = true;\n        // }, 2000)\n        this.blockMobileContextualMenu = true;\n        this.blockMobileScroll = true;\n        if (navigator.userAgent.search(/ipad/i) != -1) {\n            this.device.type = \"ipad\";\n        }\n        else if (navigator.userAgent.search(/android/i) != -1) {\n            this.device.type = \"android\";\n        }\n        else {\n            if (navigator.userAgent.search(/Macintosh/i) != -1) {\n                this.device.type = \"mac\";\n            }\n            ;\n            if (navigator.userAgent.search(/Windows/i) != -1) {\n                this.device.type = \"windows\";\n            }\n            ;\n        }\n        if (this._config.urlParams.context == \"cordova\") {\n            this.container.type = \"cordova\";\n            this.container.name = \"\";\n        }\n        else if (this._config.urlParams.context == \"bayam\") {\n            this.container.type = \"bayam\";\n            this.container.name = \"\";\n        }\n        else if (this._config.urlParams.context == \"azoomee\" || window[\"overrideJXConfig\"].context == \"azoomee\") {\n            this.container.type = \"azoomee\";\n            this.container.name = \"\";\n        }\n        else if (navigator.userAgent.search(/Chrome/i) != -1) {\n            this.container.type = \"browser\";\n            this.container.name = \"chrome\";\n        }\n        else if (navigator.userAgent.search(/Safari/i) != -1) {\n            this.container.type = \"browser\";\n            this.container.name = \"safari\";\n        }\n        else if (navigator.userAgent.search(/Firefox/i) != -1) {\n            this.container.type = \"browser\";\n            this.container.name = \"firefox\";\n        }\n        else {\n            this.container.type = \"browser\";\n            // this.container.type = \"aquafadas\";\n            this.container.name = \"unknown\";\n        }\n        this.audio.needUserActionToWork = (this.container.type == \"browser\");\n        this.video.needUserActionToWork = (this.container.type == \"browser\");\n        this.needUserActionToWork = this.video.needUserActionToWork || this.audio.needUserActionToWork;\n        this.audio.isWebAudioSupported = (this.container.type != \"aquafadas\" && this.container.type != \"azoomee\");\n        this._getBatteryInfos();\n        window.addEventListener(\"offline\", (e) => { this.connection.online = false; });\n        window.addEventListener(\"online\", (e) => { this.connection.online = true; });\n    }\n    _getBatteryInfos() {\n        if (navigator.battery) {\n            navigator.getBattery().then((battery) => {\n                this.battery = {\n                    core: battery,\n                    charging: battery.charging,\n                    level: battery.level,\n                    chargingTime: battery.chargingTime,\n                    dischargingTime: battery.dischargingTime\n                };\n                this.battery._listeners = {\n                    charging: () => this.battery.charging = battery.charging,\n                    level: () => this.battery.level = battery.level,\n                    chargingTime: () => this.battery.chargingTime = battery.chargingTime,\n                    dischargingTime: () => this.battery.dischargingTime = battery.dischargingTime\n                };\n                this._batteryAddListeners();\n            });\n        }\n        ;\n    }\n    _batteryAddListeners() {\n        if (navigator.battery) {\n            battery.addEventListener('chargingchange', this.battery._listeners.charging);\n            battery.addEventListener('levelchange', this.battery._listeners.level);\n            battery.addEventListener('chargingtimechange', this.battery._listeners.chargingTime);\n            battery.addEventListener('dischargingtimechange', this.battery._listeners.dischargingTime);\n        }\n    }\n    _batteryRemoveListeners() {\n        if (navigator.battery) {\n            battery.removeEventListener('chargingchange', this.battery._listeners.charging);\n            battery.removeEventListener('levelchange', this.battery._listeners.level);\n            battery.removeEventListener('chargingtimechange', this.battery._listeners.chargingTime);\n            battery.removeEventListener('dischargingtimechange', this.battery._listeners.dischargingTime);\n        }\n    }\n}\n"]}