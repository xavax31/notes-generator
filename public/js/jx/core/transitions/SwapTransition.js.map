{"version":3,"sources":["../../../../src/jx/core/transitions/SwapTransition.js"],"names":["SwapTransitionStyle","styleData","type","item1Style","item2Style","SwapTransition","dataObject","jx","tools","mergeObject","tempData","onFinished","signals","Signal","onItem1Changing","onItem1Finished","onItem2Changing","referenceElement","item1","item2","saveBounds","running","createjs","Tween","get","view","override","to","properties","duration","Ease","typeTransition","call","e","visible","scaleY","dispatch","currentTarget","finish","undefined","addEventListener","y","height","removeTweens","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QACMA,mB,GACF,6BAAYC,SAAZ,EAAuB;AAAA;;AACnB,aAAKC,IAAL,GAAY,gBAAZ,EACI,KAAKC,UAAL,GAAkB;AACd,8BAAkB,SADJ;AAEd,0BAAc;AACV,0BAAU;AADA,aAFA;AAKd,wBAAY;AALE,SADtB;AAQA,aAAKC,UAAL,GAAkB;AACd,8BAAkB,YADJ;AAEd,0BAAc;AACV,0BAAU;AADA,aAFA;AAKd,wBAAY;AALE,SAAlB;AAOH,K;;QAGCC,c;;;AACF,gCAAYC,UAAZ,EAAwB;AAAA;;AAAA,wIACdA,UADc;;AAEpB,kBAAKA,UAAL,GAAkB,MAAKC,EAAL,CAAQC,KAAR,CAAcC,WAAd,CAA0B,MAAKH,UAA/B,EAA2C,IAAIN,mBAAJ,EAA3C,CAAlB;AACA,kBAAKU,QAAL,GAAgB,EAAhB;AACA,kBAAKC,UAAL,GAAkB,IAAIC,QAAQC,MAAZ,EAAlB;AACA,kBAAKC,eAAL,GAAuB,IAAIF,QAAQC,MAAZ,EAAvB;AACA,kBAAKE,eAAL,GAAuB,IAAIH,QAAQC,MAAZ,EAAvB;AACA,kBAAKG,eAAL,GAAuB,IAAIJ,QAAQC,MAAZ,EAAvB;AACA,kBAAKV,UAAL,GAAkB,MAAKG,UAAL,CAAgBH,UAAlC;AACA,kBAAKC,UAAL,GAAkB,MAAKE,UAAL,CAAgBF,UAAlC;AAToB;AAUvB;;;;uCACwC;AAAA;;AAAA,oBAAlCa,gBAAkC,QAAlCA,gBAAkC;AAAA,oBAAhBC,KAAgB,QAAhBA,KAAgB;AAAA,oBAATC,KAAS,QAATA,KAAS;;AAErCD,sBAAME,UAAN;AACAD,sBAAMC,UAAN;AACA,qBAAKV,QAAL,CAAcQ,KAAd,GAAsBA,KAAtB;AACA,qBAAKR,QAAL,CAAcS,KAAd,GAAsBA,KAAtB;AACA,qBAAKT,QAAL,CAAcO,gBAAd,GAAiCA,gBAAjC;AACA,qBAAKI,OAAL,GAAe,IAAf;AACAC,yBAASC,KAAT,CAAeC,GAAf,CAAmBN,MAAMO,IAAzB,EAA+B,EAAEC,UAAU,IAAZ,EAA/B,EACKC,EADL,CACQ,KAAKxB,UAAL,CAAgByB,UADxB,EACoC,KAAKzB,UAAL,CAAgB0B,QADpD,EAC8DP,SAASQ,IAAT,CAAc,KAAK3B,UAAL,CAAgB4B,cAA9B,CAD9D,EAEKC,IAFL,CAEU,UAACC,CAAD,EAAO;AACbf,0BAAMgB,OAAN,GAAgB,KAAhB;AACAf,0BAAMe,OAAN,GAAgB,IAAhB;;AAEAf,0BAAMM,IAAN,CAAWU,MAAX,GAAoB,CAApB;AACA,2BAAKpB,eAAL,CAAqBqB,QAArB,CAA8B,EAAElB,OAAOA,KAAT,EAAgBC,OAAOA,KAAvB,EAA8BkB,qBAA9B,EAA9B;AACAf,6BAASC,KAAT,CAAeC,GAAf,CAAmBL,MAAMM,IAAzB,EAA+B,EAAEC,UAAU,IAAZ,EAA/B,EACKC,EADL,CACQ,OAAKvB,UAAL,CAAgBwB,UADxB,EACoC,OAAKxB,UAAL,CAAgByB,QADpD,EAC8DP,SAASQ,IAAT,CAAc,OAAK1B,UAAL,CAAgB2B,cAA9B,CAD9D,EAEKC,IAFL,CAEU,UAACC,CAAD,EAAO;AACb,+BAAKK,MAAL;AACH,qBAJD,EAIGC,SAJH,UAKKC,gBALL,CAKsB,QALtB,EAKgC,UAACP,CAAD,EAAO;AACnCd,8BAAMsB,CAAN,GAAUxB,iBAAiByB,MAAjB,GAA0BvB,MAAMuB,MAA1C;AACA,+BAAK1B,eAAL,CAAqBoB,QAArB,CAA8B,EAAElB,OAAOA,KAAT,EAAgBC,OAAOA,KAAvB,EAA8BkB,qBAA9B,EAA9B;AACH,qBARD;AASH,iBAjBD,EAiBGE,SAjBH,EAiBc,IAjBd,EAkBKC,gBAlBL,CAkBsB,QAlBtB,EAkBgC,UAACP,CAAD,EAAO;AACnCf,0BAAMuB,CAAN,GAAUxB,iBAAiByB,MAAjB,GAA0BxB,MAAMwB,MAA1C;AACA,2BAAK5B,eAAL,CAAqBsB,QAArB,CAA8B,EAAElB,OAAOA,KAAT,EAAgBC,OAAOA,KAAvB,EAA8BkB,qBAA9B,EAA9B;AACH,iBArBD;AAsBH;;;mCACM;AACH,oBAAI,CAAC,KAAKhB,OAAV,EACI;AACJ,qBAAKA,OAAL,GAAe,KAAf;AACAC,yBAASC,KAAT,CAAeoB,YAAf,CAA4B,KAAKjC,QAAL,CAAcQ,KAAd,CAAoBO,IAAhD;AACAH,yBAASC,KAAT,CAAeoB,YAAf,CAA4B,KAAKjC,QAAL,CAAcS,KAAd,CAAoBM,IAAhD;AACH;;;qCACQ;AACLmB,wBAAQC,GAAR,CAAY,QAAZ;AACA,oBAAI,CAAC,KAAKxB,OAAV,EACI;AACJ,qBAAKA,OAAL,GAAe,KAAf;AACAC,yBAASC,KAAT,CAAeoB,YAAf,CAA4B,KAAKjC,QAAL,CAAcQ,KAAd,CAAoBO,IAAhD;AACAH,yBAASC,KAAT,CAAeoB,YAAf,CAA4B,KAAKjC,QAAL,CAAcS,KAAd,CAAoBM,IAAhD;;AAQA,qBAAKd,UAAL,CAAgByB,QAAhB,CAAyB,EAAElB,OAAO,KAAKR,QAAL,CAAcQ,KAAvB,EAA8BC,OAAO,KAAKT,QAAL,CAAcS,KAAnD,EAA0DkB,eAAe,IAAzE,EAAzB;AACH;;;;;;sBAEUhC,c","file":"SwapTransition.js","sourcesContent":["import VisualComponent from \"jx/core/comps/VisualComponent\";\nclass SwapTransitionStyle {\n    constructor(styleData) {\n        this.type = \"SwapTransition\",\n            this.item1Style = {\n                \"typeTransition\": \"quadOut\",\n                \"properties\": {\n                    \"scaleY\": 0\n                },\n                \"duration\": 100\n            };\n        this.item2Style = {\n            \"typeTransition\": \"elasticOut\",\n            \"properties\": {\n                \"scaleY\": 1\n            },\n            \"duration\": 500\n        };\n    }\n}\n//export default SwapTransitionStyle;\nclass SwapTransition extends VisualComponent {\n    constructor(dataObject) {\n        super(dataObject);\n        this.dataObject = this.jx.tools.mergeObject(this.dataObject, new SwapTransitionStyle());\n        this.tempData = {};\n        this.onFinished = new signals.Signal();\n        this.onItem1Changing = new signals.Signal();\n        this.onItem1Finished = new signals.Signal();\n        this.onItem2Changing = new signals.Signal();\n        this.item1Style = this.dataObject.item1Style;\n        this.item2Style = this.dataObject.item2Style;\n    }\n    play({ referenceElement, item1, item2 }) {\n        //console.log(\"play\");\n        item1.saveBounds();\n        item2.saveBounds();\n        this.tempData.item1 = item1;\n        this.tempData.item2 = item2;\n        this.tempData.referenceElement = referenceElement;\n        this.running = true;\n        createjs.Tween.get(item1.view, { override: true })\n            .to(this.item1Style.properties, this.item1Style.duration, createjs.Ease[this.item1Style.typeTransition])\n            .call((e) => {\n            item1.visible = false;\n            item2.visible = true;\n            // TODO CHANGE scaleY not in view\n            item2.view.scaleY = 0;\n            this.onItem1Finished.dispatch({ item1: item1, item2: item2, currentTarget: this });\n            createjs.Tween.get(item2.view, { override: true })\n                .to(this.item2Style.properties, this.item2Style.duration, createjs.Ease[this.item2Style.typeTransition])\n                .call((e) => {\n                this.finish();\n            }, undefined, this)\n                .addEventListener(\"change\", (e) => {\n                item2.y = referenceElement.height - item2.height;\n                this.onItem2Changing.dispatch({ item1: item1, item2: item2, currentTarget: this });\n            });\n        }, undefined, this)\n            .addEventListener(\"change\", (e) => {\n            item1.y = referenceElement.height - item1.height;\n            this.onItem1Changing.dispatch({ item1: item1, item2: item2, currentTarget: this });\n        });\n    }\n    stop() {\n        if (!this.running)\n            return;\n        this.running = false;\n        createjs.Tween.removeTweens(this.tempData.item1.view);\n        createjs.Tween.removeTweens(this.tempData.item2.view);\n    }\n    finish() {\n        console.log(\"finish\");\n        if (!this.running)\n            return;\n        this.running = false;\n        createjs.Tween.removeTweens(this.tempData.item1.view);\n        createjs.Tween.removeTweens(this.tempData.item2.view);\n        // for(var prop in this.dataObject.item1Style.properties){\n        //     this.tempData.item1.view[prop] = this.dataObject.item1Style.properties[prop];\n        // }\n        // for(var prop in this.dataObject.item2Style.properties){\n        //     this.tempData.item2.view[prop] = this.dataObject.item2Style.properties[prop];\n        // }\n        //console.log(\"finish2\", this.onFinished)\n        this.onFinished.dispatch({ item1: this.tempData.item1, item2: this.tempData.item2, currentTarget: this });\n    }\n}\nexport default SwapTransition;\n"]}