{"version":3,"sources":["../../../src/jx/core/Debugger.js"],"names":["Debugger","jx","debugOptions","monitor","_timeMarkers","_timeMarkersGroups","setDebug","debugging","log","info","error","args","alert","_convertArguments","Error","argmentArray","Array","i","arguments","length","push","debugOtions","_debugOptions","enabled","Object","assign","showMonitor","hideMonitor","window","onerror","errorMsg","url","lineNumber","column","errorObj","search","$","append","_tickListener","createjs","Ticker","addEventListener","html","Math","round","getMeasuredFPS","framerate","remove","removeEventListener","text","group","_logTimerMarker","addTimeMarker","groupName","results","timeMarker","result","absolute","timeS","interval","console","markers","time","Date","now","groups","flat","indexOf","prop","j"],"mappings":"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","file":"Debugger.js","sourcesContent":["export default class Debugger {\n    constructor(jx, debugOptions = false) {\n        this.jx = jx;\n        this.monitor = null;\n        this._timeMarkers = [];\n        this._timeMarkersGroups = {};\n        this.setDebug(debugOptions);\n    }\n    kill() {\n        if (!this.jx)\n            return;\n        this.jx = null;\n    }\n    log(...args) {\n        if (!this.debugging)\n            return;\n        console.log(...args);\n    }\n    info(...args) {\n        if (!this.debugging)\n            return;\n        console.info(...args);\n    }\n    warn(...args) {\n        if (!this.debugging)\n            return;\n        console.error(...args);\n    }\n    error(...args) {\n        if (!this.debugging)\n            return;\n        console.error(...args);\n    }\n    alert(args) {\n        if (!this.debugging)\n            return;\n        alert(this._convertArguments(args));\n    }\n    fatal(...args) {\n        if (!this.debugging)\n            return;\n        throw new Error(...args);\n    }\n    _convertArguments(args) {\n        if (!this.debugging)\n            return;\n        var argmentArray = new Array();\n        for (var i = 0; i < arguments.length; i++) {\n            argmentArray.push(arguments[i]);\n        }\n        return argmentArray;\n    }\n    setDebug(debugOtions) {\n        if (typeof debugOtions == \"boolean\") {\n            this._debugOptions = {\n                enabled: debugOtions,\n                monitor: debugOtions,\n                alert: false\n            };\n        }\n        else {\n            this._debugOptions = Object.assign({ enabled: false, monitor: false, alert: false }, debugOtions);\n        }\n        this.debugging = this._debugOptions.enabled;\n        if (this._debugOptions.monitor) {\n            this.showMonitor();\n        }\n        else {\n            this.hideMonitor();\n        }\n        if (this._debugOptions.alert) {\n            window.onerror = function (errorMsg, url, lineNumber, column, errorObj) {\n                if (errorMsg.search(\"afdp\") == -1) { // don't alert for this error triggered by aquafadas\n                    alert('Error: ' + errorMsg + ' Script: ' + url + ' Line: ' + lineNumber + ' Column: ' + column + ' StackTrace: ' + errorObj);\n                }\n                ;\n            };\n        }\n        else {\n            window.onerror = null; // delete onerror created in JXCore\n        }\n    }\n    showMonitor() {\n        if (!this.monitor) {\n            this.monitor = $('<div id=\"monitor\" style=\"font-size: 14px; left:0px; padding: 1px 5px; position:absolute; top:0px; z-index:1000;background:#000;color:#FFF;\"></div>');\n        }\n        $(\"body\").append(this.monitor);\n        this._tickListener = createjs.Ticker.addEventListener(\"tick\", () => {\n            this.monitor.html(\"FPS: \" + Math.round(createjs.Ticker.getMeasuredFPS()) + \"/\" + Math.round(createjs.Ticker.framerate));\n        });\n    }\n    hideMonitor() {\n        if (this.monitor) {\n            this.monitor.remove();\n            createjs.Ticker.removeEventListener(\"tick\", this._tickListener);\n        }\n    }\n    logTime(text, group = \"none\") {\n        this._logTimerMarker(this.addTimeMarker(text, group));\n        // text\n        // time depuis premier du groupe\n        // time depuis le dernier du mÃªme group\n    }\n    _getAllFromGroups(groupName) {\n        var results = [];\n        for (var i = 0; i < this._timeMarkers.length; i++) {\n            if (this._timeMarkers[i].group == groupName) {\n                results.push(this._timeMarkers[i]);\n            }\n        }\n        ;\n        return results;\n    }\n    _logTimerMarker(timeMarker) {\n        var result = `${timeMarker.group} \\tA:${timeMarker.absolute / 1000}s \\tG:${timeMarker.timeS / 1000}s I:\\t${timeMarker.interval / 1000}s \\t${timeMarker.text}`;\n        console.log(result);\n        // var markers = this._timeMarkersGroups[timeMarker.group];\n        // var firstTimer = markers[0];\n        // var timerIndex = markers.indexOf(timeMarker);\n        // var result = {\n        // \ttime: (timeMarker.time - firstTimer.time)/1000,\n        // \tinterval: (timerIndex>0 ? timeMarker.time - markers[timerIndex-1].time : 0 )/1000\n        // }\n        // timeMarker.time - firstTime)/1000 + \"s, \" + \"\\t\\t\"+(i>0 ? timeMarker.time - markers[i-1].time : 0 )/1000+ \"s : \\t\" + markers[i].text)\n    }\n    addTimeMarker(text, group = \"none\") {\n        this._timeMarkersGroups[group] = this._timeMarkersGroups[group] || [];\n        var markers = this._timeMarkersGroups[group];\n        //console.log(markers, this._timeMarkersGroups)\n        var timeMarker = { text, group: group, time: Date.now() };\n        markers.push(timeMarker);\n        this._timeMarkers.push(timeMarker);\n        timeMarker.absolute = timeMarker.time - this._timeMarkers[0].time;\n        timeMarker.timeS = timeMarker.time - markers[0].time;\n        timeMarker.interval = (markers.length > 1 ? timeMarker.time - markers[markers.length - 2].time : 0);\n        return timeMarker;\n    }\n    logTimeMarkers(groups = null, flat = true) {\n        console.log(\"_________\\nLOG\");\n        if (flat) {\n            for (var i = 0; i < this._timeMarkers.length; i++) {\n                if (groups == null || groups.indexOf(this._timeMarkers[i].group) != -1) {\n                    this._logTimerMarker(this._timeMarkers[i]);\n                }\n            }\n            ;\n        }\n        else {\n            if (!groups) {\n                groups = [];\n                for (var prop in this._timeMarkersGroups) {\n                    groups.push(prop);\n                }\n            }\n            //console.log(groups,this._timeMarkersGroups)\n            for (var i = 0; i < groups.length; i++) {\n                var markers = this._timeMarkersGroups[groups[i]] || [];\n                for (var j = 0; j < markers.length; j++) {\n                    this._logTimerMarker(markers[j]);\n                }\n                ;\n            }\n            ;\n        }\n        console.log(\"END LOG\\n_________\");\n    }\n}\n"]}