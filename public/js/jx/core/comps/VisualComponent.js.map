{"version":3,"sources":["../../../../src/jx/core/comps/VisualComponent.js"],"names":["defaultValues","render","quality","x","y","width","undefined","height","ratioWidth","ratioHeight","alpha","anchor","anchorX","anchorY","enabled","visible","rotation","VisualComponent","dataObject","Object","assign","cursor","onclick","lockDelayAfterClick","view","parent","removeChild","_jxClip","_parent","implements","_cursorOnDisabled","_initJXVisualClipZap","click","signals","Signal","onrollover","onrollout","onmouseup","onmousedown","onmousemove","fitIn","data","saveBounds","add","jx","__jxVisualClipZap","_clipZapInit","zIndex","opacity","__jxVisualClipZapInfo","delay","config","app","clickHandler","$","append","css","wait","__clipZapHide","detach","removeAll","transformData","transform","target","center","targetCoord","tools","obj","filter","ratioW","ratioH","ratio","Math","min","alignH","alignV","auto","arguments","length","_containerBounds","max","savedBounds","cache","getBounds","updateCache","uncache","localToGlobal","globalToLocal","localToLocal","bringToFront","bringToBack","evt","_enabled","__clipZapShow","dispatch","details","value","_render","scaleX","scaleY","_cursorOnRoll"],"mappings":"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","file":"VisualComponent.js","sourcesContent":["import Component from \"jx/core/comps/Component\";\n/**\n  * @type {Object}\n  * @property {string} render\n  * @property {number} quality\n  */\nlet defaultValues = {\n    render: null,\n    quality: 1,\n    x: 0,\n    y: 0,\n    width: undefined,\n    height: undefined,\n    ratioWidth: undefined,\n    ratioHeight: undefined,\n    alpha: 1,\n    anchor: null,\n    anchorX: 0,\n    anchorY: 0,\n    enabled: true,\n    visible: true,\n    rotation: 0\n};\n/**\n * All visual components implements VisualComponent class.\n */\nexport default class VisualComponent extends Component {\n    /**\n     * @param {Object} dataObject -\n     * @param {string} dataObject.render -\n     * @param {number} dataObject.quality -\n     * @param {number} dataObject.x -\n     * @param {number} dataObject.y -\n     * @param {number} dataObject.width -\n     * @param {number} dataObject.height -\n     * @param {number} dataObject.ratioWidth -\n     * @param {number} dataObject.ratioHeight -\n     * @param {number} dataObject.alpha -\n     * @param {object} dataObject.anchor -\n     * @param {number} dataObject.anchorX -\n     * @param {number} dataObject.anchorY -\n     * @param {boolean} dataObject.enabled -\n     * @param {boolean} dataObject.visible -\n     * @param {number} dataObject.rotation -\n     * @param {Function} dataObject.onclick -\n     */\n    constructor(dataObject) {\n        super(Object.assign({\n            render: null,\n            quality: 1,\n            x: 0,\n            y: 0,\n            width: undefined,\n            height: undefined,\n            ratioWidth: undefined,\n            ratioHeight: undefined,\n            alpha: undefined,\n            anchor: null,\n            anchorX: 0,\n            anchorY: 0,\n            enabled: true,\n            visible: true,\n            rotation: 0,\n            cursor: \"default\",\n            onclick: null,\n            lockDelayAfterClick: null\n        }, dataObject));\n    }\n    kill() {\n        if (this.view && this.parent && this.parent.view) {\n            this.parent.removeChild(this);\n        }\n        ;\n        if (this.view)\n            this.view._jxClip = null;\n        this.view = null;\n        this.parent = null;\n        // this.jx.__jxVisualClipZap.hide();\t\t\n        // this.jx.__jxVisualClipZap = null;\t\t\n        super.kill();\n    }\n    _create() {\n        super._create();\n        this._parent = null;\n        /** Renderer type use by this component (CJS, DOM, ...) */\n        this.render = this.dataObject.render;\n        this.quality = this.dataObject.quality;\n        this.implements(\"VisualComponent\");\n        this._cursorOnDisabled = \"default\";\n        //_____________________________\n        // EVENTS\n        this._initJXVisualClipZap();\n        this.click = new signals.Signal(); // obsolete\n        this.onclick = new signals.Signal();\n        this.onrollover = new signals.Signal();\n        this.onrollout = new signals.Signal();\n        this.onmouseup = new signals.Signal();\n        this.onmousedown = new signals.Signal();\n        this.onmousemove = new signals.Signal();\n        if (this.dataObject.view) {\n            this.view = this.dataObject.view;\n        }\n    }\n    _initSync() {\n        super._initSync();\n        if (!this.view)\n            return;\n        this.view._jxClip = this;\n        this.x = this.dataObject.x;\n        this.y = this.dataObject.y;\n        this.rotation = 0; //needed for correct width height\n        if (this.dataObject.width)\n            this.width = this.dataObject.width;\n        if (this.dataObject.height)\n            this.height = this.dataObject.height;\n        if (this.dataObject.ratioWidth)\n            this.ratioWidth = this.dataObject.ratioWidth;\n        if (this.dataObject.ratioHeight)\n            this.ratioHeight = this.dataObject.ratioHeight;\n        this.anchorX = this.dataObject.anchorX;\n        this.anchorY = this.dataObject.anchorY;\n        if (this.dataObject.fitIn)\n            this.fitIn(this.dataObject.fitIn);\n        this.rotation = this.dataObject.rotation;\n        this.visible = this.dataObject.visible;\n        if (this.dataObject.alpha != undefined)\n            this.alpha = this.dataObject.alpha;\n        this.data = this.dataObject.data;\n        this.cursor = this.dataObject.cursor;\n        this.enabled = this.dataObject.enabled;\n        this.saveBounds(); // keep original transform for further reset.\n        if (this.dataObject.onclick)\n            this.onclick.add(this.dataObject.onclick);\n        if (this.dataObject.onrollover)\n            this.onrollover.add(this.dataObject.onrollover);\n        if (this.dataObject.onrollout)\n            this.onrollout.add(this.dataObject.onrollout);\n        if (this.dataObject.onmouseup)\n            this.onmouseup.add(this.dataObject.onmouseup);\n        if (this.dataObject.onmousedown)\n            this.onmousedown.add(this.dataObject.onmousedown);\n        if (this.dataObject.onmousemove)\n            this.onmousemove.add(this.dataObject.onmousemove);\n    }\n    _initJXVisualClipZap() {\n        if (!this.jx.__jxVisualClipZap) {\n            this.jx.__jxVisualClipZap = this.jx._clipZapInit({ zIndex: 1200, opacity: 0 });\n        }\n        this.__jxVisualClipZapInfo = {\n            delay: this.dataObject.lockDelayAfterClick === null ? this.jx.config.app.lockDelayAfterClick : this.dataObject.lockDelayAfterClick\n        };\n    }\n    __clipZapShow() {\n        let delay = this.__jxVisualClipZapInfo.delay;\n        if (delay === 0)\n            return;\n        this.jx.__jxVisualClipZap.clickHandler.add(() => { });\n        $(\"body\").append(this.jx.__jxVisualClipZap);\n        this.jx.__jxVisualClipZap.css(\"display\", \"inline\");\n        this.jx.wait(delay, () => this.__clipZapHide());\n    }\n    __clipZapHide() {\n        this.jx.__jxVisualClipZap.css(\"display\", \"none\");\n        this.jx.__jxVisualClipZap.detach();\n        this.jx.__jxVisualClipZap.clickHandler.removeAll();\n    }\n    close() {\n        super.close();\n        if (this.view && this.parent) {\n            this.parent.removeChild(this);\n        }\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(value) {\n        //console.log(\"parent\", value.hasChild(this))\n        // if (!value.hasChild(this)) {\n        // \tvalue.addChild(this);\n        // }\n        this._parent = value;\n    }\n    /** Type of render, CJS or DOM\n    * @type {string}\n    **/\n    get render() {\n        return this._render;\n    }\n    /**\n    * used only during component construction.\n    * @type {string}\n    **/\n    set render(value) {\n        this._render = value;\n    }\n    /** @type {boolean} */\n    set visible(value) {\n        this.view.visible = value;\n    }\n    /** @type {boolean} */\n    get visible() {\n        return this.view.visible;\n    }\n    /** @type {number} */\n    set alpha(value) {\n        this.view.alpha = value;\n    }\n    /** @type {number} */\n    get alpha() {\n        return this.view.alpha;\n    }\n    /** @deprecated */\n    transform(transformData) {\n        this.view.transform(transformData);\n    }\n    /** @type {number} */\n    set x(value) {\n        this.view.x = value;\n    }\n    /** @type {number} */\n    get x() {\n        return this.view.x;\n    }\n    /** @type {number} */\n    set y(value) {\n        this.view.y = value;\n    }\n    /** @type {number} */\n    get y() {\n        return this.view.y;\n    }\n    /** @type {number} */\n    set width(value) {\n        this.view.width = value;\n    }\n    /** @type {number} */\n    get width() {\n        return this.view.width;\n    }\n    /**\n     * Modify width keeping the ratio width/height.\n     * @type {number}\n     */\n    set ratioWidth(value) {\n        var ratio = this.height / this.width;\n        this.width = value;\n        this.height = value * ratio;\n    }\n    /**\n     * Modify width keeping the ratio width/height.\n     * @type {number}\n     */\n    set ratioHeight(value) {\n        var ratio = this.width / this.height;\n        this.height = value;\n        this.width = value * ratio;\n    }\n    /** @ignore */\n    fitIn_old({ target = null, x = 0, y = 0, width = 0, height = 0, center = true }) {\n        if (target) {\n            var targetCoord = this.jx.tools.obj.filter(target, { x, y, width, height });\n            x = targetCoord.x;\n            y = targetCoord.y;\n            width = targetCoord.width;\n            height = targetCoord.height;\n        }\n        var ratioW = width / this.width;\n        var ratioH = height / this.height;\n        var ratio = Math.min(ratioW, ratioH);\n        this.width *= ratio;\n        this.height *= ratio;\n        if (center) {\n            this.x = x + width / 2 - this.width / 2;\n            this.y = y + height / 2 - this.height / 2;\n        }\n    }\n    /**\n     * Modify coords and scales of this component for it fit in limits box deducted from arguments.\n     * @example\n     * var myImg = this.cc({rid: \"MY_IMG\"}); // image 800x600\n     * this.stage.addChild(myImg);\n     * myImg.fitIn({x: 10, y: 10, width: 200, height: 100, center: true});\n     * // Adapt image to show it centered in the stage rectangle area (10,10,200,100);\n     *\n     * @param  {any}  options.target   Any object containing x, y, width, height properties. If defined, others x,y,width,height arguments are ignored.\n     * @param  {Number}  options.x\n     * @param  {Number}  options.y\n     * @param  {Number}  options.width\n     * @param  {Number}  options.height\n     * @param  {String}  options.alignH   horizontal alignment (left, center, right). Not used if center set to true\n     * @param  {String}  options.alignV   vertical alignment (top, middle, bottom). Not used if center set to true\n     * @param  {Boolean} options.auto     (experimental) If set to true, arguments are stored, and latter calls of fitIn() without arguments will use these stored arguments. Useful for autorefresh of chilren when parent changes.\n     * @param  {Object}  options.center}  equal to set alignH=center and alignV=middle\n     */\n    fitIn({ target = null, x = 0, y = 0, width = 0, height = 0, alignH = \"left\", alignV = \"top\", auto = false, center } = {}) {\n        if (center == true) {\n            alignH = \"center\";\n            alignV = \"middle\";\n        }\n        ;\n        if (arguments.length == 0) {\n            if (this._containerBounds) {\n                this.fitIn(this._containerBounds);\n            }\n            return;\n        }\n        if (target) {\n            var targetCoord = this.jx.tools.obj.filter(target, { x, y, width, height });\n            x = targetCoord.x;\n            y = targetCoord.y;\n            width = targetCoord.width;\n            height = targetCoord.height;\n        }\n        if (auto) {\n            this._containerBounds = { target, x, y, width, height, alignH, alignV, auto, center };\n        }\n        ;\n        var ratioW = width / this.width;\n        var ratioH = height / this.height;\n        var ratio = Math.min(ratioW, ratioH);\n        this.width *= ratio;\n        this.height *= ratio;\n        switch (alignH) {\n            case \"left\":\n                this.x = x;\n                break;\n            case \"center\":\n                this.x = x + width / 2 - this.width / 2;\n                break;\n            case \"right\":\n                this.x = x + width - this.width;\n                break;\n        }\n        switch (alignV) {\n            case \"top\":\n                this.y = y;\n                break;\n            case \"middle\":\n                this.y = y + height / 2 - this.height / 2;\n                break;\n            case \"bottom\":\n                this.y = y + height - this.height;\n                break;\n        }\n    }\n    fitOut({ target = null, x = 0, y = 0, width = 0, height = 0, alignH = \"left\", alignV = \"top\", auto = false, center = false } = {}) {\n        if (center == true) {\n            alignH = \"center\";\n            alignV = \"middle\";\n        }\n        ;\n        // if (arguments.length == 0) {\n        // \tif (this._containerBounds) {\n        // \t\tthis.fitIn(this._containerBounds);\n        // \t}\n        // \treturn;\n        // } \n        if (target) {\n            var targetCoord = this.jx.tools.obj.filter(target, { x, y, width, height });\n            x = targetCoord.x;\n            y = targetCoord.y;\n            width = targetCoord.width;\n            height = targetCoord.height;\n        }\n        // if (auto) {\n        // \tthis._containerBounds = {target,x,y,width,height,alignH,alignV,auto,center};\n        // };\n        var ratioW = width / this.width;\n        var ratioH = height / this.height;\n        var ratio = Math.max(ratioW, ratioH);\n        this.width *= ratio;\n        this.height *= ratio;\n        switch (alignH) {\n            case \"left\":\n                this.x = x;\n                break;\n            case \"center\":\n                this.x = x + width / 2 - this.width / 2;\n                break;\n            case \"right\":\n                this.x = x + width - this.width;\n                break;\n        }\n        switch (alignV) {\n            case \"top\":\n                this.y = y;\n                break;\n            case \"middle\":\n                this.y = y + height / 2 - this.height / 2;\n                break;\n            case \"bottom\":\n                this.y = y + height - this.height;\n                break;\n        }\n    }\n    /** @type {number} */\n    set rotation(value) {\n        this.view.rotation = value;\n    }\n    /** @type {number} */\n    get rotation() {\n        return this.view.rotation;\n    }\n    /** @type {number} */\n    set scaleX(value) {\n        this.view.scaleX = value;\n    }\n    /** @type {number} */\n    get scaleX() {\n        return this.view.scaleX;\n    }\n    /** @type {boolean} */\n    set scaleY(value) {\n        this.view.scaleY = value;\n    }\n    /** @type {number} */\n    get scaleY() {\n        return this.view.scaleY;\n    }\n    /** @type {boolean} */\n    set scale(value) {\n        this.view.scaleX = value;\n        this.view.scaleY = value;\n    }\n    /** @type {number} */\n    set height(value) {\n        this.view.height = value;\n    }\n    /** @type {number} */\n    get height() {\n        return this.view.height;\n    }\n    /**\n     * Save x,y,width,height in this.savedBounds property and return it.\n    */\n    saveBounds() {\n        this.savedBounds = {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n        return this.savedBounds;\n    }\n    /**\n     * Set x,y,width,height with savedBounds argument or this.savedBounds property if argument is null.\n    */\n    restoreBounds(savedBounds = null) {\n        savedBounds = savedBounds || this.savedBounds;\n        this.width = savedBounds.width;\n        this.height = savedBounds.height;\n        this.x = savedBounds.x;\n        this.y = savedBounds.y;\n    }\n    /** @type {boolean} */\n    set enabled(value) {\n        this._enabled = value;\n        this.cursor = this._cursorOnRoll; // force refresh cursor\n    }\n    /** @type {boolean} */\n    get enabled() {\n        return this._enabled;\n    }\n    /**\n     * Set cursor on rollover, depends of css available cursors (cf http://www.w3schools.com/jsref/prop_style_cursor.asp).\n     * Commons are : default, pointer (hand).\n     * This cursor value is used when the component is enabled and the mouse roll over it. (default:'default')\n     * If enabled=false, cursor 'default' is used.\n     * @type {string}\n     */\n    set cursor(value) {\n        this.view.cursor = value;\n    }\n    /** @type {string} */\n    get cursor() {\n        return this.view.cursor;\n    }\n    /**\n    */\n    cache() {\n        this.view.cache(0, 0, this.view.getBounds().width, this.view.getBounds().height);\n    }\n    /**\n     */\n    updateCache() {\n        this.view.updateCache();\n    }\n    /**\n     */\n    uncache() {\n        this.view.uncache();\n    }\n    /**\n     */\n    localToGlobal(...args) {\n        return this.view.localToGlobal(...args);\n    }\n    /**\n     */\n    globalToLocal(...args) {\n        return this.view.globalToLocal(...args);\n    }\n    /**\n     */\n    localToLocal(...args) {\n        return this.view.localToLocal(...args);\n    }\n    /**\n     */\n    bringToFront() {\n        this.view.bringToFront();\n    }\n    /**\n     */\n    bringToBack() {\n        this.view.bringToBack();\n    }\n    //__________________________________________________________________________________\n    // Listeners\n    _clicked(evt) {\n        if (this._enabled) {\n            this.__clipZapShow();\n            this.onclick.dispatch({ target: this, details: evt });\n        }\n    }\n    _rollover(evt) {\n        if (this._enabled) {\n            this.onrollover.dispatch({ target: this, details: evt });\n        }\n    }\n    _rollout(evt) {\n        if (this._enabled) {\n            this.onrollout.dispatch({ target: this, details: evt });\n        }\n    }\n    _mouseup(evt) {\n        if (this._enabled) {\n            this.onmouseup.dispatch({ target: this, details: evt });\n        }\n    }\n    _mousedown(evt) {\n        if (this._enabled) {\n            this.onmousedown.dispatch({ target: this, details: evt });\n        }\n    }\n    _mousemove(evt) {\n        if (this._enabled) {\n            this.onmousemove.dispatch({ target: this, details: evt });\n        }\n    }\n}\n"]}