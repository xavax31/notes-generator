{"version":3,"sources":["../../../src/jx/core/Core.js"],"names":["instance","singletonEnforcer","version","plugs","core","CJS","DOM","Core","app","ticker","createjs","Ticker","editor","window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","tick","args","_setTimeoutIDs","_setIntervalIDs","onappfreeze","signals","Signal","onappunfreeze","loadedPlugs","global","debug","comp","tools","Object","assign","Function","mergeObject","config","db","factory","cc","p","createComp","syslog","debugging","console","log","bind","sysinfo","info","syswarn","warn","syserror","error","kill","err","_bayamFrontCom","sendCloseFinalizedRequest","self","location","reload","callback","clipZap","clickHandler","add","$","append","css","detach","removeAll","_freezed","appFreezeClipZap","_clipZapInit","zIndex","opacity","_stateBeforeFreeze","framerate","dispatch","dj","appFreeze","appUnfreeze","remove","_killed","clearAllIntervals","loadingScreen","memo","layout","fx","moduleData","findOne","data","jx","setProjectInfo","projectInformations","loadPlugs","plugsArr","push","jxPlugsLoad","Date","now","Component","arrayRemoveDouble","concat","packages","i","length","instanceType","type","preload","addResources","load","jxPlugsLoaded","evt","prop","addClass","setConfig","eventType","off","on","setTimeout","e","preventDefault","system","device","support","delay","_intID","waitID","clearTimeout","splice","indexOf","setInterval","intervalID","clearInterval","arg","result","id","mergeObjectIn"],"mappings":"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","file":"Core.js","sourcesContent":["import DBManager from \"jx/core/DBManager\";\nimport Factory from \"jx/core/Factory\";\nimport Config from \"jx/core/Config\";\nimport Tools from \"jx/core/utils/Tools\";\nlet instance = null;\nlet singletonEnforcer = class SingetonEnforcer {\n};\nlet version = \"1.0.0\";\nlet plugs = {\n    core: [\n        { \"id\": \"Component\", \"src\": \"jx/core/comps/Component\" },\n        { \"id\": \"BusyScreen\", \"src\": \"jx/comps/BusyScreen\" },\n        { \"id\": \"SoundManager\", \"src\": \"jx/core/sound/SoundManager\" },\n        { \"id\": \"BatchLoader\", \"src\": \"jx/core/BatchLoader\" },\n        { \"id\": \"FXManager\", \"src\": \"jx/core/FXManager\" },\n        { \"id\": \"MemoManager\", \"src\": \"jx/core/memos/MemoManager\" },\n        { \"id\": \"MemoLocalStorage\", \"src\": \"jx/core/memos/MemoLocalStorage\" },\n        { \"id\": \"MemoCookie\", \"src\": \"jx/core/memos/MemoCookie\" },\n        { \"id\": \"TransitionManager\", \"src\": \"jx/core/transitions/TransitionManager\" },\n        { \"id\": \"Layout\", \"src\": \"jx/core/layout/Layout\" },\n        { \"id\": \"Request\", \"src\": \"jx/core/Request\" },\n        { \"id\": \"Debugger\", \"src\": \"jx/core/Debugger\" },\n        { \"id\": \"List\", \"src\": \"jx/core/utils/List\" },\n        { \"id\": \"GroupList\", \"src\": \"jx/comps/GroupList\" },\n        { \"id\": \"JSONLoader\", \"src\": \"jx/core/loaders/JSONLoader\" },\n        { \"id\": \"ImageLoader\", \"src\": \"jx/core/loaders/ImageLoader\" },\n        { \"id\": \"SoundLoader\", \"src\": \"jx/core/loaders/SoundLoader\" },\n        { \"id\": \"SoundLoaderMediaElement\", \"src\": \"jx/core/loaders/SoundLoaderMediaElement\" },\n        { \"id\": \"TextLoader\", \"src\": \"jx/core/loaders/TextLoader\" },\n        { \"id\": \"JSONLoader\", \"src\": \"jx/core/loaders/JSONLoader\" },\n        { \"id\": \"FlashtmlLoader\", \"src\": \"jx/core/loaders/FlashtmlLoader\" },\n        { \"id\": \"ImageSequenceLoader\", \"src\": \"jx/core/loaders/ImageSequenceLoader\" },\n        { \"id\": \"SpriteSheetLoader\", \"src\": \"jx/core/loaders/SpriteSheetLoader\" },\n        { \"id\": \"SwapTransition\", \"src\": \"jx/core/transitions/SwapTransition\" },\n        { \"id\": \"FlashLib\", \"src\": \"jx/comps/flashlib/FlashLib\" },\n        { \"id\": \"StartButton\", \"src\": \"jx/comps/StartButton\" },\n        { \"id\": \"ScreensManager\", \"src\": \"jx/comps/screensmanager/ScreensManager\" },\n        { \"id\": \"ScreenVideo\", \"src\": \"jx/comps/screensmanager/ScreenVideo\" },\n        { \"id\": \"ScreenPhoto\", \"src\": \"jx/comps/screensmanager/ScreenPhoto\" }\n    ],\n    CJS: [\n        { \"id\": \"VisualComponentCJS\", \"src\": \"jx/comps/visualcomponent/VisualComponentCJS\" },\n        { \"id\": \"StageView\", \"src\": \"jx/comps/StageView\" },\n        { \"id\": \"ShapeCJS\", \"src\": \"jx/comps/shape/ShapeCJS\" },\n        { \"id\": \"ImageCJS\", \"src\": \"jx/comps/image/ImageCJS\" },\n        { \"id\": \"TextCJS\", \"src\": \"jx/comps/text/TextCJS\" },\n        { \"id\": \"TextMultiRender\", \"src\": \"jx/comps/text/TextMultiRender\" },\n        { \"id\": \"ContainerCJS\", \"src\": \"jx/comps/container/ContainerCJS\" },\n        { \"id\": \"ImageSequenceCJS\", \"src\": \"jx/comps/imagesequence/ImageSequenceCJS\" },\n        { \"id\": \"ClipCJS\", \"src\": \"jx/comps/clip/ClipCJS\" },\n        { \"id\": \"SimpleButtonCJS\", \"src\": \"jx/comps/simplebutton/SimpleButtonCJS\" }\n    ],\n    DOM: [\n        { \"id\": \"VisualComponentDOM\", \"src\": \"jx/comps/visualcomponent/VisualComponentDOM\" },\n        { \"id\": \"TextDOM\", \"src\": \"jx/comps/text/TextDOM\" },\n        { \"id\": \"InputText\", \"src\": \"jx/comps/InputText\" },\n        { \"id\": \"InputNumber\", \"src\": \"jx/comps/InputNumber\" },\n        { \"id\": \"ImageDOM\", \"src\": \"jx/comps/image/ImageDOM\" },\n        { \"id\": \"ContainerDOM\", \"src\": \"jx/comps/container/ContainerDOM\" },\n        { \"id\": \"ImageSequenceDOM\", \"src\": \"jx/comps/imagesequence/ImageSequenceDOM\" },\n        { \"id\": \"VideoDOM\", \"src\": \"jx/comps/video/VideoDOM\" },\n        { \"id\": \"SimpleButtonDOM\", \"src\": \"jx/comps/simplebutton/SimpleButtonDOM\" },\n        { \"id\": \"SimpleDOMView\", \"src\": \"jx/comps/SimpleDOMView\" }\n    ]\n};\n/**\n * JX Engine v 1.0\n * @license: MIT\n */\nexport default class Core {\n    constructor(app) {\n        this.ticker = createjs.Ticker;\n        this.editor = null;\n        //console.warn(\"New JXCore instance initialised\",app)\n        window[\"jx\" + version] = window[\"jx\" + version] || this;\n        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n        this.tick = args => window.requestAnimationFrame(args);\n        // jx.raf = window.requestAnimationFrame.bind(window);\n        // window[\"jxRAF\"] = window.requestAnimationFrame;\n        //--- keep setInterval and setTimeout refs for further clear.\n        this._setTimeoutIDs = [];\n        this._setIntervalIDs = [];\n        this.onappfreeze = new signals.Signal();\n        this.onappunfreeze = new signals.Signal();\n        this.loadedPlugs = [];\n        /** Reference to global jx */\n        this.global = window[\"jx\"];\n        this.debug = this.global.debug;\n        /** Reference to MainCtrl class of application */\n        this.app = app;\n        this.comp = {};\n        /** @type {Tools} */\n        this.tools = new Tools();\n        // hack for older browsers\n        if (!(Object.assign instanceof Function)) {\n            Object.assign = this.tools.mergeObject;\n        }\n        /** @type {Config} */\n        this.config = new Config(this);\n        /** @type {DBManager} */\n        this.db = new DBManager(this);\n        /** @type {Factory} */\n        this.factory = new Factory(this);\n        //--- shortcuts\n        /** Shortcut for {@link Factory.createComp}. */\n        this.cc = (p) => this.factory.createComp(p);\n        this.syslog = this.debug.debugging ? console.log.bind(console) : function () { };\n        this.sysinfo = this.debug.debugging ? console.info.bind(console) : function () { };\n        this.syswarn = this.debug.debugging ? console.warn.bind(console) : function () { };\n        this.syserror = this.debug.debugging ? console.error.bind(console) : function () { };\n        this.log = window[\"jxAppDebug\"] ? console.log.bind(console) : function () { };\n        this.info = window[\"jxAppDebug\"] ? console.info.bind(console) : function () { };\n        this.warn = window[\"jxAppDebug\"] ? console.warn.bind(console) : function () { };\n        this.error = window[\"jxAppDebug\"] ? console.error.bind(console) : function () { };\n    }\n    /**\n     * Close the application.\n     */\n    closeApplication() {\n        try {\n            if (this.app)\n                this.app.kill();\n        }\n        catch (err) {\n            console.warn(\"errors while killing application\");\n        }\n        this.app = null;\n        this.kill();\n        if (this._bayamFrontCom) {\n            this._bayamFrontCom.sendCloseFinalizedRequest();\n        }\n    }\n    /**\n     * Reload the application\n     */\n    restartApplication() {\n        this.kill();\n        window.self.location.reload();\n    }\n    /** block interactivity */\n    blockInteractivity(callback = evt => { }) {\n        this.clipZap.clickHandler.add(callback);\n        $(\"body\").append(this.clipZap);\n        this.clipZap.css(\"display\", \"inline\");\n    }\n    /** unblock interactivity */\n    unblockInteractivity() {\n        this.clipZap.css(\"display\", \"none\");\n        this.clipZap.detach();\n        this.clipZap.clickHandler.removeAll();\n        //this.clipZap.off();\n    }\n    /**\n     * Pause the application.\n     */\n    pauseApplication() {\n        if (this._freezed)\n            return;\n        this._freezed = true;\n        console.log(\"JX Pause\");\n        this.appFreezeClipZap = this._clipZapInit({ zIndex: 10000, opacity: 0.0 });\n        $(\"body\").append(this.appFreezeClipZap);\n        this.appFreezeClipZap.css(\"display\", \"inline\");\n        this._stateBeforeFreeze = {\n            framerate: createjs.Ticker.framerate\n        };\n        this.onappfreeze.dispatch();\n        //if (this.app) this.app.freeze();\n        this.dj.appFreeze();\n        // todo: intervals\n    }\n    get freezed() {\n        return this._freezed;\n    }\n    /**\n     * Resume the application.\n     */\n    resumeApplication() {\n        if (!this._freezed)\n            return;\n        this._freezed = false;\n        console.log(\"JX Resume\");\n        this.onappunfreeze.dispatch();\n        //if (this.app) this.app.unfreeze();\n        this.dj.appUnfreeze();\n        this.appFreezeClipZap.remove;\n        this.appFreezeClipZap.detach();\n        this.appFreezeClipZap = null;\n        // todo: intervals\n        // todo: videos\n    }\n    kill() {\n        if (this._killed)\n            return;\n        this._killed = true;\n        console.info(\"killing\", this);\n        try {\n            this.clearAllIntervals();\n            this.dj.kill();\n            this.dj = null;\n            this.db.kill();\n            this.db = null;\n            this.config.kill();\n            this.config = null;\n            this.factory.kill();\n            this.factory = null;\n            this.loadingScreen.kill();\n            this.loadingScreen = null;\n            this.debug.kill();\n            this.debug = null;\n            this.comp = null;\n            this.ticker = null;\n            this.memo = null;\n            this.layout = null;\n            this.fx = null;\n            this.log = null;\n            this.tools = null;\n            window[\"jx\" + version] = null;\n            this.onappfreeze.removeAll();\n            this.onappunfreeze.removeAll();\n            this.onappfreeze = null;\n            this.onappunfreeze = null;\n        }\n        catch (err) {\n            console.warn(\"errors while killing engine\");\n        }\n        this.global.kill();\n        this.global = null;\n        console.info(\"killed\", this);\n    }\n    _initialise({ plugs = [], moduleData = {} }, callback) {\n        this.loadingScreen = new (this.db.findOne({ \"id\": \"BusyScreen\" }).data)({ jx: this });\n        this.ticker = createjs.Ticker;\n        /** @type {MemoManager} */\n        this.memo = new (this.db.findOne({ \"id\": \"MemoManager\" }).data)({ jx: this });\n        /** @type {Debugger} */\n        //this.debug = new (this.db.findOne({\"id\": \"Debugger\"}).data) ({jx:this});\n        /** @type {Layout} */\n        this.layout = new (this.db.findOne({ \"id\": \"Layout\" }).data)({ jx: this });\n        /** @type {FXManager} */\n        this.fx = new (this.db.findOne({ \"id\": \"FXManager\" }).data)({ jx: this });\n        /** @type {SoundManager} */\n        this.dj = new (this.db.findOne({ \"id\": \"SoundManager\" }).data)({ jx: this });\n        this.clipZap = this._clipZapInit();\n        this.config.setProjectInfo(moduleData.projectInformations);\n        this.loadPlugs(plugs, callback);\n    }\n    loadPlugs(plugsArr = [], callback) {\n        window[\"jxTiming\"].push({ jxPlugsLoad: Date.now() });\n        // console.log(\"load plugs\", plugsArr)\n        if (!this.comp.Component) { //-- core plugs not yet loaded\n            plugsArr = this.tools.arrayRemoveDouble([\"core\"].concat(plugsArr));\n        }\n        var packages = [];\n        for (var i = 0; i < plugsArr.length; i++) {\n            if (this.tools.instanceType(plugsArr[i]) == \"string\") {\n                packages = packages.concat(plugs[plugsArr[i]]);\n            }\n            else {\n                packages.push(plugsArr[i]);\n            }\n        }\n        for (var i = 0; i < packages.length; i++) {\n            packages[i].type = packages[i].type || \"class\";\n            packages[i].preload = true;\n        }\n        ;\n        this.loadedPlugs = this.loadedPlugs.concat(packages);\n        this.db.addResources(packages);\n        this.db.load({ \"type\": \"class\" }, evt => {\n            window[\"jxTiming\"].push({ jxPlugsLoaded: Date.now() });\n            callback(evt);\n        });\n    }\n    _clipZapInit({ zIndex = 1000, opacity = 0 } = {}) {\n        let clipZap = $(\"<div/>\");\n        clipZap.prop(\"id\", \"clipzap\");\n        clipZap.prop(\"class\", \"canvasHolder\");\n        clipZap.css(\"background-color\", \"#ff0000\");\n        clipZap.css(\"position\", \"absolute\");\n        clipZap.css(\"opacity\", opacity);\n        // clipZap.css(\"width\", \"1024px\");\n        // clipZap.css(\"height\", 1024/this.ratio+\"px\");\n        clipZap.css(\"top\", \"0px\");\n        clipZap.css(\"left\", \"0px\");\n        clipZap.css(\"bottom\", \"0px\");\n        clipZap.css(\"right\", \"0px\");\n        clipZap.css(\"margin\", \"0px\");\n        clipZap.css(\"padding\", \"0px\");\n        clipZap.css(\"display\", \"none\");\n        clipZap.css(\"z-index\", zIndex);\n        clipZap.addClass(\"child\");\n        clipZap.clickHandler = new signals.Signal();\n        clipZap.setConfig = ({ opacity, eventType }) => {\n            if (opacity)\n                clipZap.css(\"opacity\", opacity);\n            if (eventType) {\n                clipZap.off();\n                clipZap.on(eventType, evt => {\n                    console.log(\"clickzap clicked\", evt.type);\n                    setTimeout(evt => clipZap.clickHandler.dispatch(), 1); // hack to avoid black flash when zapping sound (constated on ios)\n                });\n                // avoid scroll when clipZap is displayed on ios safari\n                clipZap.on('touchmove', (e) => {\n                    e.preventDefault();\n                }, false);\n            }\n        };\n        let eventType = this.config.system.device.support !== \"mobile\" ? \"mousedown\" : \"touchstart\";\n        clipZap.setConfig({ opacity, eventType });\n        return clipZap;\n    }\n    toString() { return \"JXCore v\" + version; }\n    get version() { return version; }\n    /**\n     * Wait delay time and call callback. Return an waitID that can be used for clear with waitReset.\n     * @param  {number} delay\n     * @param  {function} callback\n     * @return {string}     wait ID\n     */\n    wait(delay = 1, callback = evt => { }) {\n        let _intID = setTimeout(callback, delay);\n        this._setTimeoutIDs.push(_intID);\n        return _intID;\n    }\n    /**\n     * Clear previous wait call.\n     * @param  {string} waitID\n     */\n    waitReset(waitID) {\n        if (waitID)\n            clearTimeout(waitID);\n        this._setTimeoutIDs.splice(this._setTimeoutIDs.indexOf(waitID), 1);\n    }\n    /**\n     * Repeat callback each delay milliseconds.\n     * @param  {number} delay\n     * @param  {function} callback\n     * @return {string}     setInterval ID\n     */\n    setInterval(delay = 1, callback = evt => { }) {\n        let _intID = setInterval(callback, delay);\n        this._setIntervalIDs.push(_intID);\n        return _intID;\n    }\n    /**\n     * Clear previous setInterval call.\n     * @param  {string} setInterval ID\n     */\n    clearInterval(intervalID) {\n        if (intervalID)\n            clearInterval(intervalID);\n        this._setIntervalIDs.splice(this._setIntervalIDs.indexOf(intervalID), 1);\n    }\n    /**\n     * Clear all setInterval AND wait calls.\n     */\n    clearAllIntervals() {\n        for (var i = 0; i < this._setIntervalIDs.length; i++) {\n            clearInterval(this._setIntervalIDs[i]);\n        }\n        this._setIntervalIDs.length = 0;\n        for (var i = 0; i < this._setTimeoutIDs.length; i++) {\n            clearTimeout(this._setTimeoutIDs[i]);\n        }\n        this._setTimeoutIDs.length = 0;\n    }\n    merge(...args) {\n        var arg;\n        var result = {};\n        for (var i = 0; i < args.length; i++) {\n            arg = args[i];\n            if (this.tools.instanceType(arg) == \"string\") { // id of dataobject provided\n                arg = this.db.findOne({ id: arg }).data;\n            }\n            this.tools.mergeObjectIn(result, arg);\n        }\n        return result;\n    }\n}\n"]}