<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/index.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">screens</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/screens/Screen00.js~Screen00.html">Screen00</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/screens/ScreenBase.js~ScreenBase.html">ScreenBase</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/screens/ScreenFlashBase.js~ScreenFlashBase.html">ScreenFlashBase</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/index.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import ModuleType from &quot;jx/core/presets/StageGameModule&quot;;
import Screen00 from &quot;src/screens/Screen00&quot;

export default class MainCtrl extends ModuleType {
	constructor(dataObject){
		super(Object.assign({
			stageWidth: 1280,
			ratio: 16/9,
			screen: &quot;intro&quot;,
			helper: false, 
			blockMobileScroll: false, 
			blockMobileContextualMenu: false, 
			delayAfterClick: false, 
			flashQuality: &quot;good&quot;,
			commonFlaLib: false
		}, dataObject));
	}


	_onBeforeLoad(callback) {
		callback();
	}


	/*******************************************************************************
	* INIT
	*/
	init(onInitialised){

		this._configure(this.dataObject);

		this.ccid({id: &quot;screens&quot;, type: &quot;ScreensManager&quot;, stage: this.stage, defaultTransition: &quot;FadeBlackInOut&quot;});

		this.screens.add({id: &quot;intro&quot;, type: &quot;ScreenVideo&quot;, rid: &quot;INTRO&quot;, bgMusicVolPC: 0, stage: this.stage, 
			onfinished: evt=&gt;{
				this.jx.dj.music.play({id:&quot;MUSIC&quot;});
				this.screens.go(&quot;screen00&quot;);
			}
		});

		this.screens.add({id: &quot;screen00&quot;, type: Screen00, stage: this.stage, 
			onfinished: evt=&gt;{
			}
		});

		this.comps.initChildren(onInitialised);
	}

	/*******************************************************************************
	* START
	*/
	start(){

		this.screens.go(this.firstScreen);
		// this.jx.dj.music.play({id:&quot;MUSIC&quot;});
	}


	_configure({
			helper=false, 
			blockMobileScroll=false, 
			blockMobileContextualMenu=false, 
			delayAfterClick=false, 
			flashQuality=&quot;good&quot;,
			commonFlaLib=false,
			screen=&quot;intro&quot;
		}) {

		if (helper) this.jx.helper = this.cc({type: Helper, stage: this.stage});

		if (blockMobileContextualMenu) $(&quot;body&quot;).css(&quot;-webkit-touch-callout&quot;, &quot;none&quot;);

		if (blockMobileScroll) {
			document.ontouchmove = function (e) {
			  e.preventDefault();
			}
		}

		if (delayAfterClick) this.jx.config.app.lockDelayAfterClick = 250;

		this.jx.config.flashOptimizer.quality = flashQuality;

		this.stage.ratio = this.dataObject.ratio;

		if (commonFlaLib) this.commonLib = this.jx.db.findOne({id: &quot;COMMON_LIB.SCREEN&quot;}).data;

		this._getFirstScreenAndPhase({firstScreen: screen});
	}


	/**
	 * get the first screen and phase
	 */
	_getFirstScreenAndPhase({firstScreen}) {
		let screenShortcut = (this.jx.config.urlParams.screen || firstScreen).split(&quot;.&quot;); // priority to screen passed as argument in url (&amp;screen=&quot;screenID&quot;);
		this.firstScreen = screenShortcut[0];
		this.firstPhase = screenShortcut.length &gt; 1 ? screenShortcut[1] : null;
	}


}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
